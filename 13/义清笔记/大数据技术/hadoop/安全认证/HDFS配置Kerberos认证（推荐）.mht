From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?SERGU8Xk1sNLZXJiZXJvc8jP1qSjqM3GvPajqQ==?=
Date: Date: Fri, 23 Jul 2021 05:51:01 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0000625452.913"

This is a multi-part message in MIME format.

------=_Next_Part_0000625452.913
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0000208484.142"


------=_Next_Part_0000208484.142
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0000208484.142
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!doctype html><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A<meta http-equiv=3D"X-UA-Compatible" content=3D=
"IE=3D8">=0A=0A=0A<title>HDFS=C5=E4=D6=C3Kerberos=C8=CF=D6=A4=A3=A8=
=CD=C6=BC=F6=A3=A9</title>=0A=0A=0A=0A=0A<style type=3D"text/css"=
 id=3D"wiz_todo_style_id" wiz_link_version=3D"01.00.09">.wiz-todo=
, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padd=
ing: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none=
;} .wiz-todo-label { display: inline-block; padding-top: 7px; pad=
ding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  c=
olor: #666;} .wiz-todo-label-unchecked {text-decoration: initial;=
} .wiz-todo-completed-info {padding-left: 44px; display: inline-b=
lock; } .wiz-todo-avatar { width:20px; height: 20px; vertical-ali=
gn: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-accou=
nt, .wiz-todo-dt { color: #666; }</style>=0A=0A<style id=3D"wiz_c=
ustom_css">        html, body {            font-size: 15px;     =20=
  }        body {            font-family: Helvetica, 'Hiragino Sa=
ns GB', '=CE=A2=C8=ED=D1=C5=BA=DA', 'Microsoft YaHei UI', SimSun,=
 SimHei, arial, sans-serif;            line-height: 1.6;        =20=
   margin: 0;            padding: 20px 36px;            padding:=20=
1.33rem 2.4rem;        }        h1, h2, h3, h4, h5, h6 {        =20=
   margin: 20px 0 10px;            margin: 1.33rem 0 0.667rem;  =20=
         padding: 0;            font-weight: bold;        }     =20=
  h1 {            font-size: 21px;            font-size: 1.4rem;=20=
       }        h2 {            font-size: 20px;            font-=
size: 1.33rem;        }        h3 {            font-size: 18px; =20=
          font-size: 1.2rem;        }        h4 {            font=
-size: 17px;            font-size: 1.13rem;        }        h5 {=20=
           font-size: 15px;            font-size: 1rem;        }=20=
       h6 {            font-size: 15px;            font-size: 1re=
m;            color: #777777;            margin: 1rem 0;        }=
        div, p, ul, ol, dl, li {            margin: 0;        } =20=
      blockquote, table, pre, code{            margin: 8px 0;   =20=
    }        ul, ol {            padding-left: 32px;            p=
adding-left: 2.13rem;        }        blockquote {            bor=
der-left: 4px solid #dddddd;            padding: 0 12px;        =20=
   padding: 0 0.8rem;            color: #aaa;        }        blo=
ckquote > :first-child {            margin-top: 0;        }     =20=
  blockquote > :last-child {            margin-bottom: 0;       =20=
}        img {            border: 0;            max-width: 100%;=20=
           height: auto !important;            margin: 2px 0;   =20=
    }        table {            border-collapse: collapse;      =20=
     border: 1px solid #bbbbbb;        }        td {            p=
adding:4px 8px;            border-collapse: collapse;           =20=
border: 1px solid #bbbbbb;        }        @media screen and (max=
-width: 660px) {            body {                padding: 20px 1=
8px;                padding: 1.33rem 1.2rem;            }       =20=
}        @media only screen and (-webkit-max-device-width: 1024px=
), only screen and (-o-max-device-width: 1024px), only screen and=
 (max-device-width: 1024px), only screen and (-webkit-min-device-=
pixel-ratio: 3), only screen and (-o-min-device-pixel-ratio: 3),=20=
only screen and (min-device-pixel-ratio: 3) {            html, bo=
dy {                font-size: 17px;            }            body=
 {                line-height: 1.7;                padding: 0.75r=
em 0.9375rem;                color: #353c47;            }       =20=
    h1 {                font-size: 2.125rem;            }       =20=
    h2 {                font-size: 1.875rem;            }       =20=
    h3 {                font-size: 1.625rem;            }       =20=
    h4 {                font-size: 1.375rem;            }       =20=
    h5 {                font-size: 1.125rem;            }       =20=
    h6 {                color: inherit;            }            u=
l, ol {                padding-left: 2.5rem;            }       =20=
    blockquote {                border-left: 4px solid #c8d4e8; =20=
              padding: 0 0.9375rem;                color: #b3c2dd=
;            }        }</style></head>=0A=0A<body style><h1 class=
=3D"news-item" style=3D"margin:20px 0px 10px; font-size:36px; fon=
t-family:'Helvetica Neue',Helvetica,=CE=A2=C8=ED=D1=C5=BA=DA,'Mic=
rosoft Yahei',sans-serif; font-weight:500; line-height:1.1; borde=
r-bottom-width:1px; border-bottom-style:dashed; padding-bottom:10=
px; letter-spacing:0.200000002980232px">HDFS=C5=E4=D6=C3Kerberos=C8=
=CF=D6=A4</h1>=0A2014.11.04<span style=3D"font-family: 'Helvetica=
 Neue', Helvetica, =CE=A2=C8=ED=D1=C5=BA=DA, 'Microsoft Yahei', s=
ans-serif; letter-spacing: 0.200000002980232px; line-height: 22.3=
999996185303px;"></span><div style=3D"font-family: 'Helvetica Neu=
e', Helvetica, =CE=A2=C8=ED=D1=C5=BA=DA, 'Microsoft Yahei', sans-=
serif; letter-spacing: 0.200000002980232px; line-height: 22.39999=
96185303px;"><p style=3D"margin-top:0px; margin-bottom:10px">=B1=BE=
=CE=C4=D6=F7=D2=AA=BC=C7=C2=BC CDH Hadoop =BC=AF=C8=BA=C9=CF=C5=E4=
=D6=C3 HDFS =BC=AF=B3=C9 Kerberos =B5=C4=B9=FD=B3=CC=A3=AC=B0=FC=C0=
=A8 Kerberos =B5=C4=B0=B2=D7=B0=BA=CD Hadoop =CF=E0=B9=D8=C5=E4=D6=
=C3=D0=DE=B8=C4=CB=B5=C3=F7=A1=A3</p><blockquote style=3D"padding=
: 10px 20px; margin-right: 0px; margin-bottom: 20px; margin-left:=
 0px; font-size: 15.5px; border-left-width: 5px; border-left-styl=
e: solid; text-align: justify;"><p style=3D"margin-top:0px; margi=
n-bottom:0px; padding-top:0.5em; padding-bottom:0.5em">=0A=D7=A2=D2=
=E2=A3=BA</p><p style=3D"margin-top:0px; margin-bottom:0px; paddi=
ng-top:0.5em; padding-bottom:0.5em">=0A=CF=C2=C3=E6=B5=DA=D2=BB=A1=
=A2=B6=FE=B2=BF=B7=D6=C4=DA=C8=DD=A3=AC=D5=AA=B3=AD=D7=D4=A1=B6<a=
 target=3D"_blank" href=3D"https://github.com/zouhc/MyHadoop/blob=
/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9=
%83%A8%E7%BD%B2.md" style=3D"text-decoration: none;">Hadoop=B5=C4=
kerberos=B5=C4=CA=B5=BC=F9=B2=BF=CA=F0</a>=A1=B7=A3=AC=D6=F7=D2=AA=
=CA=C7=CE=AA=C1=CB=B6=D4=0A Hadoop =B5=C4=C8=CF=D6=A4=BB=FA=D6=C6=
=BA=CD Kerberos =C8=CF=D6=A4=D0=AD=D2=E9=D7=F6=B8=F6=BC=F2=B5=A5=BD=
=E9=C9=DC=A1=A3=D4=DA=B4=CB=A3=AC=B6=D4=D4=AD=D7=F7=D5=DF=B1=ED=CA=
=BE=B8=D0=D0=BB=A1=A3</p></blockquote><h1 id=3D"1.-hadoop-=B5=C4=C8=
=CF=D6=A4=BB=FA=D6=C6" style=3D"margin:20px 0px 10px; font-size:3=
6px; font-family:inherit; font-weight:500; line-height:1.1"><a na=
me=3D"t1"></a>=0A1. Hadoop =B5=C4=C8=CF=D6=A4=BB=FA=D6=C6</h1><p=20=
style=3D"margin-top:0px; margin-bottom:10px">=BC=F2=B5=A5=C0=B4=CB=
=B5=A3=AC=C3=BB=D3=D0=D7=F6 kerberos =C8=CF=D6=A4=B5=C4 Hadoop=A3=
=AC=D6=BB=D2=AA=D3=D0 client =B6=CB=BE=CD=C4=DC=B9=BB=C1=AC=BD=D3=
=C9=CF=A1=A3=B6=F8=C7=D2=A3=AC=CD=A8=B9=FD=D2=BB=B8=F6=D3=D0 root=
 =B5=C4=C8=A8=CF=DE=B5=C4=C4=DA=CD=F8=BB=FA=C6=F7=A3=AC=CD=A8=B9=FD=
=B4=B4=BD=A8=B6=D4=D3=A6=B5=C4 linux =D3=C3=BB=A7=A3=AC=BE=CD=C4=DC=
=B9=BB=B5=C3=B5=BD Hadoop =BC=AF=C8=BA=C9=CF=B6=D4=D3=A6=B5=C4=C8=
=A8=CF=DE=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px=
">=B6=F8=CA=B5=D0=D0 Kerberos =BA=F3=A3=AC=C8=CE=D2=E2=BB=FA=C6=F7=
=B5=C4=C8=CE=D2=E2=D3=C3=BB=A7=B6=BC=B1=D8=D0=EB=CF=D6=D4=DA Kerb=
eros =B5=C4 KDC =D6=D0=D3=D0=BC=C7=C2=BC=A3=AC=B2=C5=D4=CA=D0=ED=BA=
=CD=BC=AF=C8=BA=D6=D0=C6=E4=CB=FC=B5=C4=C4=A3=BF=E9=BD=F8=D0=D0=CD=
=A8=D0=C5=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px=
">=CF=EA=CF=B8=BD=E9=C9=DC=C7=EB=B2=CE=BF=BC&nbsp;<a target=3D"_b=
lank" href=3D"http://dongxicheng.org/mapreduce/hadoop-security/"=20=
style=3D"text-decoration: none;">Hadoop=B0=B2=C8=AB=BB=FA=D6=C6=D1=
=D0=BE=BF</a></p><h1 id=3D"2.-kerberos-=C8=CF=D6=A4=D0=AD=D2=E9"=20=
style=3D"margin:20px 0px 10px; font-size:36px; font-family:inheri=
t; font-weight:500; line-height:1.1"><a name=3D"t2"></a>=0A2. Ker=
beros =C8=CF=D6=A4=D0=AD=D2=E9</h1><p style=3D"margin-top:0px; ma=
rgin-bottom:10px">Kerberos =CA=C7=D2=BB=D6=D6=CD=F8=C2=E7=C8=CF=D6=
=A4=D0=AD=D2=E9=A3=AC=C6=E4=C9=E8=BC=C6=C4=BF=B1=EA=CA=C7=CD=A8=B9=
=FD=C3=DC=D4=BF=CF=B5=CD=B3=CE=AA=BF=CD=BB=A7=BB=FA/=B7=FE=CE=F1=C6=
=F7=D3=A6=D3=C3=B3=CC=D0=F2=CC=E1=B9=A9=C7=BF=B4=F3=B5=C4=C8=CF=D6=
=A4=B7=FE=CE=F1=A1=A3</p><p style=3D"margin-top:0px; margin-botto=
m:10px">=CA=B9=D3=C3 Kerberos =CA=B1=A3=AC=D2=BB=B8=F6=BF=CD=BB=A7=
=B6=CB=D0=E8=D2=AA=BE=AD=B9=FD=C8=FD=B8=F6=B2=BD=D6=E8=C0=B4=BB=F1=
=C8=A1=B7=FE=CE=F1:</p><ul style=3D"margin-top:0px; margin-bottom=
:10px"><li style=3D"margin:3px 0px"><span style=3D"font-weight:70=
0">=C8=CF=D6=A4</span>=A3=BA=BF=CD=BB=A7=B6=CB=CF=F2=C8=CF=D6=A4=B7=
=FE=CE=F1=C6=F7=B7=A2=CB=CD=D2=BB=CC=F5=B1=A8=CE=C4=A3=AC=B2=A2=BB=
=F1=C8=A1=D2=BB=B8=F6=BA=AC=CA=B1=BC=E4=B4=C1=B5=C4 Ticket-Granti=
ng Ticket=A3=A8TGT=A3=A9=A1=A3</li><li style=3D"margin:3px 0px"><=
span style=3D"font-weight:700">=CA=DA=C8=A8</span>=A3=BA=BF=CD=BB=
=A7=B6=CB=CA=B9=D3=C3 TGT =CF=F2 Ticket-Granting Server=A3=A8TGS=A3=
=A9=C7=EB=C7=F3=D2=BB=B8=F6=B7=FE=CE=F1 Ticket=A1=A3</li><li styl=
e=3D"margin:3px 0px"><span style=3D"font-weight:700">=B7=FE=CE=F1=
=C7=EB=C7=F3</span>=A3=BA=BF=CD=BB=A7=B6=CB=CF=F2=B7=FE=CE=F1=C6=F7=
=B3=F6=CA=BE=B7=FE=CE=F1 Ticket =A3=AC=D2=D4=D6=A4=CA=B5=D7=D4=BC=
=BA=B5=C4=BA=CF=B7=A8=D0=D4=A1=A3</li></ul><p style=3D"margin-top=
:0px; margin-bottom:10px">=CE=AA=B4=CB=A3=ACKerberos =D0=E8=D2=AA=
 The Key =0ADistribution Centers=A3=A8KDC=A3=A9=C0=B4=BD=F8=D0=D0=
=C8=CF=D6=A4=A1=A3KDC =D6=BB=D3=D0=D2=BB=B8=F6 Master=A3=AC=BF=C9=
=D2=D4=B4=F8=B6=E0=B8=F6 slaves =BB=FA=C6=F7=A1=A3slaves =0A=BB=FA=
=C6=F7=BD=F6=BD=F8=D0=D0=C6=D5=CD=A8=D1=E9=D6=A4=A1=A3Mater =C9=CF=
=D7=F6=B5=C4=D0=DE=B8=C4=D0=E8=D2=AA=D7=D4=B6=AF=CD=AC=B2=BD=B5=BD=
 slaves=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px">=
=C1=ED=CD=E2=A3=ACKDC =D0=E8=D2=AA=D2=BB=B8=F6 admin=A3=AC=C0=B4=BD=
=F8=D0=D0=C8=D5=B3=A3=B5=C4=B9=DC=C0=ED=B2=D9=D7=F7=A1=A3=D5=E2=B8=
=F6 admin =BF=C9=D2=D4=CD=A8=B9=FD=D4=B6=B3=CC=BB=F2=D5=DF=B1=BE=B5=
=D8=B7=BD=CA=BD=B5=C7=C2=BC=A1=A3</p><h1 id=3D"3.-=B4=EE=BD=A8-ke=
rberos" style=3D"margin:20px 0px 10px; font-size:36px; font-famil=
y:inherit; font-weight:500; line-height:1.1"><a name=3D"t3"></a>=0A=
3. =B4=EE=BD=A8 Kerberos</h1><h2 id=3D"3.1-=BB=B7=BE=B3" style=3D=
"font-family:inherit; font-weight:500; line-height:1.1; margin-to=
p:20px; margin-bottom:10px; font-size:30px"><a name=3D"t4"></a>=0A=
3.1 =BB=B7=BE=B3</h2><p style=3D"margin-top:0px; margin-bottom:10=
px">=CE=D2=C3=C7=D4=DA=C8=FD=B8=F6=BD=DA=B5=E3=B5=C4=B7=FE=CE=F1=C6=
=F7=C9=CF=B0=B2=D7=B0 Kerberos=A3=AC=D5=E2=C8=FD=B8=F6=BD=DA=B5=E3=
=C9=CF=B0=B2=D7=B0=C1=CB hadoop =BC=AF=C8=BA=A3=AC=B0=B2=D7=B0 ha=
doop =B9=FD=B3=CC=BC=FB=A3=BA<a target=3D"_blank" href=3D"http://=
blog.javachen.com/2013/04/06/install-cloudera-cdh-by-yum/" style=3D=
"text-decoration: none;">=CA=B9=D3=C3yum=B0=B2=D7=B0CDH=0A Hadoop=
=BC=AF=C8=BA</a>=A1=A3=D5=E2=C8=FD=B8=F6=BD=DA=B5=E3=BB=FA=C6=F7=B7=
=D6=B2=BC=CE=AA=A3=BAcdh1=A1=A2cdh2=A1=A2cdh3=A1=A3</p><ul style=3D=
"margin-top:0px; margin-bottom:10px"><li style=3D"margin:3px 0px"=
><span style=3D"font-weight:700">=B2=D9=D7=F7=CF=B5=CD=B3</span>=A3=
=BACentOs 6.6</li><li style=3D"margin:3px 0px"><span style=3D"fon=
t-weight:700">=D4=CB=D0=D0=D3=C3=BB=A7</span>=A3=BAroot</li></ul>=
<h2 id=3D"3.2-=B0=B2=D7=B0=B9=FD=B3=CC" style=3D"font-family:inhe=
rit; font-weight:500; line-height:1.1; margin-top:20px; margin-bo=
ttom:10px; font-size:30px"><a name=3D"t5"></a>=0A3.2 =B0=B2=D7=B0=
=B9=FD=B3=CC</h2><h3 id=3D"3.2.1-=D7=BC=B1=B8=B9=A4=D7=F7" style=3D=
"font-family:inherit; font-weight:500; line-height:1.1; margin-to=
p:20px; margin-bottom:10px; font-size:24px"><a name=3D"t6"></a>=0A=
3.2.1 =D7=BC=B1=B8=B9=A4=D7=F7</h3><p style=3D"margin-top:0px; ma=
rgin-bottom:10px">=C8=B7=C8=CF=CC=ED=BC=D3=D6=F7=BB=FA=C3=FB=BD=E2=
=CE=F6=B5=BD&nbsp;<code class=3D"prettyprint" style=3D"font-famil=
y:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px;=20=
padding:2px 4px; color:rgb(199,37,78); background-color:rgb(254,2=
51,243)">/etc/hosts</code>&nbsp;=CE=C4=BC=FE=D6=D0=A1=A3</p><div=20=
class=3D"highlight"><pre style=3D"overflow:auto; font-family:Menl=
o,Monaco,Consolas,'Courier New',monospace; font-size:13px; paddin=
g:9.5px; margin:10px auto; line-height:1.42857143; color:rgb(51,5=
1,51); word-break:break-all; word-wrap:break-word; max-width:98%;=
 background-color:rgb(254,251,243)"><code class=3D"language-bash"=
 style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier New',=
Monaco,monospace; font-size:undefined; padding:0px; color:inherit=
; white-space:pre-wrap; background-color:transparent"><span class=
=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>cat /etc/hosts=0A=
127.0.0.1       localhost=0A=0A192.168.56.121 cdh1=0A192.168.56.1=
22 cdh2=0A192.168.56.123 cdh3=0A</code></pre></div><blockquote st=
yle=3D"padding: 10px 20px; margin-right: 0px; margin-bottom: 20px=
; margin-left: 0px; font-size: 15.5px; border-left-width: 5px; bo=
rder-left-style: solid; text-align: justify;"><p style=3D"margin-=
top:0px; margin-bottom:0px; padding-top:0.5em; padding-bottom:0.5=
em">=0A=D7=A2=D2=E2=A3=BAhostname =C7=EB=CA=B9=D3=C3=D0=A1=D0=B4=A3=
=AC=D2=AA=B2=BB=C8=BB=D4=DA=BC=AF=B3=C9 kerberos =CA=B1=BB=E1=B3=F6=
=CF=D6=D2=BB=D0=A9=B4=ED=CE=F3=A1=A3</p></blockquote><h3 id=3D"3.=
2.2-=B0=B2=D7=B0-kdc-server" style=3D"font-family:inherit; font-w=
eight:500; line-height:1.1; margin-top:20px; margin-bottom:10px;=20=
font-size:24px"><a name=3D"t7"></a>=0A3.2.2 =B0=B2=D7=B0 kdc serv=
er</h3><p style=3D"margin-top:0px; margin-bottom:10px">=D4=DA KDC=
 (=D5=E2=C0=EF=CA=C7 cdh1 ) =C9=CF=B0=B2=D7=B0=B0=FC krb5=A1=A2kr=
b5-server =BA=CD krb5-client=A1=A3</p><div class=3D"highlight"><p=
re style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Cou=
rier New',monospace; font-size:13px; padding:9.5px; margin:10px a=
uto; line-height:1.42857143; color:rgb(51,51,51); word-break:brea=
k-all; word-wrap:break-word; max-width:98%; background-color:rgb(=
254,251,243)"><code class=3D"language-bash" style=3D"font-family:=
Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; font=
-size:undefined; padding:0px; color:inherit; white-space:pre-wrap=
; background-color:transparent"><span class=3D"nv" style=3D"color=
:rgb(25,23,124)">$ </span>yum install krb5-server krb5-libs krb5-=
auth-dialog krb5-workstation  -y=0A</code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=D4=DA=C6=E4=CB=FB=BD=DA=B5=E3=
=A3=A8cdh1=A1=A2cdh2=A1=A2cdh3=A3=A9=B0=B2=D7=B0 krb5-devel=A1=A2=
krb5-workstation =A3=BA</p><div class=3D"highlight"><pre style=3D=
"overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',m=
onospace; font-size:13px; padding:9.5px; margin:10px auto; line-h=
eight:1.42857143; color:rgb(51,51,51); word-break:break-all; word=
-wrap:break-word; max-width:98%; background-color:rgb(254,251,243=
)"><code class=3D"language-bash" style=3D"font-family:Menlo,'Anda=
le Mono',Consolas,'Courier New',Monaco,monospace; font-size:undef=
ined; padding:0px; color:inherit; white-space:pre-wrap; backgroun=
d-color:transparent"><span class=3D"nv" style=3D"color:rgb(25,23,=
124)">$ </span>ssh cdh1 <span class=3D"s2" style=3D"color:rgb(186=
,33,33)">"yum install krb5-devel krb5-workstation -y"</span><span=
 class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>ssh cdh2 <s=
pan class=3D"s2" style=3D"color:rgb(186,33,33)">"yum install krb5=
-devel krb5-workstation -y"</span><span class=3D"nv" style=3D"col=
or:rgb(25,23,124)">$ </span>ssh cdh3 <span class=3D"s2" style=3D"=
color:rgb(186,33,33)">"yum install krb5-devel krb5-workstation -y=
"</span></code></pre></div><h3 id=3D"3.2.3-=D0=DE=B8=C4=C5=E4=D6=C3=
=CE=C4=BC=FE" style=3D"font-family:inherit; font-weight:500; line=
-height:1.1; margin-top:20px; margin-bottom:10px; font-size:24px"=
><a name=3D"t8"></a>=0A3.2.3 =D0=DE=B8=C4=C5=E4=D6=C3=CE=C4=BC=FE=
</h3><p style=3D"margin-top:0px; margin-bottom:10px">kdc =B7=FE=CE=
=F1=C6=F7=C9=E6=BC=B0=B5=BD=C8=FD=B8=F6=C5=E4=D6=C3=CE=C4=BC=FE=A3=
=BA</p><div class=3D"highlight"><pre style=3D"overflow:auto; font=
-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:=
13px; padding:9.5px; margin:10px auto; line-height:1.42857143; co=
lor:rgb(51,51,51); word-break:break-all; word-wrap:break-word; ma=
x-width:98%; background-color:rgb(254,251,243)"><code class=3D"la=
nguage-text" style=3D"font-family:Menlo,'Andale Mono',Consolas,'C=
ourier New',Monaco,monospace; font-size:undefined; padding:0px; c=
olor:inherit; white-space:pre-wrap; background-color:transparent"=
>/etc/krb5.conf=0A/var/kerberos/krb5kdc/kdc.conf=0A/var/kerberos/=
krb5kdc/kadm5.acl=0A</code></pre></div><p style=3D"margin-top:0px=
; margin-bottom:10px">=C5=E4=D6=C3 Kerberos =B5=C4=D2=BB=D6=D6=B7=
=BD=B7=A8=CA=C7=B1=E0=BC=AD=C5=E4=D6=C3=CE=C4=BC=FE /etc/krb5.con=
f=A1=A3=C4=AC=C8=CF=B0=B2=D7=B0=B5=C4=CE=C4=BC=FE=D6=D0=B0=FC=BA=AC=
=B6=E0=B8=F6=CA=BE=C0=FD=CF=EE=A1=A3</p><div class=3D"highlight">=
<pre style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'C=
ourier New',monospace; font-size:13px; padding:9.5px; margin:10px=
 auto; line-height:1.42857143; color:rgb(51,51,51); word-break:br=
eak-all; word-wrap:break-word; max-width:98%; background-color:rg=
b(254,251,243)"><code class=3D"language-text" style=3D"font-famil=
y:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; fo=
nt-size:undefined; padding:0px; color:inherit; white-space:pre-wr=
ap; background-color:transparent">$ cat /etc/krb5.conf=0A  [loggi=
ng]=0A   default =3D FILE:/var/log/krb5libs.log=0A   kdc =3D FILE=
:/var/log/krb5kdc.log=0A   admin_server =3D FILE:/var/log/kadmind=
.log=0A=0A  [libdefaults]=0A   default_realm =3D JAVACHEN.COM=0A=20=
  dns_lookup_realm =3D false=0A   dns_lookup_kdc =3D false=0A   c=
lockskew =3D 120=0A   ticket_lifetime =3D 24h=0A   renew_lifetime=
 =3D 7d=0A   forwardable =3D true=0A   renewable =3D true=0A   ud=
p_preference_limit =3D 1=0A   default_tgs_enctypes =3D arcfour-hm=
ac=0A   default_tkt_enctypes =3D arcfour-hmac=0A=0A  [realms]=0A=20=
  JAVACHEN.COM =3D {=0A    kdc =3D cdh1:88=0A    admin_server =3D=
 cdh1:749=0A   }=0A=0A  [domain_realm]=0A    .javachen.com =3D JA=
VACHEN.COM=0A    www.javachen.com =3D JAVACHEN.COM=0A=0A  [kdc]=0A=
  profile=3D/var/kerberos/krb5kdc/kdc.conf=0A</code></pre></div><=
h3 id=3D"=CB=B5=C3=F7=A3=BA" style=3D"font-family:inherit; font-w=
eight:500; line-height:1.1; margin-top:20px; margin-bottom:10px;=20=
font-size:24px"><a name=3D"t9"></a>=0A=CB=B5=C3=F7=A3=BA</h3><ul=20=
style=3D"margin-top:0px; margin-bottom:10px"><li style=3D"margin:=
3px 0px"><code class=3D"prettyprint" style=3D"font-family:Menlo,M=
onaco,Consolas,'Courier New',monospace; font-size:13px; padding:2=
px 4px; color:rgb(199,37,78); background-color:rgb(254,251,243)">=
[logging]</code>=A3=BA=B1=ED=CA=BE server =B6=CB=B5=C4=C8=D5=D6=BE=
=B5=C4=B4=F2=D3=A1=CE=BB=D6=C3</li><li style=3D"margin:3px 0px"><=
code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Cons=
olas,'Courier New',monospace; font-size:13px; padding:2px 4px; co=
lor:rgb(199,37,78); background-color:rgb(254,251,243)">[libdefaul=
ts]</code>=A3=BA=C3=BF=D6=D6=C1=AC=BD=D3=B5=C4=C4=AC=C8=CF=C5=E4=D6=
=C3=A3=AC=D0=E8=D2=AA=D7=A2=D2=E2=D2=D4=CF=C2=BC=B8=B8=F6=B9=D8=BC=
=FC=B5=C4=D0=A1=C5=E4=D6=C3=0A<ul style=3D"margin-top:0px; margin=
-bottom:10px"><li style=3D"margin:3px 0px"><code class=3D"prettyp=
rint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier New',mo=
nospace; font-size:13px; padding:2px 4px; color:rgb(199,37,78); b=
ackground-color:rgb(254,251,243)">default_realm =3D JAVACHEN.COM<=
/code>=A3=BA=C9=E8=D6=C3 Kerberos=0A =D3=A6=D3=C3=B3=CC=D0=F2=B5=C4=
=C4=AC=C8=CF=C1=EC=D3=F2=A1=A3=C8=E7=B9=FB=C4=FA=D3=D0=B6=E0=B8=F6=
=C1=EC=D3=F2=A3=AC=D6=BB=D0=E8=CF=F2 [realms] =BD=DA=CC=ED=BC=D3=C6=
=E4=CB=FB=B5=C4=D3=EF=BE=E4=A1=A3</li><li style=3D"margin:3px 0px=
"><code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,C=
onsolas,'Courier New',monospace; font-size:13px; padding:2px 4px;=
 color:rgb(199,37,78); background-color:rgb(254,251,243)">udp_pre=
ference_limit=3D 1</code>=A3=BA=BD=FB=D6=B9=CA=B9=D3=C3 udp =BF=C9=
=D2=D4=B7=C0=D6=B9=D2=BB=B8=F6Hadoop=D6=D0=B5=C4=B4=ED=CE=F3</li>=
<li style=3D"margin:3px 0px"><code class=3D"prettyprint" style=3D=
"font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-=
size:13px; padding:2px 4px; color:rgb(199,37,78); background-colo=
r:rgb(254,251,243)">clockskew</code>=A3=BA=CA=B1=D6=D3=C6=AB=B2=EE=
=CA=C7=B2=BB=CD=EA=C8=AB=B7=FB=BA=CF=D6=F7=BB=FA=CF=B5=CD=B3=CA=B1=
=D6=D3=B5=C4=C6=B1=BE=DD=CA=B1=B4=C1=B5=C4=C8=DD=B2=EE=A3=AC=B3=AC=
=B9=FD=B4=CB=C8=DD=B2=EE=BD=AB=B2=BB=BD=D3=CA=DC=B4=CB=C6=B1=BE=DD=
=A1=A3=CD=A8=B3=A3=A3=AC=BD=AB=CA=B1=D6=D3=C5=A4=D0=B1=C9=E8=D6=C3=
=CE=AA=0A 300 =C3=EB=A3=A85 =B7=D6=D6=D3=A3=A9=A1=A3=D5=E2=D2=E2=CE=
=B6=D7=C5=B4=D3=B7=FE=CE=F1=C6=F7=B5=C4=BD=C7=B6=C8=BF=B4=A3=AC=C6=
=B1=D6=A4=B5=C4=CA=B1=BC=E4=B4=C1=D3=EB=CB=FC=B5=C4=C6=AB=B2=EE=BF=
=C9=D2=D4=CA=C7=D4=DA=C7=B0=BA=F3 5 =B7=D6=D6=D3=C4=DA=A1=A3</li>=
<li style=3D"margin:3px 0px"><code class=3D"prettyprint" style=3D=
"font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-=
size:13px; padding:2px 4px; color:rgb(199,37,78); background-colo=
r:rgb(254,251,243)">ticket_lifetime</code>=A3=BA =B1=ED=C3=F7=C6=BE=
=D6=A4=C9=FA=D0=A7=B5=C4=CA=B1=CF=DE=A3=AC=D2=BB=B0=E3=CE=AA24=D0=
=A1=CA=B1=A1=A3</li><li style=3D"margin:3px 0px"><code class=3D"p=
rettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier N=
ew',monospace; font-size:13px; padding:2px 4px; color:rgb(199,37,=
78); background-color:rgb(254,251,243)">renew_lifetime</code>=A3=BA=
 =B1=ED=C3=F7=C6=BE=D6=A4=D7=EE=B3=A4=BF=C9=D2=D4=B1=BB=D1=D3=C6=DA=
=B5=C4=CA=B1=CF=DE=A3=AC=D2=BB=B0=E3=CE=AA=D2=BB=B8=F6=C0=F1=B0=DD=
=A1=A3=B5=B1=C6=BE=D6=A4=B9=FD=C6=DA=D6=AE=BA=F3=A3=AC=B6=D4=B0=B2=
=C8=AB=C8=CF=D6=A4=B5=C4=B7=FE=CE=F1=B5=C4=BA=F3=D0=F8=B7=C3=CE=CA=
=D4=F2=BB=E1=CA=A7=B0=DC=A1=A3</li></ul></li><li style=3D"margin:=
3px 0px"><code class=3D"prettyprint" style=3D"font-family:Menlo,M=
onaco,Consolas,'Courier New',monospace; font-size:13px; padding:2=
px 4px; color:rgb(199,37,78); background-color:rgb(254,251,243)">=
[realms]</code>=A3=BA=C1=D0=BE=D9=CA=B9=D3=C3=B5=C4 realm=A1=A3=0A=
<ul style=3D"margin-top:0px; margin-bottom:10px"><li style=3D"mar=
gin:3px 0px"><code class=3D"prettyprint" style=3D"font-family:Men=
lo,Monaco,Consolas,'Courier New',monospace; font-size:13px; paddi=
ng:2px 4px; color:rgb(199,37,78); background-color:rgb(254,251,24=
3)">kdc</code>=A3=BA=B4=FA=B1=ED=D2=AA kdc =B5=C4=CE=BB=D6=C3=A1=A3=
=B8=F1=CA=BD=CA=C7&nbsp;<code class=3D"prettyprint" style=3D"font=
-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:=
13px; padding:2px 4px; color:rgb(199,37,78); background-color:rgb=
(254,251,243)">=BB=FA=C6=F7:=B6=CB=BF=DA</code></li><li style=3D"=
margin:3px 0px"><code class=3D"prettyprint" style=3D"font-family:=
Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; pa=
dding:2px 4px; color:rgb(199,37,78); background-color:rgb(254,251=
,243)">admin_server</code>=A3=BA=B4=FA=B1=ED admin =B5=C4=CE=BB=D6=
=C3=A1=A3=B8=F1=CA=BD=CA=C7&nbsp;<code class=3D"prettyprint" styl=
e=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospace; f=
ont-size:13px; padding:2px 4px; color:rgb(199,37,78); background-=
color:rgb(254,251,243)">=BB=FA=C6=F7:=B6=CB=BF=DA</code></li><li=20=
style=3D"margin:3px 0px"><code class=3D"prettyprint" style=3D"fon=
t-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size=
:13px; padding:2px 4px; color:rgb(199,37,78); background-color:rg=
b(254,251,243)">default_domain</code>=A3=BA=B4=FA=B1=ED=C4=AC=C8=CF=
=B5=C4=D3=F2=C3=FB</li></ul></li><li style=3D"margin:3px 0px"><co=
de class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Consol=
as,'Courier New',monospace; font-size:13px; padding:2px 4px; colo=
r:rgb(199,37,78); background-color:rgb(254,251,243)">[appdefaults=
]</code>=A3=BA=BF=C9=D2=D4=C9=E8=B6=A8=D2=BB=D0=A9=D5=EB=B6=D4=CC=
=D8=B6=A8=D3=A6=D3=C3=B5=C4=C5=E4=D6=C3=A3=AC=B8=B2=B8=C7=C4=AC=C8=
=CF=C5=E4=D6=C3=A1=A3</li></ul><p style=3D"margin-top:0px; margin=
-bottom:10px">=D0=DE=B8=C4&nbsp;<code class=3D"prettyprint" style=
=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospace; fo=
nt-size:13px; padding:2px 4px; color:rgb(199,37,78); background-c=
olor:rgb(254,251,243)">/var/kerberos/krb5kdc/kdc.conf</code>&nbsp=
;=A3=AC=B8=C3=CE=C4=BC=FE=B0=FC=BA=AC=0A Kerberos =B5=C4=C5=E4=D6=
=C3=D0=C5=CF=A2=A1=A3=C0=FD=C8=E7=A3=ACKDC =B5=C4=CE=BB=D6=C3=A3=AC=
Kerbero =B5=C4 admin =B5=C4realms =B5=C8=A1=A3=D0=E8=D2=AA=CB=F9=D3=
=D0=CA=B9=D3=C3=B5=C4 Kerberos =B5=C4=BB=FA=C6=F7=C9=CF=B5=C4=C5=E4=
=D6=C3=CE=C4=BC=FE=B6=BC=CD=AC=B2=BD=A1=A3=D5=E2=C0=EF=BD=F6=C1=D0=
=BE=D9=D0=E8=D2=AA=B5=C4=BB=F9=B1=BE=C5=E4=D6=C3=A1=A3=CF=EA=CF=B8=
=BD=E9=C9=DC=B2=CE=BF=BC=A3=BA<a target=3D"_blank" href=3D"http:/=
/web.mit.edu/~kerberos/krb5-devel/doc/admin/conf_files/krb5_conf.=
html" style=3D"text-decoration: none;">krb5conf</a></p><div class=
=3D"highlight"><pre style=3D"overflow:auto; font-family:Menlo,Mon=
aco,Consolas,'Courier New',monospace; font-size:13px; padding:9.5=
px; margin:10px auto; line-height:1.42857143; color:rgb(51,51,51)=
; word-break:break-all; word-wrap:break-word; max-width:98%; back=
ground-color:rgb(254,251,243)"><code class=3D"language-bash" styl=
e=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier New',Monac=
o,monospace; font-size:undefined; padding:0px; color:inherit; whi=
te-space:pre-wrap; background-color:transparent"><span class=3D"n=
v" style=3D"color:rgb(25,23,124)">$ </span>cat /var/kerberos/krb5=
kdc/kdc.conf=0A<span class=3D"o" style=3D"color:rgb(102,102,102)"=
>[</span>kdcdefaults<span class=3D"o" style=3D"color:rgb(102,102,=
102)">]</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">v=
4_mode</span> <span class=3D"o" style=3D"color:rgb(102,102,102)">=
=3D</span> nopreauth=0A <span class=3D"nv" style=3D"color:rgb(25,=
23,124)">kdc_ports</span> <span class=3D"o" style=3D"color:rgb(10=
2,102,102)">=3D</span> 88=0A <span class=3D"nv" style=3D"color:rg=
b(25,23,124)">kdc_tcp_ports</span> <span class=3D"o" style=3D"col=
or:rgb(102,102,102)">=3D</span> 88=0A=0A<span class=3D"o" style=3D=
"color:rgb(102,102,102)">[</span>realms<span class=3D"o" style=3D=
"color:rgb(102,102,102)">]</span>=0A JAVACHEN.COM <span class=3D"=
o" style=3D"color:rgb(102,102,102)">=3D</span> <span class=3D"o"=20=
style=3D"color:rgb(102,102,102)">{</span><span class=3D"c" style=3D=
"color:rgb(64,128,128); font-style:italic">#master_key_type =3D a=
es256-cts</span><span class=3D"nv" style=3D"color:rgb(25,23,124)"=
>acl_file</span> <span class=3D"o" style=3D"color:rgb(102,102,102=
)">=3D</span> /var/kerberos/krb5kdc/kadm5.acl=0A  <span class=3D"=
nv" style=3D"color:rgb(25,23,124)">dict_file</span> <span class=3D=
"o" style=3D"color:rgb(102,102,102)">=3D</span> /usr/share/dict/w=
ords=0A  <span class=3D"nv" style=3D"color:rgb(25,23,124)">admin_=
keytab</span> <span class=3D"o" style=3D"color:rgb(102,102,102)">=
=3D</span> /var/kerberos/krb5kdc/kadm5.keytab=0A  <span class=3D"=
nv" style=3D"color:rgb(25,23,124)">supported_enctypes</span> <spa=
n class=3D"o" style=3D"color:rgb(102,102,102)">=3D</span>  des3-h=
mac-sha1:normal arcfour-hmac:normal des-hmac-sha1:normal des-cbc-=
md5:normal des-cbc-crc:normal des-cbc-crc:v4 des-cbc-crc:afs3=0A=20=
 <span class=3D"nv" style=3D"color:rgb(25,23,124)">max_life</span=
> <span class=3D"o" style=3D"color:rgb(102,102,102)">=3D</span> 2=
4h=0A  <span class=3D"nv" style=3D"color:rgb(25,23,124)">max_rene=
wable_life</span> <span class=3D"o" style=3D"color:rgb(102,102,10=
2)">=3D</span> 10d=0A  <span class=3D"nv" style=3D"color:rgb(25,2=
3,124)">default_principal_flags</span> <span class=3D"o" style=3D=
"color:rgb(102,102,102)">=3D</span> +renewable, +forwardable=0A <=
span class=3D"o" style=3D"color:rgb(102,102,102)">}</span></code>=
</pre></div><h3 id=3D"=CB=B5=C3=F7=A3=BA" style=3D"font-family:in=
herit; font-weight:500; line-height:1.1; margin-top:20px; margin-=
bottom:10px; font-size:24px"><a name=3D"t10"></a>=0A=CB=B5=C3=F7=A3=
=BA</h3><ul style=3D"margin-top:0px; margin-bottom:10px"><li styl=
e=3D"margin:3px 0px"><code class=3D"prettyprint" style=3D"font-fa=
mily:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13p=
x; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(25=
4,251,243)">JAVACHEN.COM</code>=A3=BA =CA=C7=C9=E8=B6=A8=B5=C4 re=
alms=A1=A3=C3=FB=D7=D6=CB=E6=D2=E2=A1=A3Kerberos =BF=C9=D2=D4=D6=A7=
=B3=D6=B6=E0=B8=F6=0A realms=A3=AC=BB=E1=D4=F6=BC=D3=B8=B4=D4=D3=B6=
=C8=A1=A3=B4=F3=D0=A1=D0=B4=C3=F4=B8=D0=A3=AC=D2=BB=B0=E3=CE=AA=C1=
=CB=CA=B6=B1=F0=CA=B9=D3=C3=C8=AB=B2=BF=B4=F3=D0=B4=A1=A3=D5=E2=B8=
=F6 realms =B8=FA=BB=FA=C6=F7=B5=C4 host =C3=BB=D3=D0=B4=F3=B9=D8=
=CF=B5=A1=A3</li><li style=3D"margin:3px 0px"><code class=3D"pret=
typrint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier New'=
,monospace; font-size:13px; padding:2px 4px; color:rgb(199,37,78)=
; background-color:rgb(254,251,243)">master_key_type</code>=A3=BA=
=BA=CD&nbsp;<code class=3D"prettyprint" style=3D"font-family:Menl=
o,Monaco,Consolas,'Courier New',monospace; font-size:13px; paddin=
g:2px 4px; color:rgb(199,37,78); background-color:rgb(254,251,243=
)">supported_enctypes</code>&nbsp;=C4=AC=C8=CF=CA=B9=D3=C3&nbsp;<=
code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Cons=
olas,'Courier New',monospace; font-size:13px; padding:2px 4px; co=
lor:rgb(199,37,78); background-color:rgb(254,251,243)">aes256-cts=
</code>=A1=A3=D3=C9=D3=DA=A3=ACJAVA=0A =CA=B9=D3=C3&nbsp;<code cl=
ass=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'C=
ourier New',monospace; font-size:13px; padding:2px 4px; color:rgb=
(199,37,78); background-color:rgb(254,251,243)">aes256-cts</code>=
&nbsp;=D1=E9=D6=A4=B7=BD=CA=BD=D0=E8=D2=AA=B0=B2=D7=B0=B6=EE=CD=E2=
=B5=C4 jar =B0=FC=A3=A8=BA=F3=C3=E6=D4=D9=D7=F6=CB=B5=C3=F7=A3=A9=
=A1=A3=CD=C6=BC=F6=B2=BB=CA=B9=D3=C3=A3=AC=B2=A2=C7=D2=C9=BE=B3=FD=
 aes256-cts=A1=A3</li><li style=3D"margin:3px 0px"><code class=3D=
"prettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier=
 New',monospace; font-size:13px; padding:2px 4px; color:rgb(199,3=
7,78); background-color:rgb(254,251,243)">acl_file</code>=A3=BA=B1=
=EA=D7=A2=C1=CB admin =B5=C4=D3=C3=BB=A7=C8=A8=CF=DE=A3=AC=D0=E8=D2=
=AA=D3=C3=BB=A7=D7=D4=BC=BA=B4=B4=BD=A8=A1=A3=CE=C4=BC=FE=B8=F1=CA=
=BD=CA=C7=A3=BA<code class=3D"prettyprint" style=3D"font-family:M=
enlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; pad=
ding:2px 4px; color:rgb(199,37,78); background-color:rgb(254,251,=
243)">Kerberos_principal=0A permissions [target_principal] [restr=
ictions]</code></li><li style=3D"margin:3px 0px"><code class=3D"p=
rettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier N=
ew',monospace; font-size:13px; padding:2px 4px; color:rgb(199,37,=
78); background-color:rgb(254,251,243)">supported_enctypes</code>=
=A3=BA=D6=A7=B3=D6=B5=C4=D0=A3=D1=E9=B7=BD=CA=BD=A1=A3</li><li st=
yle=3D"margin:3px 0px"><code class=3D"prettyprint" style=3D"font-=
family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:1=
3px; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(=
254,251,243)">admin_keytab</code>=A3=BAKDC =BD=F8=D0=D0=D0=A3=D1=E9=
=B5=C4 keytab=A1=A3</li></ul><blockquote style=3D"padding: 10px 2=
0px; margin-right: 0px; margin-bottom: 20px; margin-left: 0px; fo=
nt-size: 15.5px; border-left-width: 5px; border-left-style: solid=
; text-align: justify;"><p style=3D"margin-top:0px; margin-bottom=
:0px; padding-top:0.5em; padding-bottom:0.5em"><span style=3D"fon=
t-weight:700">=B9=D8=D3=DAAES-256=BC=D3=C3=DC</span>=A3=BA</p><p=20=
style=3D"margin-top:0px; margin-bottom:0px; padding-top:0.5em; pa=
dding-bottom:0.5em">=0A=B6=D4=D3=DA=CA=B9=D3=C3 centos5. 6=BC=B0=D2=
=D4=C9=CF=B5=C4=CF=B5=CD=B3=A3=AC=C4=AC=C8=CF=CA=B9=D3=C3 AES-256=
 =C0=B4=BC=D3=C3=DC=B5=C4=A1=A3=D5=E2=BE=CD=D0=E8=D2=AA=BC=AF=C8=BA=
=D6=D0=B5=C4=CB=F9=D3=D0=BD=DA=B5=E3=C9=CF=B0=B2=D7=B0&nbsp;<a ta=
rget=3D"_blank" href=3D"http://www.oracle.com/technetwork/java/ja=
vase/downloads/jce-6-download-429243.html" style=3D"text-decorati=
on: none;">Java Cryptography=0A Extension (JCE) Unlimited Strengt=
h Jurisdiction Policy File</a>=A1=A3</p><p style=3D"margin-top:0p=
x; margin-bottom:0px; padding-top:0.5em; padding-bottom:0.5em">=0A=
=CF=C2=D4=D8=B5=C4=CE=C4=BC=FE=CA=C7=D2=BB=B8=F6 zip =B0=FC=A3=AC=
=BD=E2=BF=AA=BA=F3=A3=AC=BD=AB=C0=EF=C3=E6=B5=C4=C1=BD=B8=F6=CE=C4=
=BC=FE=B7=C5=B5=BD=CF=C2=C3=E6=B5=C4=C4=BF=C2=BC=D6=D0=A3=BA<code=
 class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Consolas=
,'Courier New',monospace; font-size:14px; padding:2px 4px; color:=
rgb(199,37,78); background-color:rgb(254,251,243)">$JAVA_HOME/jre=
/lib/security</code></p></blockquote><p style=3D"margin-top:0px;=20=
margin-bottom:10px">=CE=AA=C1=CB=C4=DC=B9=BB=B2=BB=D6=B1=BD=D3=B7=
=C3=CE=CA KDC =BF=D8=D6=C6=CC=A8=B6=F8=B4=D3 =0AKerberos =CA=FD=BE=
=DD=BF=E2=CC=ED=BC=D3=BA=CD=C9=BE=B3=FD=D6=F7=CC=E5=A3=AC=C7=EB=B6=
=D4 Kerberos =B9=DC=C0=ED=B7=FE=CE=F1=C6=F7=D6=B8=CA=BE=D4=CA=D0=ED=
=C4=C4=D0=A9=D6=F7=CC=E5=D6=B4=D0=D0=C4=C4=D0=A9=B2=D9=D7=F7=A1=A3=
=CD=A8=B9=FD=B1=E0=BC=AD=CE=C4=BC=FE =0A/var/lib/kerberos/krb5kdc=
/kadm5.acl =CD=EA=B3=C9=B4=CB=B2=D9=D7=F7=A1=A3ACL=A3=A8=B7=C3=CE=
=CA=BF=D8=D6=C6=C1=D0=B1=ED=A3=A9=D4=CA=D0=ED=C4=FA=BE=AB=C8=B7=D6=
=B8=B6=A8=CC=D8=C8=A8=A1=A3</p><div class=3D"highlight"><pre styl=
e=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier Ne=
w',monospace; font-size:13px; padding:9.5px; margin:10px auto; li=
ne-height:1.42857143; color:rgb(51,51,51); word-break:break-all;=20=
word-wrap:break-word; max-width:98%; background-color:rgb(254,251=
,243)"><code class=3D"language-bash" style=3D"font-family:Menlo,'=
Andale Mono',Consolas,'Courier New',Monaco,monospace; font-size:u=
ndefined; padding:0px; color:inherit; white-space:pre-wrap; backg=
round-color:transparent"><span class=3D"nv" style=3D"color:rgb(25=
,23,124)">$ </span>cat /var/kerberos/krb5kdc/kadm5.acl=0A  */admi=
n@JAVACHEN.COM *=0A</code></pre></div><h3 id=3D"3.2.4-=CD=AC=B2=BD=
=C5=E4=D6=C3=CE=C4=BC=FE" style=3D"font-family:inherit; font-weig=
ht:500; line-height:1.1; margin-top:20px; margin-bottom:10px; fon=
t-size:24px"><a name=3D"t11"></a>=0A3.2.4 =CD=AC=B2=BD=C5=E4=D6=C3=
=CE=C4=BC=FE</h3><p style=3D"margin-top:0px; margin-bottom:10px">=
=BD=AB kdc =D6=D0=B5=C4&nbsp;<code class=3D"prettyprint" style=3D=
"font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-=
size:13px; padding:2px 4px; color:rgb(199,37,78); background-colo=
r:rgb(254,251,243)">/etc/krb5.conf</code>&nbsp;=BF=BD=B1=B4=B5=BD=
=BC=AF=C8=BA=D6=D0=C6=E4=CB=FB=B7=FE=CE=F1=C6=F7=BC=B4=BF=C9=A1=A3=
</p><div class=3D"highlight"><pre style=3D"overflow:auto; font-fa=
mily:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13p=
x; padding:9.5px; margin:10px auto; line-height:1.42857143; color=
:rgb(51,51,51); word-break:break-all; word-wrap:break-word; max-w=
idth:98%; background-color:rgb(254,251,243)"><code class=3D"langu=
age-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Cour=
ier New',Monaco,monospace; font-size:undefined; padding:0px; colo=
r:inherit; white-space:pre-wrap; background-color:transparent"><s=
pan class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>scp /etc=
/krb5.conf cdh2:/etc/krb5.conf=0A<span class=3D"nv" style=3D"colo=
r:rgb(25,23,124)">$ </span>scp /etc/krb5.conf cdh3:/etc/krb5.conf=
=0A</code></pre></div><p style=3D"margin-top:0px; margin-bottom:1=
0px">=C7=EB=C8=B7=C8=CF=BC=AF=C8=BA=C8=E7=B9=FB=B9=D8=B1=D5=C1=CB=
 selinux=A1=A3</p><h3 id=3D"3.2.5-=B4=B4=BD=A8=CA=FD=BE=DD=BF=E2"=
 style=3D"font-family:inherit; font-weight:500; line-height:1.1;=20=
margin-top:20px; margin-bottom:10px; font-size:24px"><a name=3D"t=
12"></a>=0A3.2.5 =B4=B4=BD=A8=CA=FD=BE=DD=BF=E2</h3><p style=3D"m=
argin-top:0px; margin-bottom:10px">=D4=DA cdh1 =C9=CF=D4=CB=D0=D0=
=B3=F5=CA=BC=BB=AF=CA=FD=BE=DD=BF=E2=C3=FC=C1=EE=A1=A3=C6=E4=D6=D0=
&nbsp;<code class=3D"prettyprint" style=3D"font-family:Menlo,Mona=
co,Consolas,'Courier New',monospace; font-size:13px; padding:2px=20=
4px; color:rgb(199,37,78); background-color:rgb(254,251,243)">-r<=
/code>&nbsp;=D6=B8=B6=A8=B6=D4=D3=A6=0A realm=A1=A3</p><div class=
=3D"highlight"><pre style=3D"overflow:auto; font-family:Menlo,Mon=
aco,Consolas,'Courier New',monospace; font-size:13px; padding:9.5=
px; margin:10px auto; line-height:1.42857143; color:rgb(51,51,51)=
; word-break:break-all; word-wrap:break-word; max-width:98%; back=
ground-color:rgb(254,251,243)"><code class=3D"language-bash" styl=
e=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier New',Monac=
o,monospace; font-size:undefined; padding:0px; color:inherit; whi=
te-space:pre-wrap; background-color:transparent"><span class=3D"n=
v" style=3D"color:rgb(25,23,124)">$ </span>kdb5_util create -r JA=
VACHEN.COM -s=0A</code></pre></div><p style=3D"margin-top:0px; ma=
rgin-bottom:10px">=B3=F6=CF=D6&nbsp;<code class=3D"prettyprint" s=
tyle=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospace=
; font-size:13px; padding:2px 4px; color:rgb(199,37,78); backgrou=
nd-color:rgb(254,251,243)">Loading random data</code>&nbsp;=B5=C4=
=CA=B1=BA=F2=C1=ED=BF=AA=B8=F6=D6=D5=B6=CB=D6=B4=D0=D0=B5=E3=CF=FB=
=BA=C4CPU=B5=C4=C3=FC=C1=EE=C8=E7&nbsp;<code class=3D"prettyprint=
" style=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monosp=
ace; font-size:13px; padding:2px 4px; color:rgb(199,37,78); backg=
round-color:rgb(254,251,243)">cat=0A /dev/sda &gt; /dev/urandom</=
code>&nbsp;=BF=C9=D2=D4=BC=D3=BF=EC=CB=E6=BB=FA=CA=FD=B2=C9=BC=AF=
=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px">=B8=C3=C3=
=FC=C1=EE=BB=E1=D4=DA&nbsp;<code class=3D"prettyprint" style=3D"f=
ont-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-si=
ze:13px; padding:2px 4px; color:rgb(199,37,78); background-color:=
rgb(254,251,243)">/var/kerberos/krb5kdc/</code>&nbsp;=C4=BF=C2=BC=
=CF=C2=B4=B4=BD=A8=0A principal =CA=FD=BE=DD=BF=E2=A1=A3</p><p st=
yle=3D"margin-top:0px; margin-bottom:10px">=C8=E7=B9=FB=D3=F6=B5=BD=
=CA=FD=BE=DD=BF=E2=D2=D1=BE=AD=B4=E6=D4=DA=B5=C4=CC=E1=CA=BE=A3=AC=
=BF=C9=D2=D4=B0=D1&nbsp;<code class=3D"prettyprint" style=3D"font=
-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:=
13px; padding:2px 4px; color:rgb(199,37,78); background-color:rgb=
(254,251,243)">/var/kerberos/krb5kdc/</code>&nbsp;=C4=BF=C2=BC=CF=
=C2=B5=C4=0A principal =B5=C4=CF=E0=B9=D8=CE=C4=BC=FE=B6=BC=C9=BE=
=B3=FD=B5=F4=A1=A3=C4=AC=C8=CF=B5=C4=CA=FD=BE=DD=BF=E2=C3=FB=D7=D6=
=B6=BC=CA=C7 principal=A1=A3=BF=C9=D2=D4=CA=B9=D3=C3&nbsp;<code c=
lass=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'=
Courier New',monospace; font-size:13px; padding:2px 4px; color:rg=
b(199,37,78); background-color:rgb(254,251,243)">-d</code>&nbsp;=D6=
=B8=B6=A8=CA=FD=BE=DD=BF=E2=C3=FB=D7=D6=A1=A3</p><h3 id=3D"3.2.6-=
=C6=F4=B6=AF=B7=FE=CE=F1" style=3D"font-family:inherit; font-weig=
ht:500; line-height:1.1; margin-top:20px; margin-bottom:10px; fon=
t-size:24px"><a name=3D"t13"></a>=0A3.2.6 =C6=F4=B6=AF=B7=FE=CE=F1=
</h3><p style=3D"margin-top:0px; margin-bottom:10px">=D4=DA cdh1=20=
=BD=DA=B5=E3=C9=CF=D4=CB=D0=D0=A3=BA</p><div class=3D"highlight">=
<pre style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'C=
ourier New',monospace; font-size:13px; padding:9.5px; margin:10px=
 auto; line-height:1.42857143; color:rgb(51,51,51); word-break:br=
eak-all; word-wrap:break-word; max-width:98%; background-color:rg=
b(254,251,243)"><code class=3D"language-bash" style=3D"font-famil=
y:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; fo=
nt-size:undefined; padding:0px; color:inherit; white-space:pre-wr=
ap; background-color:transparent"><span class=3D"nv" style=3D"col=
or:rgb(25,23,124)">$ </span>chkconfig --level <span class=3D"m" s=
tyle=3D"color:rgb(102,102,102)">35</span> krb5kdc on=0A<span clas=
s=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>chkconfig --leve=
l <span class=3D"m" style=3D"color:rgb(102,102,102)">35</span> ka=
dmin on=0A<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </s=
pan>service krb5kdc start=0A<span class=3D"nv" style=3D"color:rgb=
(25,23,124)">$ </span>service kadmin start=0A</code></pre></div><=
h3 id=3D"3.2.7-=B4=B4=BD=A8-kerberos-=B9=DC=C0=ED=D4=B1" style=3D=
"font-family:inherit; font-weight:500; line-height:1.1; margin-to=
p:20px; margin-bottom:10px; font-size:24px"><a name=3D"t14"></a>=0A=
3.2.7 =B4=B4=BD=A8 kerberos =B9=DC=C0=ED=D4=B1</h3><p style=3D"ma=
rgin-top:0px; margin-bottom:10px">=B9=D8=D3=DA kerberos =B5=C4=B9=
=DC=C0=ED=A3=AC=BF=C9=D2=D4=CA=B9=D3=C3&nbsp;<code class=3D"prett=
yprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier New',=
monospace; font-size:13px; padding:2px 4px; color:rgb(199,37,78);=
 background-color:rgb(254,251,243)">kadmin.local</code>&nbsp;=BB=F2=
&nbsp;<code class=3D"prettyprint" style=3D"font-family:Menlo,Mona=
co,Consolas,'Courier New',monospace; font-size:13px; padding:2px=20=
4px; color:rgb(199,37,78); background-color:rgb(254,251,243)">kad=
min</code>=A3=AC=D6=C1=D3=DA=CA=B9=D3=C3=C4=C4=B8=F6=A3=AC=C8=A1=BE=
=F6=D3=DA=D5=CB=BB=A7=BA=CD=B7=C3=CE=CA=C8=A8=CF=DE=A3=BA</p><ul=20=
style=3D"margin-top:0px; margin-bottom:10px"><li style=3D"margin:=
3px 0px">=C8=E7=B9=FB=D3=D0=B7=C3=CE=CA kdc =B7=FE=CE=F1=C6=F7=B5=
=C4 root =C8=A8=CF=DE=A3=AC=B5=AB=CA=C7=C3=BB=D3=D0 kerberos admi=
n =D5=CB=BB=A7=A3=AC=CA=B9=D3=C3&nbsp;<code class=3D"prettyprint"=
 style=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospa=
ce; font-size:13px; padding:2px 4px; color:rgb(199,37,78); backgr=
ound-color:rgb(254,251,243)">kadmin.local</code></li><li style=3D=
"margin:3px 0px">=C8=E7=B9=FB=C3=BB=D3=D0=B7=C3=CE=CA kdc =B7=FE=CE=
=F1=C6=F7=B5=C4 root =C8=A8=CF=DE=A3=AC=B5=AB=CA=C7=D3=C3 kerbero=
s admin =D5=CB=BB=A7=A3=AC=CA=B9=D3=C3&nbsp;<code class=3D"pretty=
print" style=3D"font-family:Menlo,Monaco,Consolas,'Courier New',m=
onospace; font-size:13px; padding:2px 4px; color:rgb(199,37,78);=20=
background-color:rgb(254,251,243)">kadmin</code></li></ul><p styl=
e=3D"margin-top:0px; margin-bottom:10px">=D4=DA cdh1 =C9=CF=B4=B4=
=BD=A8=D4=B6=B3=CC=B9=DC=C0=ED=B5=C4=B9=DC=C0=ED=D4=B1=A3=BA</p><=
div class=3D"highlight"><pre style=3D"overflow:auto; font-family:=
Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; pa=
dding:9.5px; margin:10px auto; line-height:1.42857143; color:rgb(=
51,51,51); word-break:break-all; word-wrap:break-word; max-width:=
98%; background-color:rgb(254,251,243)"><code class=3D"language-b=
ash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier N=
ew',Monaco,monospace; font-size:undefined; padding:0px; color:inh=
erit; white-space:pre-wrap; background-color:transparent"><span c=
lass=3D"c" style=3D"color:rgb(64,128,128); font-style:italic">#=CA=
=D6=B6=AF=CA=E4=C8=EB=C1=BD=B4=CE=C3=DC=C2=EB=A3=AC=D5=E2=C0=EF=C3=
=DC=C2=EB=CE=AA root</span><span class=3D"nv" style=3D"color:rgb(=
25,23,124)">$ </span>kadmin.local -q <span class=3D"s2" style=3D"=
color:rgb(186,33,33)">"addprinc root/admin"</span><span class=3D"=
c" style=3D"color:rgb(64,128,128); font-style:italic"># =D2=B2=BF=
=C9=D2=D4=B2=BB=D3=C3=CA=D6=B6=AF=CA=E4=C8=EB=C3=DC=C2=EB</span><=
span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span><span c=
lass=3D"nb" style=3D"color:rgb(0,128,0)">echo</span> -e <span cla=
ss=3D"s2" style=3D"color:rgb(186,33,33)">"root\nroot"</span> <spa=
n class=3D"p">|</span> kadmin.local -q <span class=3D"s2" style=3D=
"color:rgb(186,33,33)">"addprinc root/admin"</span></code></pre><=
/div><p style=3D"margin-top:0px; margin-bottom:10px">=CF=B5=CD=B3=
=BB=E1=CC=E1=CA=BE=CA=E4=C8=EB=C3=DC=C2=EB=A3=AC=C3=DC=C2=EB=B2=BB=
=C4=DC=CE=AA=BF=D5=A3=AC=C7=D2=D0=E8=CD=D7=C9=C6=B1=A3=B4=E6=A1=A3=
</p><h3 id=3D"3.2.8-=B2=E2=CA=D4-kerberos" style=3D"font-family:i=
nherit; font-weight:500; line-height:1.1; margin-top:20px; margin=
-bottom:10px; font-size:24px"><a name=3D"t15"></a>=0A3.2.8 =B2=E2=
=CA=D4 kerberos</h3><blockquote style=3D"padding: 10px 20px; marg=
in-right: 0px; margin-bottom: 20px; margin-left: 0px; font-size:=20=
15.5px; border-left-width: 5px; border-left-style: solid; text-al=
ign: justify;"><p style=3D"margin-top:0px; margin-bottom:0px; pad=
ding-top:0.5em; padding-bottom:0.5em">=0A=D2=D4=CF=C2=C4=DA=C8=DD=
=BD=F6=BD=F6=CA=C7=CE=AA=C1=CB=B2=E2=CA=D4=A3=AC=C4=E3=BF=C9=D2=D4=
=D6=B1=BD=D3=CC=F8=B5=BD=CF=C2=B2=BF=B7=D6=C4=DA=C8=DD=A1=A3</p><=
/blockquote><p style=3D"margin-top:0px; margin-bottom:10px">=B2=E9=
=BF=B4=B5=B1=C7=B0=B5=C4=C8=CF=D6=A4=D3=C3=BB=A7=A3=BA</p><div cl=
ass=3D"highlight"><pre style=3D"overflow:auto; font-family:Menlo,=
Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:=
9.5px; margin:10px auto; line-height:1.42857143; color:rgb(51,51,=
51); word-break:break-all; word-wrap:break-word; max-width:98%; b=
ackground-color:rgb(254,251,243)"><code class=3D"language-bash" s=
tyle=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier New',Mo=
naco,monospace; font-size:undefined; padding:0px; color:inherit;=20=
white-space:pre-wrap; background-color:transparent"><span class=3D=
"c" style=3D"color:rgb(64,128,128); font-style:italic"># =B2=E9=BF=
=B4principals</span><span class=3D"nv" style=3D"color:rgb(25,23,1=
24)">$ </span>kadmin: list_principals=0A=0A  <span class=3D"c" st=
yle=3D"color:rgb(64,128,128); font-style:italic"># =CC=ED=BC=D3=D2=
=BB=B8=F6=D0=C2=B5=C4 principal</span>=0A  kadmin:  addprinc user=
1=0A    WARNING: no policy specified <span class=3D"k" style=3D"c=
olor:rgb(0,128,0); font-weight:bold">for</span> user1@JAVACHEN.CO=
M<span class=3D"p">;</span> defaulting to no policy=0A    Enter p=
assword <span class=3D"k" style=3D"color:rgb(0,128,0); font-weigh=
t:bold">for</span> principal <span class=3D"s2" style=3D"color:rg=
b(186,33,33)">"user1@JAVACHEN.COM"</span>:=0A    Re-enter passwor=
d <span class=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold=
">for</span> principal <span class=3D"s2" style=3D"color:rgb(186,=
33,33)">"user1@JAVACHEN.COM"</span>:=0A    Principal <span class=3D=
"s2" style=3D"color:rgb(186,33,33)">"user1@JAVACHEN.COM"</span> c=
reated.=0A=0A  <span class=3D"c" style=3D"color:rgb(64,128,128);=20=
font-style:italic"># =C9=BE=B3=FD principal</span>=0A  kadmin:  d=
elprinc user1=0A    Are you sure you want to delete the principal=
 <span class=3D"s2" style=3D"color:rgb(186,33,33)">"user1@JAVACHE=
N.COM"</span>? <span class=3D"o" style=3D"color:rgb(102,102,102)"=
>(</span>yes/no<span class=3D"o" style=3D"color:rgb(102,102,102)"=
>)</span>: yes=0A    Principal <span class=3D"s2" style=3D"color:=
rgb(186,33,33)">"user1@JAVACHEN.COM"</span> deleted.=0A    Make s=
ure that you have removed this principal from all ACLs before reu=
sing.=0A=0A  kadmin: <span class=3D"nb" style=3D"color:rgb(0,128,=
0)">exit</span></code></pre></div><p style=3D"margin-top:0px; mar=
gin-bottom:10px">=D2=B2=BF=C9=D2=D4=D6=B1=BD=D3=CD=A8=B9=FD=CF=C2=
=C3=E6=B5=C4=C3=FC=C1=EE=C0=B4=D6=B4=D0=D0=A3=BA</p><div class=3D=
"highlight"><pre style=3D"overflow:auto; font-family:Menlo,Monaco=
,Consolas,'Courier New',monospace; font-size:13px; padding:9.5px;=
 margin:10px auto; line-height:1.42857143; color:rgb(51,51,51); w=
ord-break:break-all; word-wrap:break-word; max-width:98%; backgro=
und-color:rgb(254,251,243)"><code class=3D"language-bash" style=3D=
"font-family:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,mo=
nospace; font-size:undefined; padding:0px; color:inherit; white-s=
pace:pre-wrap; background-color:transparent"><span class=3D"c" st=
yle=3D"color:rgb(64,128,128); font-style:italic"># =CC=E1=CA=BE=D0=
=E8=D2=AA=CA=E4=C8=EB=C3=DC=C2=EB</span><span class=3D"nv" style=3D=
"color:rgb(25,23,124)">$ </span>kadmin -p root/admin -q <span cla=
ss=3D"s2" style=3D"color:rgb(186,33,33)">"list_principals"</span>=
<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>kadmin=
 -p root/admin -q <span class=3D"s2" style=3D"color:rgb(186,33,33=
)">"addprinc user2"</span><span class=3D"nv" style=3D"color:rgb(2=
5,23,124)">$ </span>kadmin -p root/admin -q <span class=3D"s2" st=
yle=3D"color:rgb(186,33,33)">"delprinc user2"</span><span class=3D=
"c" style=3D"color:rgb(64,128,128); font-style:italic"># =B2=BB=D3=
=C3=CA=E4=C8=EB=C3=DC=C2=EB</span><span class=3D"nv" style=3D"col=
or:rgb(25,23,124)">$ </span>kadmin.local -q <span class=3D"s2" st=
yle=3D"color:rgb(186,33,33)">"list_principals"</span><span class=3D=
"nv" style=3D"color:rgb(25,23,124)">$ </span>kadmin.local -q <spa=
n class=3D"s2" style=3D"color:rgb(186,33,33)">"addprinc user2"</s=
pan><span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>ka=
dmin.local -q <span class=3D"s2" style=3D"color:rgb(186,33,33)">"=
delprinc user2"</span></code></pre></div><p style=3D"margin-top:0=
px; margin-bottom:10px">=B4=B4=BD=A8=D2=BB=B8=F6=B2=E2=CA=D4=D3=C3=
=BB=A7 test=A3=AC=C3=DC=C2=EB=C9=E8=D6=C3=CE=AA test=A3=BA</p><di=
v class=3D"highlight"><pre style=3D"overflow:auto; font-family:Me=
nlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padd=
ing:9.5px; margin:10px auto; line-height:1.42857143; color:rgb(51=
,51,51); word-break:break-all; word-wrap:break-word; max-width:98=
%; background-color:rgb(254,251,243)"><code class=3D"language-bas=
h" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier New=
',Monaco,monospace; font-size:undefined; padding:0px; color:inher=
it; white-space:pre-wrap; background-color:transparent"><span cla=
ss=3D"nv" style=3D"color:rgb(25,23,124)">$ </span><span class=3D"=
nb" style=3D"color:rgb(0,128,0)">echo</span> -e <span class=3D"s2=
" style=3D"color:rgb(186,33,33)">"test\ntest"</span> <span class=3D=
"p">|</span> kadmin.local -q <span class=3D"s2" style=3D"color:rg=
b(186,33,33)">"addprinc test"</span></code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=BB=F1=C8=A1 test =D3=C3=BB=A7=
=B5=C4 ticket=A3=BA</p><div class=3D"highlight"><pre style=3D"ove=
rflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monos=
pace; font-size:13px; padding:9.5px; margin:10px auto; line-heigh=
t:1.42857143; color:rgb(51,51,51); word-break:break-all; word-wra=
p:break-word; max-width:98%; background-color:rgb(254,251,243)"><=
code class=3D"language-bash" style=3D"font-family:Menlo,'Andale M=
ono',Consolas,'Courier New',Monaco,monospace; font-size:undefined=
; padding:0px; color:inherit; white-space:pre-wrap; background-co=
lor:transparent"><span class=3D"c" style=3D"color:rgb(64,128,128)=
; font-style:italic"># =CD=A8=B9=FD=D3=C3=BB=A7=C3=FB=BA=CD=C3=DC=
=C2=EB=BD=F8=D0=D0=B5=C7=C2=BC</span><span class=3D"nv" style=3D"=
color:rgb(25,23,124)">$ </span>kinit <span class=3D"nb" style=3D"=
color:rgb(0,128,0)">test</span>=0APassword <span class=3D"k" styl=
e=3D"color:rgb(0,128,0); font-weight:bold">for</span> <span class=
=3D"nb" style=3D"color:rgb(0,128,0)">test</span>@JAVACHEN.COM:=0A=
=0A<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>kli=
st  -e=0ATicket cache: FILE:/tmp/krb5cc_0=0ADefault principal: <s=
pan class=3D"nb" style=3D"color:rgb(0,128,0)">test</span>@JAVACHE=
N.COM=0A=0AValid starting     Expires            Service principa=
l=0A11/07/14 15:29:02  11/08/14 15:29:02  krbtgt/JAVACHEN.COM@JAV=
ACHEN.COM=0A  renew <span class=3D"k" style=3D"color:rgb(0,128,0)=
; font-weight:bold">until</span> 11/17/14 15:29:02, Etype <span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">(</span>skey, tkt<spa=
n class=3D"o" style=3D"color:rgb(102,102,102)">)</span>: AES-128=20=
CTS mode with 96-bit SHA-1 HMAC, AES-128 CTS mode with 96-bit SHA=
-1 HMAC=0A=0A=0AKerberos <span class=3D"m" style=3D"color:rgb(102=
,102,102)">4</span> ticket cache: /tmp/tkt0=0Aklist: You have no=20=
tickets cached=0A</code></pre></div><p style=3D"margin-top:0px; m=
argin-bottom:10px">=CF=FA=BB=D9=B8=C3 test =D3=C3=BB=A7=B5=C4 tic=
ket=A3=BA</p><div class=3D"highlight"><pre style=3D"overflow:auto=
; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font=
-size:13px; padding:9.5px; margin:10px auto; line-height:1.428571=
43; color:rgb(51,51,51); word-break:break-all; word-wrap:break-wo=
rd; max-width:98%; background-color:rgb(254,251,243)"><code class=
=3D"language-bash" style=3D"font-family:Menlo,'Andale Mono',Conso=
las,'Courier New',Monaco,monospace; font-size:undefined; padding:=
0px; color:inherit; white-space:pre-wrap; background-color:transp=
arent"><span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span=
>kdestroy=0A=0A<span class=3D"nv" style=3D"color:rgb(25,23,124)">=
$ </span>klist=0Aklist: No credentials cache found <span class=3D=
"o" style=3D"color:rgb(102,102,102)">(</span>ticket cache FILE:/t=
mp/krb5cc_0<span class=3D"o" style=3D"color:rgb(102,102,102)">)</=
span>=0A=0A=0AKerberos <span class=3D"m" style=3D"color:rgb(102,1=
02,102)">4</span> ticket cache: /tmp/tkt0=0Aklist: You have no ti=
ckets cached=0A</code></pre></div><p style=3D"margin-top:0px; mar=
gin-bottom:10px">=B8=FC=D0=C2 ticket=A3=BA</p><div class=3D"highl=
ight"><pre style=3D"overflow:auto; font-family:Menlo,Monaco,Conso=
las,'Courier New',monospace; font-size:13px; padding:9.5px; margi=
n:10px auto; line-height:1.42857143; color:rgb(51,51,51); word-br=
eak:break-all; word-wrap:break-word; max-width:98%; background-co=
lor:rgb(254,251,243)"><code class=3D"language-bash" style=3D"font=
-family:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospa=
ce; font-size:undefined; padding:0px; color:inherit; white-space:=
pre-wrap; background-color:transparent"><span class=3D"nv" style=3D=
"color:rgb(25,23,124)">$ </span>kinit root/admin=0A  Password <sp=
an class=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold">for=
</span> root/admin@JAVACHEN.COM:=0A=0A<span class=3D"nv" style=3D=
"color:rgb(25,23,124)">$ </span> klist=0A  Ticket cache: FILE:/tm=
p/krb5cc_0=0A  Default principal: root/admin@JAVACHEN.COM=0A=0A =20=
Valid starting     Expires            Service principal=0A  11/07=
/14 15:33:57  11/08/14 15:33:57  krbtgt/JAVACHEN.COM@JAVACHEN.COM=
=0A    renew <span class=3D"k" style=3D"color:rgb(0,128,0); font-=
weight:bold">until</span> 11/17/14 15:33:57=0A=0A  Kerberos <span=
 class=3D"m" style=3D"color:rgb(102,102,102)">4</span> ticket cac=
he: /tmp/tkt0=0A  klist: You have no tickets cached=0A=0A<span cl=
ass=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>kinit -R=0A=0A=
<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>klist=0A=
  Ticket cache: FILE:/tmp/krb5cc_0=0A  Default principal: root/ad=
min@JAVACHEN.COM=0A=0A  Valid starting     Expires            Ser=
vice principal=0A  11/07/14 15:34:05  11/08/14 15:34:05  krbtgt/J=
AVACHEN.COM@JAVACHEN.COM=0A    renew <span class=3D"k" style=3D"c=
olor:rgb(0,128,0); font-weight:bold">until</span> 11/17/14 15:33:=
57=0A=0A  Kerberos <span class=3D"m" style=3D"color:rgb(102,102,1=
02)">4</span> ticket cache: /tmp/tkt0=0A  klist: You have no tick=
ets cached=0A</code></pre></div><p style=3D"margin-top:0px; margi=
n-bottom:10px">=B3=E9=C8=A1=C3=DC=D4=BF=B2=A2=BD=AB=C6=E4=B4=A2=B4=
=E6=D4=DA=B1=BE=B5=D8 keytab =CE=C4=BC=FE /etc/krb5.keytab =D6=D0=
=A1=A3=D5=E2=B8=F6=CE=C4=BC=FE=D3=C9=B3=AC=BC=B6=D3=C3=BB=A7=D3=B5=
=D3=D0=A3=AC=CB=F9=D2=D4=C4=FA=B1=D8=D0=EB=CA=C7 root =D3=C3=BB=A7=
=B2=C5=C4=DC=D4=DA kadmin shell =D6=D0=D6=B4=D0=D0=D2=D4=CF=C2=C3=
=FC=C1=EE=A3=BA</p><div class=3D"highlight"><pre style=3D"overflo=
w:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace=
; font-size:13px; padding:9.5px; margin:10px auto; line-height:1.=
42857143; color:rgb(51,51,51); word-break:break-all; word-wrap:br=
eak-word; max-width:98%; background-color:rgb(254,251,243)"><code=
 class=3D"language-bash" style=3D"font-family:Menlo,'Andale Mono'=
,Consolas,'Courier New',Monaco,monospace; font-size:undefined; pa=
dding:0px; color:inherit; white-space:pre-wrap; background-color:=
transparent"><span class=3D"nv" style=3D"color:rgb(25,23,124)">$=20=
</span>kadmin.local -q <span class=3D"s2" style=3D"color:rgb(186,=
33,33)">"ktadd kadmin/admin"</span><span class=3D"nv" style=3D"co=
lor:rgb(25,23,124)">$ </span>klist -k /etc/krb5.keytab=0A  Keytab=
 name: FILE:/etc/krb5.keytab=0A  KVNO Principal=0A  ---- --------=
-----------------------------------------------------------------=
-=0A     <span class=3D"m" style=3D"color:rgb(102,102,102)">3</sp=
an> kadmin/admin@LASHOU-INC.COM=0A     <span class=3D"m" style=3D=
"color:rgb(102,102,102)">3</span> kadmin/admin@LASHOU-INC.COM=0A=20=
    <span class=3D"m" style=3D"color:rgb(102,102,102)">3</span> k=
admin/admin@LASHOU-INC.COM=0A     <span class=3D"m" style=3D"colo=
r:rgb(102,102,102)">3</span> kadmin/admin@LASHOU-INC.COM=0A     <=
span class=3D"m" style=3D"color:rgb(102,102,102)">3</span> kadmin=
/admin@LASHOU-INC.COM=0A</code></pre></div><h1 id=3D"4.-hdfs-=C9=CF=
=C5=E4=D6=C3-kerberos" style=3D"margin:20px 0px 10px; font-size:3=
6px; font-family:inherit; font-weight:500; line-height:1.1"><a na=
me=3D"t16"></a>=0A4. HDFS =C9=CF=C5=E4=D6=C3 kerberos</h1><h2 id=3D=
"4.1-=B4=B4=BD=A8=C8=CF=D6=A4=B9=E6=D4=F2" style=3D"font-family:i=
nherit; font-weight:500; line-height:1.1; margin-top:20px; margin=
-bottom:10px; font-size:30px"><a name=3D"t17"></a>=0A4.1 =B4=B4=BD=
=A8=C8=CF=D6=A4=B9=E6=D4=F2</h2><p style=3D"margin-top:0px; margi=
n-bottom:10px">=D4=DA Kerberos =B0=B2=C8=AB=BB=FA=D6=C6=C0=EF=A3=AC=
=D2=BB=B8=F6 principal =BE=CD=CA=C7 realm =C0=EF=B5=C4=D2=BB=B8=F6=
=B6=D4=CF=F3=A3=AC=D2=BB=B8=F6 principal =D7=DC=CA=C7=BA=CD=D2=BB=
=B8=F6=C3=DC=D4=BF=A3=A8secret key=A3=A9=B3=C9=B6=D4=B3=F6=CF=D6=B5=
=C4=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px">=D5=E2=
=B8=F6 principal =B5=C4=B6=D4=D3=A6=CE=EF=BF=C9=D2=D4=CA=C7 servi=
ce=A3=AC=BF=C9=D2=D4=CA=C7 host=A3=AC=D2=B2=BF=C9=D2=D4=CA=C7 use=
r=A3=AC=B6=D4=D3=DA Kerberos =C0=B4=CB=B5=A3=AC=B6=BC=C3=BB=D3=D0=
=C7=F8=B1=F0=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:1=
0px">Kdc(Key distribute center) =D6=AA=B5=C0=CB=F9=D3=D0 principa=
l =B5=C4 secret key=A3=AC=B5=AB=C3=BF=B8=F6 principal =B6=D4=D3=A6=
=B5=C4=B6=D4=CF=F3=D6=BB=D6=AA=B5=C0=D7=D4=BC=BA=B5=C4=C4=C7=B8=F6=
 secret key =A1=A3=D5=E2=D2=B2=CA=C7=A1=B0=B9=B2=CF=ED=C3=DC=D4=BF=
=A1=B0=B5=C4=D3=C9=C0=B4=A1=A3</p><p style=3D"margin-top:0px; mar=
gin-bottom:10px">=B6=D4=D3=DA hadoop=A3=ACprincipals =B5=C4=B8=F1=
=CA=BD=CE=AA&nbsp;<code class=3D"prettyprint" style=3D"font-famil=
y:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px;=20=
padding:2px 4px; color:rgb(199,37,78); background-color:rgb(254,2=
51,243)">username/fully.qualified.domain.name@YOUR-REALM.COM</cod=
e>=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px">=CD=A8=
=B9=FD yum =D4=B4=B0=B2=D7=B0=B5=C4 cdh =BC=AF=C8=BA=D6=D0=A3=ACN=
ameNode =BA=CD DataNode =CA=C7=CD=A8=B9=FD hdfs =C6=F4=B6=AF=B5=C4=
=A3=AC=B9=CA=CE=AA=BC=AF=C8=BA=D6=D0=C3=BF=B8=F6=B7=FE=CE=F1=C6=F7=
=BD=DA=B5=E3=CC=ED=BC=D3=C1=BD=B8=F6principals=A3=BAhdfs=A1=A2HTT=
P=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px">=D4=DA=
 KCD server =C9=CF=A3=A8=D5=E2=C0=EF=CA=C7 cdh1=A3=A9=B4=B4=BD=A8=
 hdfs principal=A3=BA</p><div class=3D"highlight"><pre style=3D"o=
verflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',mon=
ospace; font-size:13px; padding:9.5px; margin:10px auto; line-hei=
ght:1.42857143; color:rgb(51,51,51); word-break:break-all; word-w=
rap:break-word; max-width:98%; background-color:rgb(254,251,243)"=
><code class=3D"language-bash" style=3D"font-family:Menlo,'Andale=
 Mono',Consolas,'Courier New',Monaco,monospace; font-size:undefin=
ed; padding:0px; color:inherit; white-space:pre-wrap; background-=
color:transparent">kadmin.local -q <span class=3D"s2" style=3D"co=
lor:rgb(186,33,33)">"addprinc -randkey hdfs/cdh1@JAVACHEN.COM"</s=
pan>=0Akadmin.local -q <span class=3D"s2" style=3D"color:rgb(186,=
33,33)">"addprinc -randkey hdfs/cdh2@JAVACHEN.COM"</span>=0Akadmi=
n.local -q <span class=3D"s2" style=3D"color:rgb(186,33,33)">"add=
princ -randkey hdfs/cdh3@JAVACHEN.COM"</span></code></pre></div><=
p style=3D"margin-top:0px; margin-bottom:10px"><code class=3D"pre=
ttyprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier New=
',monospace; font-size:13px; padding:2px 4px; color:rgb(199,37,78=
); background-color:rgb(254,251,243)">-randkey</code>&nbsp;=B1=EA=
=D6=BE=C3=BB=D3=D0=CE=AA=D0=C2 principal=0A =C9=E8=D6=C3=C3=DC=C2=
=EB=A3=AC=B6=F8=CA=C7=D6=B8=CA=BE kadmin =C9=FA=B3=C9=D2=BB=B8=F6=
=CB=E6=BB=FA=C3=DC=D4=BF=A1=A3=D6=AE=CB=F9=D2=D4=D4=DA=D5=E2=C0=EF=
=CA=B9=D3=C3=D5=E2=B8=F6=B1=EA=D6=BE=A3=AC=CA=C7=D2=F2=CE=AA=B4=CB=
 principal =B2=BB=D0=E8=D2=AA=D3=C3=BB=A7=BD=BB=BB=A5=A1=A3=CB=FC=
=CA=C7=BC=C6=CB=E3=BB=FA=B5=C4=D2=BB=B8=F6=B7=FE=CE=F1=C6=F7=D5=CA=
=BB=A7=A1=A3</p><p style=3D"margin-top:0px; margin-bottom:10px">=B4=
=B4=BD=A8 HTTP principal=A3=BA</p><div class=3D"highlight"><pre s=
tyle=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier=
 New',monospace; font-size:13px; padding:9.5px; margin:10px auto;=
 line-height:1.42857143; color:rgb(51,51,51); word-break:break-al=
l; word-wrap:break-word; max-width:98%; background-color:rgb(254,=
251,243)"><code class=3D"language-bash" style=3D"font-family:Menl=
o,'Andale Mono',Consolas,'Courier New',Monaco,monospace; font-siz=
e:undefined; padding:0px; color:inherit; white-space:pre-wrap; ba=
ckground-color:transparent">kadmin.local -q <span class=3D"s2" st=
yle=3D"color:rgb(186,33,33)">"addprinc -randkey HTTP/cdh1@JAVACHE=
N.COM"</span>=0Akadmin.local -q <span class=3D"s2" style=3D"color=
:rgb(186,33,33)">"addprinc -randkey HTTP/cdh2@JAVACHEN.COM"</span=
>=0Akadmin.local -q <span class=3D"s2" style=3D"color:rgb(186,33,=
33)">"addprinc -randkey HTTP/cdh3@JAVACHEN.COM"</span></code></pr=
e></div><p style=3D"margin-top:0px; margin-bottom:10px">=B4=B4=BD=
=A8=CD=EA=B3=C9=BA=F3=A3=AC=B2=E9=BF=B4=A3=BA</p><div class=3D"hi=
ghlight"><pre style=3D"overflow:auto; font-family:Menlo,Monaco,Co=
nsolas,'Courier New',monospace; font-size:13px; padding:9.5px; ma=
rgin:10px auto; line-height:1.42857143; color:rgb(51,51,51); word=
-break:break-all; word-wrap:break-word; max-width:98%; background=
-color:rgb(254,251,243)"><code class=3D"language-bash" style=3D"f=
ont-family:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,mono=
space; font-size:undefined; padding:0px; color:inherit; white-spa=
ce:pre-wrap; background-color:transparent"><span class=3D"nv" sty=
le=3D"color:rgb(25,23,124)">$ </span>kadmin.local -q <span class=3D=
"s2" style=3D"color:rgb(186,33,33)">"listprincs"</span></code></p=
re></div><h2 id=3D"4.2-=B4=B4=BD=A8keytab=CE=C4=BC=FE" style=3D"f=
ont-family:inherit; font-weight:500; line-height:1.1; margin-top:=
20px; margin-bottom:10px; font-size:30px"><a name=3D"t18"></a>=0A=
4.2 =B4=B4=BD=A8keytab=CE=C4=BC=FE</h2><p style=3D"margin-top:0px=
; margin-bottom:10px">keytab =CA=C7=B0=FC=BA=AC principals =BA=CD=
=BC=D3=C3=DC principal key =B5=C4=CE=C4=BC=FE=A1=A3</p><p style=3D=
"margin-top:0px; margin-bottom:10px">keytab =CE=C4=BC=FE=B6=D4=D3=
=DA=C3=BF=B8=F6 host =CA=C7=CE=A8=D2=BB=B5=C4=A3=AC=D2=F2=CE=AA k=
ey =D6=D0=B0=FC=BA=AC hostname=A1=A3keytab =CE=C4=BC=FE=D3=C3=D3=DA=
=B2=BB=D0=E8=D2=AA=C8=CB=B9=A4=BD=BB=BB=A5=BA=CD=B1=A3=B4=E6=B4=BF=
=CE=C4=B1=BE=C3=DC=C2=EB=A3=AC=CA=B5=CF=D6=B5=BD kerberos =C9=CF=D1=
=E9=D6=A4=D2=BB=B8=F6=D6=F7=BB=FA=C9=CF=B5=C4 principal=A1=A3</p>=
<p style=3D"margin-top:0px; margin-bottom:10px">=D2=F2=CE=AA=B7=FE=
=CE=F1=C6=F7=C9=CF=BF=C9=D2=D4=B7=C3=CE=CA keytab =CE=C4=BC=FE=BC=
=B4=BF=C9=D2=D4=D2=D4 principal =B5=C4=C9=ED=B7=DD=CD=A8=B9=FD ke=
rberos =B5=C4=C8=CF=D6=A4=A3=AC=CB=F9=D2=D4=A3=ACkeytab =CE=C4=BC=
=FE=D3=A6=B8=C3=B1=BB=CD=D7=C9=C6=B1=A3=B4=E6=A3=AC=D3=A6=B8=C3=D6=
=BB=D3=D0=C9=D9=CA=FD=B5=C4=D3=C3=BB=A7=BF=C9=D2=D4=B7=C3=CE=CA</=
p><p style=3D"margin-top:0px; margin-bottom:10px">=B4=B4=BD=A8=B0=
=FC=BA=AC hdfs principal =BA=CD host principal =B5=C4 hdfs keytab=
=A3=BA</p><div class=3D"highlight"><pre style=3D"overflow:auto; f=
ont-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-si=
ze:13px; padding:9.5px; margin:10px auto; line-height:1.42857143;=
 color:rgb(51,51,51); word-break:break-all; word-wrap:break-word;=
 max-width:98%; background-color:rgb(254,251,243)"><code class=3D=
"language-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas=
,'Courier New',Monaco,monospace; font-size:undefined; padding:0px=
; color:inherit; white-space:pre-wrap; background-color:transpare=
nt">xst -norandkey -k hdfs.keytab hdfs/fully.qualified.domain.nam=
e host/fully.qualified.domain.name=0A</code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=B4=B4=BD=A8=B0=FC=BA=AC map=
red principal =BA=CD host principal =B5=C4 mapred keytab=A3=BA</p=
><div class=3D"highlight"><pre style=3D"overflow:auto; font-famil=
y:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px;=20=
padding:9.5px; margin:10px auto; line-height:1.42857143; color:rg=
b(51,51,51); word-break:break-all; word-wrap:break-word; max-widt=
h:98%; background-color:rgb(254,251,243)"><code class=3D"language=
-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier=
 New',Monaco,monospace; font-size:undefined; padding:0px; color:i=
nherit; white-space:pre-wrap; background-color:transparent">xst -=
norandkey -k mapred.keytab mapred/fully.qualified.domain.name hos=
t/fully.qualified.domain.name=0A</code></pre></div><blockquote st=
yle=3D"padding: 10px 20px; margin-right: 0px; margin-bottom: 20px=
; margin-left: 0px; font-size: 15.5px; border-left-width: 5px; bo=
rder-left-style: solid; text-align: justify;"><p style=3D"margin-=
top:0px; margin-bottom:0px; padding-top:0.5em; padding-bottom:0.5=
em"><span style=3D"font-weight:700">=D7=A2=D2=E2</span>=A3=BA<br>=
=0A=C9=CF=C3=E6=B5=C4=B7=BD=B7=A8=CA=B9=D3=C3=C1=CBxst=B5=C4noran=
dkey=B2=CE=CA=FD=A3=AC=D3=D0=D0=A9kerberos=B2=BB=D6=A7=B3=D6=B8=C3=
=B2=CE=CA=FD=A1=A3<br>=0A=B5=B1=B2=BB=D6=A7=B3=D6=B8=C3=B2=CE=CA=FD=
=CA=B1=D3=D0=D5=E2=D1=F9=B5=C4=CC=E1=CA=BE=A3=BA<code class=3D"pr=
ettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier Ne=
w',monospace; font-size:14px; padding:2px 4px; color:rgb(199,37,7=
8); background-color:rgb(254,251,243)">Principal -norandkey does=20=
not exist.</code>=A3=AC=D0=E8=D2=AA=CA=B9=D3=C3=CF=C2=C3=E6=B5=C4=
=B7=BD=B7=A8=C0=B4=C9=FA=B3=C9keytab=CE=C4=BC=FE=A1=A3</p></block=
quote><p style=3D"margin-top:0px; margin-bottom:10px">=D4=DA cdh1=
 =BD=DA=B5=E3=A3=AC=BC=B4 KDC server =BD=DA=B5=E3=C9=CF=D6=B4=D0=D0=
=CF=C2=C3=E6=C3=FC=C1=EE=A3=BA</p><div class=3D"highlight"><pre s=
tyle=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier=
 New',monospace; font-size:13px; padding:9.5px; margin:10px auto;=
 line-height:1.42857143; color:rgb(51,51,51); word-break:break-al=
l; word-wrap:break-word; max-width:98%; background-color:rgb(254,=
251,243)"><code class=3D"language-bash" style=3D"font-family:Menl=
o,'Andale Mono',Consolas,'Courier New',Monaco,monospace; font-siz=
e:undefined; padding:0px; color:inherit; white-space:pre-wrap; ba=
ckground-color:transparent"><span class=3D"nv" style=3D"color:rgb=
(25,23,124)">$ </span><span class=3D"nb" style=3D"color:rgb(0,128=
,0)">cd</span> /var/kerberos/krb5kdc/=0A=0A<span class=3D"nv" sty=
le=3D"color:rgb(25,23,124)">$ </span>kadmin.local -q <span class=3D=
"s2" style=3D"color:rgb(186,33,33)">"xst  -k hdfs-unmerged.keytab=
  hdfs/cdh1@JAVACHEN.COM"</span><span class=3D"nv" style=3D"color=
:rgb(25,23,124)">$ </span>kadmin.local -q <span class=3D"s2" styl=
e=3D"color:rgb(186,33,33)">"xst  -k hdfs-unmerged.keytab  hdfs/cd=
h2@JAVACHEN.COM"</span><span class=3D"nv" style=3D"color:rgb(25,2=
3,124)">$ </span>kadmin.local -q <span class=3D"s2" style=3D"colo=
r:rgb(186,33,33)">"xst  -k hdfs-unmerged.keytab  hdfs/cdh3@JAVACH=
EN.COM"</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$=
 </span>kadmin.local -q <span class=3D"s2" style=3D"color:rgb(186=
,33,33)">"xst  -k HTTP.keytab  HTTP/cdh1@JAVACHEN.COM"</span><spa=
n class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>kadmin.loc=
al -q <span class=3D"s2" style=3D"color:rgb(186,33,33)">"xst  -k=20=
HTTP.keytab  HTTP/cdh2@JAVACHEN.COM"</span><span class=3D"nv" sty=
le=3D"color:rgb(25,23,124)">$ </span>kadmin.local -q <span class=3D=
"s2" style=3D"color:rgb(186,33,33)">"xst  -k HTTP.keytab  HTTP/cd=
h3@JAVACHEN.COM"</span></code></pre></div><p style=3D"margin-top:=
0px; margin-bottom:10px">=D5=E2=D1=F9=A3=AC=BE=CD=BB=E1=D4=DA&nbs=
p;<code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,C=
onsolas,'Courier New',monospace; font-size:13px; padding:2px 4px;=
 color:rgb(199,37,78); background-color:rgb(254,251,243)">/var/ke=
rberos/krb5kdc/</code>&nbsp;=C4=BF=C2=BC=CF=C2=C9=FA=B3=C9&nbsp;<=
code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Cons=
olas,'Courier New',monospace; font-size:13px; padding:2px 4px; co=
lor:rgb(199,37,78); background-color:rgb(254,251,243)">hdfs-unmer=
ged.keytab</code>&nbsp;=BA=CD&nbsp;<code class=3D"prettyprint" st=
yle=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospace;=
 font-size:13px; padding:2px 4px; color:rgb(199,37,78); backgroun=
d-color:rgb(254,251,243)">HTTP.keytab</code>&nbsp;=C1=BD=B8=F6=CE=
=C4=BC=FE=A3=AC=BD=D3=CF=C2=C0=B4=CA=B9=D3=C3&nbsp;<code class=3D=
"prettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier=
 New',monospace; font-size:13px; padding:2px 4px; color:rgb(199,3=
7,78); background-color:rgb(254,251,243)">ktutil</code>&nbsp;=BA=CF=
=B2=A2=D5=DF=C1=BD=B8=F6=CE=C4=BC=FE=CE=AA&nbsp;<code class=3D"pr=
ettyprint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier Ne=
w',monospace; font-size:13px; padding:2px 4px; color:rgb(199,37,7=
8); background-color:rgb(254,251,243)">hdfs.keytab</code>=A1=A3</=
p><div class=3D"highlight"><pre style=3D"overflow:auto; font-fami=
ly:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px;=
 padding:9.5px; margin:10px auto; line-height:1.42857143; color:r=
gb(51,51,51); word-break:break-all; word-wrap:break-word; max-wid=
th:98%; background-color:rgb(254,251,243)"><code class=3D"languag=
e-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courie=
r New',Monaco,monospace; font-size:undefined; padding:0px; color:=
inherit; white-space:pre-wrap; background-color:transparent"><spa=
n class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span><span clas=
s=3D"nb" style=3D"color:rgb(0,128,0)">cd</span> /var/kerberos/krb=
5kdc/=0A=0A<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </=
span>ktutil=0Aktutil: rkt hdfs-unmerged.keytab=0Aktutil: rkt HTTP=
.keytab=0Aktutil: wkt hdfs.keytab=0A</code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=CA=B9=D3=C3 klist =CF=D4=CA=
=BE hdfs.keytab =CE=C4=BC=FE=C1=D0=B1=ED=A3=BA</p><div class=3D"h=
ighlight"><pre style=3D"overflow:auto; font-family:Menlo,Monaco,C=
onsolas,'Courier New',monospace; font-size:13px; padding:9.5px; m=
argin:10px auto; line-height:1.42857143; color:rgb(51,51,51); wor=
d-break:break-all; word-wrap:break-word; max-width:98%; backgroun=
d-color:rgb(254,251,243)"><code class=3D"language-bash" style=3D"=
font-family:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,mon=
ospace; font-size:undefined; padding:0px; color:inherit; white-sp=
ace:pre-wrap; background-color:transparent"><span class=3D"nv" st=
yle=3D"color:rgb(25,23,124)">$ </span>klist -ket  hdfs.keytab=0AK=
eytab name: FILE:hdfs.keytab=0AKVNO Timestamp         Principal=0A=
---- ----------------- ------------------------------------------=
--------------=0A   <span class=3D"m" style=3D"color:rgb(102,102,=
102)">2</span> 11/13/14 10:40:18 hdfs/cdh1@JAVACHEN.COM <span cla=
ss=3D"o" style=3D"color:rgb(102,102,102)">(</span>des3-cbc-sha1<s=
pan class=3D"o" style=3D"color:rgb(102,102,102)">)</span><span cl=
ass=3D"m" style=3D"color:rgb(102,102,102)">2</span> 11/13/14 10:4=
0:18 hdfs/cdh1@JAVACHEN.COM <span class=3D"o" style=3D"color:rgb(=
102,102,102)">(</span>arcfour-hmac<span class=3D"o" style=3D"colo=
r:rgb(102,102,102)">)</span><span class=3D"m" style=3D"color:rgb(=
102,102,102)">2</span> 11/13/14 10:40:18 hdfs/cdh1@JAVACHEN.COM <=
span class=3D"o" style=3D"color:rgb(102,102,102)">(</span>des-hma=
c-sha1<span class=3D"o" style=3D"color:rgb(102,102,102)">)</span>=
<span class=3D"m" style=3D"color:rgb(102,102,102)">2</span> 11/13=
/14 10:40:18 hdfs/cdh1@JAVACHEN.COM <span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">(</span>des-cbc-md5<span class=3D"o" style=3D=
"color:rgb(102,102,102)">)</span><span class=3D"m" style=3D"color=
:rgb(102,102,102)">4</span> 11/13/14 10:40:18 hdfs/cdh2@JAVACHEN.=
COM <span class=3D"o" style=3D"color:rgb(102,102,102)">(</span>de=
s3-cbc-sha1<span class=3D"o" style=3D"color:rgb(102,102,102)">)</=
span><span class=3D"m" style=3D"color:rgb(102,102,102)">4</span>=20=
11/13/14 10:40:18 hdfs/cdh2@JAVACHEN.COM <span class=3D"o" style=3D=
"color:rgb(102,102,102)">(</span>arcfour-hmac<span class=3D"o" st=
yle=3D"color:rgb(102,102,102)">)</span><span class=3D"m" style=3D=
"color:rgb(102,102,102)">4</span> 11/13/14 10:40:18 hdfs/cdh2@JAV=
ACHEN.COM <span class=3D"o" style=3D"color:rgb(102,102,102)">(</s=
pan>des-hmac-sha1<span class=3D"o" style=3D"color:rgb(102,102,102=
)">)</span><span class=3D"m" style=3D"color:rgb(102,102,102)">4</=
span> 11/13/14 10:40:18 hdfs/cdh2@JAVACHEN.COM <span class=3D"o"=20=
style=3D"color:rgb(102,102,102)">(</span>des-cbc-md5<span class=3D=
"o" style=3D"color:rgb(102,102,102)">)</span><span class=3D"m" st=
yle=3D"color:rgb(102,102,102)">4</span> 11/13/14 10:40:18 hdfs/cd=
h3@JAVACHEN.COM <span class=3D"o" style=3D"color:rgb(102,102,102)=
">(</span>des3-cbc-sha1<span class=3D"o" style=3D"color:rgb(102,1=
02,102)">)</span><span class=3D"m" style=3D"color:rgb(102,102,102=
)">4</span> 11/13/14 10:40:18 hdfs/cdh3@JAVACHEN.COM <span class=3D=
"o" style=3D"color:rgb(102,102,102)">(</span>arcfour-hmac<span cl=
ass=3D"o" style=3D"color:rgb(102,102,102)">)</span><span class=3D=
"m" style=3D"color:rgb(102,102,102)">4</span> 11/13/14 10:40:18 h=
dfs/cdh3@JAVACHEN.COM <span class=3D"o" style=3D"color:rgb(102,10=
2,102)">(</span>des-hmac-sha1<span class=3D"o" style=3D"color:rgb=
(102,102,102)">)</span><span class=3D"m" style=3D"color:rgb(102,1=
02,102)">4</span> 11/13/14 10:40:18 hdfs/cdh3@JAVACHEN.COM <span=20=
class=3D"o" style=3D"color:rgb(102,102,102)">(</span>des-cbc-md5<=
span class=3D"o" style=3D"color:rgb(102,102,102)">)</span><span c=
lass=3D"m" style=3D"color:rgb(102,102,102)">3</span> 11/13/14 10:=
40:18 HTTP/cdh1@JAVACHEN.COM <span class=3D"o" style=3D"color:rgb=
(102,102,102)">(</span>des3-cbc-sha1<span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">)</span><span class=3D"m" style=3D"color:rg=
b(102,102,102)">3</span> 11/13/14 10:40:18 HTTP/cdh1@JAVACHEN.COM=
 <span class=3D"o" style=3D"color:rgb(102,102,102)">(</span>arcfo=
ur-hmac<span class=3D"o" style=3D"color:rgb(102,102,102)">)</span=
><span class=3D"m" style=3D"color:rgb(102,102,102)">3</span> 11/1=
3/14 10:40:18 HTTP/cdh1@JAVACHEN.COM <span class=3D"o" style=3D"c=
olor:rgb(102,102,102)">(</span>des-hmac-sha1<span class=3D"o" sty=
le=3D"color:rgb(102,102,102)">)</span><span class=3D"m" style=3D"=
color:rgb(102,102,102)">3</span> 11/13/14 10:40:18 HTTP/cdh1@JAVA=
CHEN.COM <span class=3D"o" style=3D"color:rgb(102,102,102)">(</sp=
an>des-cbc-md5<span class=3D"o" style=3D"color:rgb(102,102,102)">=
)</span><span class=3D"m" style=3D"color:rgb(102,102,102)">3</spa=
n> 11/13/14 10:40:18 HTTP/cdh2@JAVACHEN.COM <span class=3D"o" sty=
le=3D"color:rgb(102,102,102)">(</span>des3-cbc-sha1<span class=3D=
"o" style=3D"color:rgb(102,102,102)">)</span><span class=3D"m" st=
yle=3D"color:rgb(102,102,102)">3</span> 11/13/14 10:40:18 HTTP/cd=
h2@JAVACHEN.COM <span class=3D"o" style=3D"color:rgb(102,102,102)=
">(</span>arcfour-hmac<span class=3D"o" style=3D"color:rgb(102,10=
2,102)">)</span><span class=3D"m" style=3D"color:rgb(102,102,102)=
">3</span> 11/13/14 10:40:18 HTTP/cdh2@JAVACHEN.COM <span class=3D=
"o" style=3D"color:rgb(102,102,102)">(</span>des-hmac-sha1<span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">)</span><span class=3D=
"m" style=3D"color:rgb(102,102,102)">3</span> 11/13/14 10:40:18 H=
TTP/cdh2@JAVACHEN.COM <span class=3D"o" style=3D"color:rgb(102,10=
2,102)">(</span>des-cbc-md5<span class=3D"o" style=3D"color:rgb(1=
02,102,102)">)</span><span class=3D"m" style=3D"color:rgb(102,102=
,102)">3</span> 11/13/14 10:40:18 HTTP/cdh3@JAVACHEN.COM <span cl=
ass=3D"o" style=3D"color:rgb(102,102,102)">(</span>des3-cbc-sha1<=
span class=3D"o" style=3D"color:rgb(102,102,102)">)</span><span c=
lass=3D"m" style=3D"color:rgb(102,102,102)">3</span> 11/13/14 10:=
40:18 HTTP/cdh3@JAVACHEN.COM <span class=3D"o" style=3D"color:rgb=
(102,102,102)">(</span>arcfour-hmac<span class=3D"o" style=3D"col=
or:rgb(102,102,102)">)</span><span class=3D"m" style=3D"color:rgb=
(102,102,102)">3</span> 11/13/14 10:40:18 HTTP/cdh3@JAVACHEN.COM=20=
<span class=3D"o" style=3D"color:rgb(102,102,102)">(</span>des-hm=
ac-sha1<span class=3D"o" style=3D"color:rgb(102,102,102)">)</span=
><span class=3D"m" style=3D"color:rgb(102,102,102)">3</span> 11/1=
3/14 10:40:18 HTTP/cdh3@JAVACHEN.COM <span class=3D"o" style=3D"c=
olor:rgb(102,102,102)">(</span>des-cbc-md5<span class=3D"o" style=
=3D"color:rgb(102,102,102)">)</span></code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=D1=E9=D6=A4=CA=C7=B7=F1=D5=FD=
=C8=B7=BA=CF=B2=A2=C1=CBkey=A3=AC=CA=B9=D3=C3=BA=CF=B2=A2=BA=F3=B5=
=C4keytab=A3=AC=B7=D6=B1=F0=CA=B9=D3=C3hdfs=BA=CDhost principals=C0=
=B4=BB=F1=C8=A1=D6=A4=CA=E9=A1=A3</p><div class=3D"highlight"><pr=
e style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Cour=
ier New',monospace; font-size:13px; padding:9.5px; margin:10px au=
to; line-height:1.42857143; color:rgb(51,51,51); word-break:break=
-all; word-wrap:break-word; max-width:98%; background-color:rgb(2=
54,251,243)"><code class=3D"language-bash" style=3D"font-family:M=
enlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; font-=
size:undefined; padding:0px; color:inherit; white-space:pre-wrap;=
 background-color:transparent"><span class=3D"nv" style=3D"color:=
rgb(25,23,124)">$ </span>kinit -k -t hdfs.keytab hdfs/cdh1@JAVACH=
EN.COM=0A<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </sp=
an>kinit -k -t hdfs.keytab HTTP/cdh1@JAVACHEN.COM=0A</code></pre>=
</div><p style=3D"margin-top:0px; margin-bottom:10px">=C8=E7=B9=FB=
=B3=F6=CF=D6=B4=ED=CE=F3=A3=BA<code class=3D"prettyprint" style=3D=
"font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-=
size:13px; padding:2px 4px; color:rgb(199,37,78); background-colo=
r:rgb(254,251,243)">kinit: Key table entry=0A not found while get=
ting initial credentials</code>=A3=AC<br>=0A=D4=F2=C9=CF=C3=E6=B5=
=C4=BA=CF=B2=A2=D3=D0=CE=CA=CC=E2=A3=AC=D6=D8=D0=C2=D6=B4=D0=D0=C7=
=B0=C3=E6=B5=C4=B2=D9=D7=F7=A1=A3</p><h2 id=3D"4.3-=B2=BF=CA=F0ke=
rberos-keytab=CE=C4=BC=FE" style=3D"font-family:inherit; font-wei=
ght:500; line-height:1.1; margin-top:20px; margin-bottom:10px; fo=
nt-size:30px"><a name=3D"t19"></a>=0A4.3 =B2=BF=CA=F0kerberos key=
tab=CE=C4=BC=FE</h2><p style=3D"margin-top:0px; margin-bottom:10p=
x">=BF=BD=B1=B4 hdfs.keytab =CE=C4=BC=FE=B5=BD=C6=E4=CB=FB=BD=DA=B5=
=E3=B5=C4 /etc/hadoop/conf =C4=BF=C2=BC</p><div class=3D"highligh=
t"><pre style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas=
,'Courier New',monospace; font-size:13px; padding:9.5px; margin:1=
0px auto; line-height:1.42857143; color:rgb(51,51,51); word-break=
:break-all; word-wrap:break-word; max-width:98%; background-color=
:rgb(254,251,243)"><code class=3D"language-bash" style=3D"font-fa=
mily:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace;=
 font-size:undefined; padding:0px; color:inherit; white-space:pre=
-wrap; background-color:transparent"><span class=3D"nv" style=3D"=
color:rgb(25,23,124)">$ </span><span class=3D"nb" style=3D"color:=
rgb(0,128,0)">cd</span> /var/kerberos/krb5kdc/=0A=0A<span class=3D=
"nv" style=3D"color:rgb(25,23,124)">$ </span>scp hdfs.keytab cdh1=
:/etc/hadoop/conf=0A<span class=3D"nv" style=3D"color:rgb(25,23,1=
24)">$ </span>scp hdfs.keytab cdh2:/etc/hadoop/conf=0A<span class=
=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>scp hdfs.keytab c=
dh3:/etc/hadoop/conf=0A</code></pre></div><p style=3D"margin-top:=
0px; margin-bottom:10px">=B2=A2=C9=E8=D6=C3=C8=A8=CF=DE=A3=AC=B7=D6=
=B1=F0=D4=DA cdh1=A1=A2cdh2=A1=A2cdh3 =C9=CF=D6=B4=D0=D0=A3=BA</p=
><div class=3D"highlight"><pre style=3D"overflow:auto; font-famil=
y:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px;=20=
padding:9.5px; margin:10px auto; line-height:1.42857143; color:rg=
b(51,51,51); word-break:break-all; word-wrap:break-word; max-widt=
h:98%; background-color:rgb(254,251,243)"><code class=3D"language=
-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier=
 New',Monaco,monospace; font-size:undefined; padding:0px; color:i=
nherit; white-space:pre-wrap; background-color:transparent"><span=
 class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>ssh cdh1 <s=
pan class=3D"s2" style=3D"color:rgb(186,33,33)">"chown hdfs:hadoo=
p /etc/hadoop/conf/hdfs.keytab ;chmod 400 /etc/hadoop/conf/hdfs.k=
eytab"</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$=20=
</span>ssh cdh2 <span class=3D"s2" style=3D"color:rgb(186,33,33)"=
>"chown hdfs:hadoop /etc/hadoop/conf/hdfs.keytab ;chmod 400 /etc/=
hadoop/conf/hdfs.keytab"</span><span class=3D"nv" style=3D"color:=
rgb(25,23,124)">$ </span>ssh cdh3 <span class=3D"s2" style=3D"col=
or:rgb(186,33,33)">"chown hdfs:hadoop /etc/hadoop/conf/hdfs.keyta=
b ;chmod 400 /etc/hadoop/conf/hdfs.keytab"</span></code></pre></d=
iv><p style=3D"margin-top:0px; margin-bottom:10px">=D3=C9=D3=DA k=
eytab =0A=CF=E0=B5=B1=D3=DA=D3=D0=C1=CB=D3=C0=BE=C3=C6=BE=D6=A4=A3=
=AC=B2=BB=D0=E8=D2=AA=CC=E1=B9=A9=C3=DC=C2=EB(=C8=E7=B9=FB=D0=DE=B8=
=C4kdc=D6=D0=B5=C4principal=B5=C4=C3=DC=C2=EB=A3=AC=D4=F2=B8=C3ke=
ytab=BE=CD=BB=E1=CA=A7=D0=A7)=A3=AC=CB=F9=D2=D4=C6=E4=CB=FB=D3=C3=
=BB=A7=C8=E7=B9=FB=B6=D4=B8=C3=CE=C4=BC=FE=D3=D0=B6=C1=C8=A8=CF=DE=
=A3=AC=BE=CD=0A=BF=C9=D2=D4=C3=B0=B3=E4 keytab =D6=D0=D6=B8=B6=A8=
=B5=C4=D3=C3=BB=A7=C9=ED=B7=DD=B7=C3=CE=CA hadoop=A3=AC=CB=F9=D2=D4=
 keytab =CE=C4=BC=FE=D0=E8=D2=AA=C8=B7=B1=A3=D6=BB=B6=D4 owner =D3=
=D0=B6=C1=C8=A8=CF=DE(0400)</p><h2 id=3D"4.4-=D0=DE=B8=C4-hdfs-=C5=
=E4=D6=C3=CE=C4=BC=FE" style=3D"font-family:inherit; font-weight:=
500; line-height:1.1; margin-top:20px; margin-bottom:10px; font-s=
ize:30px"><a name=3D"t20"></a>=0A4.4 =D0=DE=B8=C4 hdfs =C5=E4=D6=C3=
=CE=C4=BC=FE</h2><p style=3D"margin-top:0px; margin-bottom:10px">=
=CF=C8=CD=A3=D6=B9=BC=AF=C8=BA=A3=BA</p><div class=3D"highlight">=
<pre style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'C=
ourier New',monospace; font-size:13px; padding:9.5px; margin:10px=
 auto; line-height:1.42857143; color:rgb(51,51,51); word-break:br=
eak-all; word-wrap:break-word; max-width:98%; background-color:rg=
b(254,251,243)"><code class=3D"language-bash" style=3D"font-famil=
y:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; fo=
nt-size:undefined; padding:0px; color:inherit; white-space:pre-wr=
ap; background-color:transparent"><span class=3D"nv" style=3D"col=
or:rgb(25,23,124)">$ </span><span class=3D"k" style=3D"color:rgb(=
0,128,0); font-weight:bold">for</span> x in <span class=3D"sb" st=
yle=3D"color:rgb(186,33,33)">`</span><span class=3D"nb" style=3D"=
color:rgb(0,128,0)">cd</span> /etc/init.d <span class=3D"p">;</sp=
an> ls hive-*<span class=3D"sb" style=3D"color:rgb(186,33,33)">`<=
/span> <span class=3D"p">;</span> <span class=3D"k" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">do</span> sudo service <span cl=
ass=3D"nv" style=3D"color:rgb(25,23,124)">$x</span> stop <span cl=
ass=3D"p">;</span> <span class=3D"k" style=3D"color:rgb(0,128,0);=
 font-weight:bold">done</span><span class=3D"nv" style=3D"color:r=
gb(25,23,124)">$ </span><span class=3D"k" style=3D"color:rgb(0,12=
8,0); font-weight:bold">for</span> x in <span class=3D"sb" style=3D=
"color:rgb(186,33,33)">`</span><span class=3D"nb" style=3D"color:=
rgb(0,128,0)">cd</span> /etc/init.d <span class=3D"p">;</span> ls=
 impala-*<span class=3D"sb" style=3D"color:rgb(186,33,33)">`</spa=
n> <span class=3D"p">;</span> <span class=3D"k" style=3D"color:rg=
b(0,128,0); font-weight:bold">do</span> sudo service <span class=3D=
"nv" style=3D"color:rgb(25,23,124)">$x</span> stop <span class=3D=
"p">;</span> <span class=3D"k" style=3D"color:rgb(0,128,0); font-=
weight:bold">done</span><span class=3D"nv" style=3D"color:rgb(25,=
23,124)">$ </span><span class=3D"k" style=3D"color:rgb(0,128,0);=20=
font-weight:bold">for</span> x in <span class=3D"sb" style=3D"col=
or:rgb(186,33,33)">`</span><span class=3D"nb" style=3D"color:rgb(=
0,128,0)">cd</span> /etc/init.d <span class=3D"p">;</span> ls had=
oop-*<span class=3D"sb" style=3D"color:rgb(186,33,33)">`</span> <=
span class=3D"p">;</span> <span class=3D"k" style=3D"color:rgb(0,=
128,0); font-weight:bold">do</span> sudo service <span class=3D"n=
v" style=3D"color:rgb(25,23,124)">$x</span> stop <span class=3D"p=
">;</span> <span class=3D"k" style=3D"color:rgb(0,128,0); font-we=
ight:bold">done</span><span class=3D"nv" style=3D"color:rgb(25,23=
,124)">$ </span><span class=3D"k" style=3D"color:rgb(0,128,0); fo=
nt-weight:bold">for</span> x in <span class=3D"sb" style=3D"color=
:rgb(186,33,33)">`</span><span class=3D"nb" style=3D"color:rgb(0,=
128,0)">cd</span> /etc/init.d <span class=3D"p">;</span> ls zooke=
eper-*<span class=3D"sb" style=3D"color:rgb(186,33,33)">`</span>=20=
<span class=3D"p">;</span> <span class=3D"k" style=3D"color:rgb(0=
,128,0); font-weight:bold">do</span> sudo service <span class=3D"=
nv" style=3D"color:rgb(25,23,124)">$x</span> stop <span class=3D"=
p">;</span> <span class=3D"k" style=3D"color:rgb(0,128,0); font-w=
eight:bold">done</span></code></pre></div><p style=3D"margin-top:=
0px; margin-bottom:10px">=D4=DA=BC=AF=C8=BA=D6=D0=CB=F9=D3=D0=BD=DA=
=B5=E3=B5=C4 core-site.xml =CE=C4=BC=FE=D6=D0=CC=ED=BC=D3=CF=C2=C3=
=E6=B5=C4=C5=E4=D6=C3:</p><div class=3D"highlight"><pre style=3D"=
overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',mo=
nospace; font-size:13px; padding:9.5px; margin:10px auto; line-he=
ight:1.42857143; color:rgb(51,51,51); word-break:break-all; word-=
wrap:break-word; max-width:98%; background-color:rgb(254,251,243)=
"><code class=3D"language-xml" style=3D"font-family:Menlo,'Andale=
 Mono',Consolas,'Courier New',Monaco,monospace; font-size:undefin=
ed; padding:0px; color:inherit; white-space:pre-wrap; background-=
color:transparent"><span class=3D"nt" style=3D"color:rgb(0,128,0)=
; font-weight:bold">&lt;property&gt;</span><span class=3D"nt" sty=
le=3D"color:rgb(0,128,0); font-weight:bold">&lt;name&gt;</span>ha=
doop.security.authentication<span class=3D"nt" style=3D"color:rgb=
(0,128,0); font-weight:bold">&lt;/name&gt;</span><span class=3D"n=
t" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;value&gt;</=
span>kerberos<span class=3D"nt" style=3D"color:rgb(0,128,0); font=
-weight:bold">&lt;/value&gt;</span><span class=3D"nt" style=3D"co=
lor:rgb(0,128,0); font-weight:bold">&lt;/property&gt;</span><span=
 class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;=
property&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0)=
; font-weight:bold">&lt;name&gt;</span>hadoop.security.authorizat=
ion<span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bo=
ld">&lt;/name&gt;</span><span class=3D"nt" style=3D"color:rgb(0,1=
28,0); font-weight:bold">&lt;value&gt;</span>true<span class=3D"n=
t" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/value&gt;<=
/span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight=
:bold">&lt;/property&gt;</span></code></pre></div><p style=3D"mar=
gin-top:0px; margin-bottom:10px">=D4=DA=BC=AF=C8=BA=D6=D0=CB=F9=D3=
=D0=BD=DA=B5=E3=B5=C4 hdfs-site.xml =CE=C4=BC=FE=D6=D0=CC=ED=BC=D3=
=CF=C2=C3=E6=B5=C4=C5=E4=D6=C3=A3=BA</p><div class=3D"highlight">=
<pre style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'C=
ourier New',monospace; font-size:13px; padding:9.5px; margin:10px=
 auto; line-height:1.42857143; color:rgb(51,51,51); word-break:br=
eak-all; word-wrap:break-word; max-width:98%; background-color:rg=
b(254,251,243)"><code class=3D"language-xml" style=3D"font-family=
:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; fon=
t-size:undefined; padding:0px; color:inherit; white-space:pre-wra=
p; background-color:transparent"><span class=3D"nt" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">&lt;property&gt;</span><span cl=
ass=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;nam=
e&gt;</span>dfs.block.access.token.enable<span class=3D"nt" style=
=3D"color:rgb(0,128,0); font-weight:bold">&lt;/name&gt;</span><sp=
an class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&l=
t;value&gt;</span>true<span class=3D"nt" style=3D"color:rgb(0,128=
,0); font-weight:bold">&lt;/value&gt;</span><span class=3D"nt" st=
yle=3D"color:rgb(0,128,0); font-weight:bold">&lt;/property&gt;</s=
pan><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:b=
old">&lt;property&gt;</span><span class=3D"nt" style=3D"color:rgb=
(0,128,0); font-weight:bold">&lt;name&gt;</span>dfs.datanode.data=
.dir.perm<span class=3D"nt" style=3D"color:rgb(0,128,0); font-wei=
ght:bold">&lt;/name&gt;</span><span class=3D"nt" style=3D"color:r=
gb(0,128,0); font-weight:bold">&lt;value&gt;</span>700<span class=
=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/value=
&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-w=
eight:bold">&lt;/property&gt;</span><span class=3D"nt" style=3D"c=
olor:rgb(0,128,0); font-weight:bold">&lt;property&gt;</span><span=
 class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;=
name&gt;</span>dfs.namenode.keytab.file<span class=3D"nt" style=3D=
"color:rgb(0,128,0); font-weight:bold">&lt;/name&gt;</span><span=20=
class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;v=
alue&gt;</span>/etc/hadoop/conf/hdfs.keytab<span class=3D"nt" sty=
le=3D"color:rgb(0,128,0); font-weight:bold">&lt;/value&gt;</span>=
<span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold"=
>&lt;/property&gt;</span><span class=3D"nt" style=3D"color:rgb(0,=
128,0); font-weight:bold">&lt;property&gt;</span><span class=3D"n=
t" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;name&gt;</s=
pan>dfs.namenode.kerberos.principal<span class=3D"nt" style=3D"co=
lor:rgb(0,128,0); font-weight:bold">&lt;/name&gt;</span><span cla=
ss=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;valu=
e&gt;</span>hdfs/_HOST@JAVACHEN.COM<span class=3D"nt" style=3D"co=
lor:rgb(0,128,0); font-weight:bold">&lt;/value&gt;</span><span cl=
ass=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/pr=
operty&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0);=20=
font-weight:bold">&lt;property&gt;</span><span class=3D"nt" style=
=3D"color:rgb(0,128,0); font-weight:bold">&lt;name&gt;</span>dfs.=
namenode.kerberos.https.principal<span class=3D"nt" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">&lt;/name&gt;</span><span class=
=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;value&=
gt;</span>HTTP/_HOST@JAVACHEN.COM<span class=3D"nt" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">&lt;/value&gt;</span><span clas=
s=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/prop=
erty&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0); fo=
nt-weight:bold">&lt;property&gt;</span><span class=3D"nt" style=3D=
"color:rgb(0,128,0); font-weight:bold">&lt;name&gt;</span>dfs.dat=
anode.address<span class=3D"nt" style=3D"color:rgb(0,128,0); font=
-weight:bold">&lt;/name&gt;</span><span class=3D"nt" style=3D"col=
or:rgb(0,128,0); font-weight:bold">&lt;value&gt;</span>0.0.0.0:10=
04<span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bol=
d">&lt;/value&gt;</span><span class=3D"nt" style=3D"color:rgb(0,1=
28,0); font-weight:bold">&lt;/property&gt;</span><span class=3D"n=
t" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;property&gt=
;</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weig=
ht:bold">&lt;name&gt;</span>dfs.datanode.http.address<span class=3D=
"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/name&gt;=
</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weigh=
t:bold">&lt;value&gt;</span>0.0.0.0:1006<span class=3D"nt" style=3D=
"color:rgb(0,128,0); font-weight:bold">&lt;/value&gt;</span><span=
 class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;=
/property&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0=
); font-weight:bold">&lt;property&gt;</span><span class=3D"nt" st=
yle=3D"color:rgb(0,128,0); font-weight:bold">&lt;name&gt;</span>d=
fs.datanode.keytab.file<span class=3D"nt" style=3D"color:rgb(0,12=
8,0); font-weight:bold">&lt;/name&gt;</span><span class=3D"nt" st=
yle=3D"color:rgb(0,128,0); font-weight:bold">&lt;value&gt;</span>=
/etc/hadoop/conf/hdfs.keytab<span class=3D"nt" style=3D"color:rgb=
(0,128,0); font-weight:bold">&lt;/value&gt;</span><span class=3D"=
nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/property&=
gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-we=
ight:bold">&lt;property&gt;</span><span class=3D"nt" style=3D"col=
or:rgb(0,128,0); font-weight:bold">&lt;name&gt;</span>dfs.datanod=
e.kerberos.principal<span class=3D"nt" style=3D"color:rgb(0,128,0=
); font-weight:bold">&lt;/name&gt;</span><span class=3D"nt" style=
=3D"color:rgb(0,128,0); font-weight:bold">&lt;value&gt;</span>hdf=
s/_HOST@JAVACHEN.COM<span class=3D"nt" style=3D"color:rgb(0,128,0=
); font-weight:bold">&lt;/value&gt;</span><span class=3D"nt" styl=
e=3D"color:rgb(0,128,0); font-weight:bold">&lt;/property&gt;</spa=
n><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bol=
d">&lt;property&gt;</span><span class=3D"nt" style=3D"color:rgb(0=
,128,0); font-weight:bold">&lt;name&gt;</span>dfs.datanode.kerber=
os.https.principal<span class=3D"nt" style=3D"color:rgb(0,128,0);=
 font-weight:bold">&lt;/name&gt;</span><span class=3D"nt" style=3D=
"color:rgb(0,128,0); font-weight:bold">&lt;value&gt;</span>HTTP/_=
HOST@JAVACHEN.COM<span class=3D"nt" style=3D"color:rgb(0,128,0);=20=
font-weight:bold">&lt;/value&gt;</span><span class=3D"nt" style=3D=
"color:rgb(0,128,0); font-weight:bold">&lt;/property&gt;</span></=
code></pre></div><p style=3D"margin-top:0px; margin-bottom:10px">=
=C8=E7=B9=FB=CF=EB=BF=AA=C6=F4 SSL=A3=AC=C7=EB=CC=ED=BC=D3=A3=A8=B1=
=BE=CE=C4=B2=BB=B6=D4=D5=E2=B2=BF=B7=D6=D7=F6=CB=B5=C3=F7=A3=A9=A3=
=BA</p><div class=3D"highlight"><pre style=3D"overflow:auto; font=
-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:=
13px; padding:9.5px; margin:10px auto; line-height:1.42857143; co=
lor:rgb(51,51,51); word-break:break-all; word-wrap:break-word; ma=
x-width:98%; background-color:rgb(254,251,243)"><code class=3D"la=
nguage-xml" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Co=
urier New',Monaco,monospace; font-size:undefined; padding:0px; co=
lor:inherit; white-space:pre-wrap; background-color:transparent">=
<span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold"=
>&lt;property&gt;</span><span class=3D"nt" style=3D"color:rgb(0,1=
28,0); font-weight:bold">&lt;name&gt;</span>dfs.http.policy<span=20=
class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/=
name&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0); fo=
nt-weight:bold">&lt;value&gt;</span>HTTPS_ONLY<span class=3D"nt"=20=
style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/value&gt;</sp=
an><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bo=
ld">&lt;/property&gt;</span></code></pre></div><p style=3D"margin=
-top:0px; margin-bottom:10px">=C8=E7=B9=FB HDFS =C5=E4=D6=C3=C1=CB=
 QJM HA=A3=AC=D4=F2=D0=E8=D2=AA=CC=ED=BC=D3=A3=A8=C1=ED=CD=E2=A3=AC=
=C4=E3=BB=B9=D2=AA=D4=DA zookeeper =C9=CF=C5=E4=D6=C3 kerberos=A3=
=A9=A3=BA</p><div class=3D"highlight"><pre style=3D"overflow:auto=
; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font=
-size:13px; padding:9.5px; margin:10px auto; line-height:1.428571=
43; color:rgb(51,51,51); word-break:break-all; word-wrap:break-wo=
rd; max-width:98%; background-color:rgb(254,251,243)"><code class=
=3D"language-xml" style=3D"font-family:Menlo,'Andale Mono',Consol=
as,'Courier New',Monaco,monospace; font-size:undefined; padding:0=
px; color:inherit; white-space:pre-wrap; background-color:transpa=
rent"><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight=
:bold">&lt;property&gt;</span><span class=3D"nt" style=3D"color:r=
gb(0,128,0); font-weight:bold">&lt;name&gt;</span>dfs.journalnode=
.keytab.file<span class=3D"nt" style=3D"color:rgb(0,128,0); font-=
weight:bold">&lt;/name&gt;</span><span class=3D"nt" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">&lt;value&gt;</span>/etc/hadoop=
/conf/hdfs.keytab<span class=3D"nt" style=3D"color:rgb(0,128,0);=20=
font-weight:bold">&lt;/value&gt;</span><span class=3D"nt" style=3D=
"color:rgb(0,128,0); font-weight:bold">&lt;/property&gt;</span><s=
pan class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&=
lt;property&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128=
,0); font-weight:bold">&lt;name&gt;</span>dfs.journalnode.kerbero=
s.principal<span class=3D"nt" style=3D"color:rgb(0,128,0); font-w=
eight:bold">&lt;/name&gt;</span><span class=3D"nt" style=3D"color=
:rgb(0,128,0); font-weight:bold">&lt;value&gt;</span>hdfs/_HOST@J=
AVACHEN.COM<span class=3D"nt" style=3D"color:rgb(0,128,0); font-w=
eight:bold">&lt;/value&gt;</span><span class=3D"nt" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">&lt;/property&gt;</span><span c=
lass=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;pr=
operty&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0);=20=
font-weight:bold">&lt;name&gt;</span>dfs.journalnode.kerberos.int=
ernal.spnego.principal<span class=3D"nt" style=3D"color:rgb(0,128=
,0); font-weight:bold">&lt;/name&gt;</span><span class=3D"nt" sty=
le=3D"color:rgb(0,128,0); font-weight:bold">&lt;value&gt;</span>H=
TTP/_HOST@JAVACHEN.COM<span class=3D"nt" style=3D"color:rgb(0,128=
,0); font-weight:bold">&lt;/value&gt;</span><span class=3D"nt" st=
yle=3D"color:rgb(0,128,0); font-weight:bold">&lt;/property&gt;</s=
pan></code></pre></div><p style=3D"margin-top:0px; margin-bottom:=
10px">=C8=E7=B9=FB=C5=E4=D6=C3=C1=CB WebHDFS=A3=AC=D4=F2=CC=ED=BC=
=D3=A3=BA</p><div class=3D"highlight"><pre style=3D"overflow:auto=
; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font=
-size:13px; padding:9.5px; margin:10px auto; line-height:1.428571=
43; color:rgb(51,51,51); word-break:break-all; word-wrap:break-wo=
rd; max-width:98%; background-color:rgb(254,251,243)"><code class=
=3D"language-xml" style=3D"font-family:Menlo,'Andale Mono',Consol=
as,'Courier New',Monaco,monospace; font-size:undefined; padding:0=
px; color:inherit; white-space:pre-wrap; background-color:transpa=
rent"><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight=
:bold">&lt;property&gt;</span><span class=3D"nt" style=3D"color:r=
gb(0,128,0); font-weight:bold">&lt;name&gt;</span>dfs.webhdfs.ena=
bled<span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight:b=
old">&lt;/name&gt;</span><span class=3D"nt" style=3D"color:rgb(0,=
128,0); font-weight:bold">&lt;value&gt;</span>true<span class=3D"=
nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/value&gt;=
</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weigh=
t:bold">&lt;/property&gt;</span><span class=3D"nt" style=3D"color=
:rgb(0,128,0); font-weight:bold">&lt;property&gt;</span><span cla=
ss=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;name=
&gt;</span>dfs.web.authentication.kerberos.principal<span class=3D=
"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/name&gt;=
</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weigh=
t:bold">&lt;value&gt;</span>HTTP/_HOST@JAVACHEN.COM<span class=3D=
"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/value&gt=
;</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weig=
ht:bold">&lt;/property&gt;</span><span class=3D"nt" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">&lt;property&gt;</span><span cl=
ass=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;nam=
e&gt;</span>dfs.web.authentication.kerberos.keytab<span class=3D"=
nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/name&gt;<=
/span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-weight=
:bold">&lt;value&gt;</span>/etc/hadoop/conf/hdfs.keytab<span clas=
s=3D"nt" style=3D"color:rgb(0,128,0); font-weight:bold">&lt;/valu=
e&gt;</span><span class=3D"nt" style=3D"color:rgb(0,128,0); font-=
weight:bold">&lt;/property&gt;</span></code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=C5=E4=D6=C3=D6=D0=D3=D0=BC=B8=
=B5=E3=D2=AA=D7=A2=D2=E2=B5=C4=A3=BA</p><ul style=3D"margin-top:0=
px; margin-bottom:10px"><li style=3D"margin:3px 0px">1.&nbsp;<cod=
e class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Consola=
s,'Courier New',monospace; font-size:13px; padding:2px 4px; color=
:rgb(199,37,78); background-color:rgb(254,251,243)">dfs.datanode.=
address</code>=B1=ED=CA=BE data transceiver=0A RPC server =CB=F9=B0=
=F3=B6=A8=B5=C4 hostname =BB=F2 IP =B5=D8=D6=B7=A3=AC=C8=E7=B9=FB=
=BF=AA=C6=F4 security=A3=AC=B6=CB=BF=DA=BA=C5=B1=D8=D0=EB=D0=A1=D3=
=DA&nbsp;<code class=3D"prettyprint" style=3D"font-family:Menlo,M=
onaco,Consolas,'Courier New',monospace; font-size:13px; padding:2=
px 4px; color:rgb(199,37,78); background-color:rgb(254,251,243)">=
1024</code>(privileged=0A port)=A3=AC=B7=F1=D4=F2=B5=C4=BB=B0=C6=F4=
=B6=AF datanode =CA=B1=BA=F2=BB=E1=B1=A8&nbsp;<code class=3D"pret=
typrint" style=3D"font-family:Menlo,Monaco,Consolas,'Courier New'=
,monospace; font-size:13px; padding:2px 4px; color:rgb(199,37,78)=
; background-color:rgb(254,251,243)">Cannot start secure cluster=20=
without privileged=0A resources</code>&nbsp;=B4=ED=CE=F3</li><li=20=
style=3D"margin:3px 0px">2. principal =D6=D0=B5=C4 instance =B2=BF=
=B7=D6=BF=C9=D2=D4=CA=B9=D3=C3&nbsp;<code class=3D"prettyprint" s=
tyle=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospace=
; font-size:13px; padding:2px 4px; color:rgb(199,37,78); backgrou=
nd-color:rgb(254,251,243)">_HOST</code>&nbsp;=B1=EA=BC=C7=A3=AC=CF=
=B5=CD=B3=BB=E1=D7=D4=B6=AF=CC=E6=BB=BB=CB=FC=CE=AA=C8=AB=B3=C6=D3=
=F2=C3=FB</li><li style=3D"margin:3px 0px">3. =C8=E7=B9=FB=BF=AA=C6=
=F4=C1=CB security, hadoop =BB=E1=B6=D4 hdfs block data(=D3=C9&nb=
sp;<code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,=
Consolas,'Courier New',monospace; font-size:13px; padding:2px 4px=
; color:rgb(199,37,78); background-color:rgb(254,251,243)">dfs.da=
ta.dir</code>&nbsp;=D6=B8=B6=A8)=D7=F6=0A permission check=A3=AC=B7=
=BD=CA=BD=D3=C3=BB=A7=B5=C4=B4=FA=C2=EB=B2=BB=CA=C7=B5=F7=D3=C3hd=
fs api=B6=F8=CA=C7=D6=B1=BD=D3=B1=BE=B5=D8=B6=C1block data=A3=AC=D5=
=E2=D1=F9=BE=CD=C8=C6=B9=FD=C1=CBkerberos=BA=CD=CE=C4=BC=FE=C8=A8=
=CF=DE=D1=E9=D6=A4=A3=AC=B9=DC=C0=ED=D4=B1=BF=C9=D2=D4=CD=A8=B9=FD=
=C9=E8=D6=C3&nbsp;<code class=3D"prettyprint" style=3D"font-famil=
y:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px;=20=
padding:2px 4px; color:rgb(199,37,78); background-color:rgb(254,2=
51,243)">dfs.datanode.data.dir.perm</code>&nbsp;=C0=B4=D0=DE=B8=C4=
=0A datanode =CE=C4=BC=FE=C8=A8=CF=DE=A3=AC=D5=E2=C0=EF=CE=D2=C3=C7=
=C9=E8=D6=C3=CE=AA700</li></ul><h2 id=3D"4.5-=BC=EC=B2=E9=BC=AF=C8=
=BA=C9=CF=B5=C4-hdfs-=BA=CD=B1=BE=B5=D8=CE=C4=BC=FE=B5=C4=C8=A8=CF=
=DE" style=3D"font-family:inherit; font-weight:500; line-height:1=
.1; margin-top:20px; margin-bottom:10px; font-size:30px"><a name=3D=
"t21"></a>=0A4.5 =BC=EC=B2=E9=BC=AF=C8=BA=C9=CF=B5=C4 HDFS =BA=CD=
=B1=BE=B5=D8=CE=C4=BC=FE=B5=C4=C8=A8=CF=DE</h2><p style=3D"margin=
-top:0px; margin-bottom:10px">=C7=EB=B2=CE=BF=BC&nbsp;<a target=3D=
"_blank" href=3D"http://www.cloudera.com/content/cloudera/en/docu=
mentation/core/latest/topics/cdh_sg_users_groups_verify.html" sty=
le=3D"text-decoration: none;">Verify=0A User Accounts and Groups=20=
in CDH 5 Due to Security</a>&nbsp;=BB=F2=D5=DF&nbsp;<a target=3D"=
_blank" href=3D"http://hadoop.apache.org/docs/r2.5.0/hadoop-proje=
ct-dist/hadoop-common/SecureMode.html" style=3D"text-decoration:=20=
none;">Hadoop in Secure=0A Mode</a>=A1=A3</p><h2 id=3D"4.6-=C6=F4=
=B6=AF-namenode" style=3D"font-family:inherit; font-weight:500; l=
ine-height:1.1; margin-top:20px; margin-bottom:10px; font-size:30=
px"><a name=3D"t22"></a>=0A4.6 =C6=F4=B6=AF NameNode</h2><p style=
=3D"margin-top:0px; margin-bottom:10px">=C6=F4=B6=AF=D6=AE=C7=B0=A3=
=AC=C7=EB=C8=B7=C8=CF JCE jar =D2=D1=BE=AD=CC=E6=BB=BB=A3=AC=C7=EB=
=B2=CE=BF=BC=C7=B0=C3=E6=B5=C4=CB=B5=C3=F7=A1=A3</p><p style=3D"m=
argin-top:0px; margin-bottom:10px">=D4=DA=C3=BF=B8=F6=BD=DA=B5=E3=
=C9=CF=BB=F1=C8=A1 root =D3=C3=BB=A7=B5=C4 ticket=A3=AC=D5=E2=C0=EF=
 root =CE=AA=D6=AE=C7=B0=B4=B4=BD=A8=B5=C4 root/admin =B5=C4=C3=DC=
=C2=EB=A1=A3</p><div class=3D"highlight"><pre style=3D"overflow:a=
uto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; f=
ont-size:13px; padding:9.5px; margin:10px auto; line-height:1.428=
57143; color:rgb(51,51,51); word-break:break-all; word-wrap:break=
-word; max-width:98%; background-color:rgb(254,251,243)"><code cl=
ass=3D"language-bash" style=3D"font-family:Menlo,'Andale Mono',Co=
nsolas,'Courier New',Monaco,monospace; font-size:undefined; paddi=
ng:0px; color:inherit; white-space:pre-wrap; background-color:tra=
nsparent"><span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </s=
pan>ssh cdh1 <span class=3D"s2" style=3D"color:rgb(186,33,33)">"e=
cho root|kinit root/admin"</span><span class=3D"nv" style=3D"colo=
r:rgb(25,23,124)">$ </span>ssh cdh1 <span class=3D"s2" style=3D"c=
olor:rgb(186,33,33)">"echo root|kinit root/admin"</span><span cla=
ss=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>ssh cdh1 <span=20=
class=3D"s2" style=3D"color:rgb(186,33,33)">"echo root|kinit root=
/admin"</span></code></pre></div><p style=3D"margin-top:0px; marg=
in-bottom:10px">=BB=F1=C8=A1 cdh1=B5=C4 ticket=A3=BA</p><div clas=
s=3D"highlight"><pre style=3D"overflow:auto; font-family:Menlo,Mo=
naco,Consolas,'Courier New',monospace; font-size:13px; padding:9.=
5px; margin:10px auto; line-height:1.42857143; color:rgb(51,51,51=
); word-break:break-all; word-wrap:break-word; max-width:98%; bac=
kground-color:rgb(254,251,243)"><code class=3D"language-bash" sty=
le=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier New',Mona=
co,monospace; font-size:undefined; padding:0px; color:inherit; wh=
ite-space:pre-wrap; background-color:transparent"><span class=3D"=
nv" style=3D"color:rgb(25,23,124)">$ </span>kinit -k -t /etc/hado=
op/conf/hdfs.keytab hdfs/cdh1@JAVACHEN.COM=0A</code></pre></div><=
p style=3D"margin-top:0px; margin-bottom:10px">=C8=E7=B9=FB=B3=F6=
=CF=D6=CF=C2=C3=E6=D2=EC=B3=A3&nbsp;<code class=3D"prettyprint" s=
tyle=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospace=
; font-size:13px; padding:2px 4px; color:rgb(199,37,78); backgrou=
nd-color:rgb(254,251,243)">kinit: Password incorrect=0A while get=
ting initial credentials<br></code>=A3=AC=D4=F2=D6=D8=D0=C2=B5=BC=
=B3=F6 keytab =D4=D9=CA=D4=CA=D4=A1=A3</p><p style=3D"margin-top:=
0px; margin-bottom:10px">=C8=BB=BA=F3=C6=F4=B6=AF=B7=FE=CE=F1=A3=AC=
=B9=DB=B2=EC=C8=D5=D6=BE=A3=BA</p><div class=3D"highlight"><pre s=
tyle=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier=
 New',monospace; font-size:13px; padding:9.5px; margin:10px auto;=
 line-height:1.42857143; color:rgb(51,51,51); word-break:break-al=
l; word-wrap:break-word; max-width:98%; background-color:rgb(254,=
251,243)"><code class=3D"language-bash" style=3D"font-family:Menl=
o,'Andale Mono',Consolas,'Courier New',Monaco,monospace; font-siz=
e:undefined; padding:0px; color:inherit; white-space:pre-wrap; ba=
ckground-color:transparent"><span class=3D"nv" style=3D"color:rgb=
(25,23,124)">$ </span>/etc/init.d/hadoop-hdfs-namenode start=0A</=
code></pre></div><p style=3D"margin-top:0px; margin-bottom:10px">=
=D1=E9=D6=A4 NameNode =CA=C7=B7=F1=C6=F4=B6=AF=A3=AC=D2=BB=CA=C7=B4=
=F2=BF=AA web =BD=E7=C3=E6=B2=E9=BF=B4=C6=F4=B6=AF=D7=B4=CC=AC=A3=
=AC=D2=BB=CA=C7=D4=CB=D0=D0=CF=C2=C3=E6=C3=FC=C1=EE=B2=E9=BF=B4 h=
dfs=A3=BA</p><div class=3D"highlight"><pre style=3D"overflow:auto=
; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font=
-size:13px; padding:9.5px; margin:10px auto; line-height:1.428571=
43; color:rgb(51,51,51); word-break:break-all; word-wrap:break-wo=
rd; max-width:98%; background-color:rgb(254,251,243)"><code class=
=3D"language-bash" style=3D"font-family:Menlo,'Andale Mono',Conso=
las,'Courier New',Monaco,monospace; font-size:undefined; padding:=
0px; color:inherit; white-space:pre-wrap; background-color:transp=
arent"><span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span=
>hadoop fs -ls /=0AFound <span class=3D"m" style=3D"color:rgb(102=
,102,102)">4</span> items=0Adrwxrwxrwx   - yarn hadoop          <=
span class=3D"m" style=3D"color:rgb(102,102,102)">0</span> 2014-0=
6-26 15:24 /logroot=0Adrwxrwxrwt   - hdfs hadoop          <span c=
lass=3D"m" style=3D"color:rgb(102,102,102)">0</span> 2014-11-04 1=
0:44 /tmp=0Adrwxr-xr-x   - hdfs hadoop          <span class=3D"m"=
 style=3D"color:rgb(102,102,102)">0</span> 2014-08-10 10:53 /user=
=0Adrwxr-xr-x   - hdfs hadoop          <span class=3D"m" style=3D=
"color:rgb(102,102,102)">0</span> 2013-05-20 22:52 /var=0A</code>=
</pre></div><p style=3D"margin-top:0px; margin-bottom:10px">=C8=E7=
=B9=FB=D4=DA=C4=E3=B5=C4=C6=BE=BE=DD=BB=BA=B4=E6=D6=D0=C3=BB=D3=D0=
=D3=D0=D0=A7=B5=C4 kerberos ticket=A3=AC=D6=B4=D0=D0=C9=CF=C3=E6=C3=
=FC=C1=EE=BD=AB=BB=E1=CA=A7=B0=DC=A3=AC=BD=AB=BB=E1=B3=F6=CF=D6=CF=
=C2=C3=E6=B5=C4=B4=ED=CE=F3=A3=BA</p><div class=3D"highlight"><pr=
e style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Cour=
ier New',monospace; font-size:13px; padding:9.5px; margin:10px au=
to; line-height:1.42857143; color:rgb(51,51,51); word-break:break=
-all; word-wrap:break-word; max-width:98%; background-color:rgb(2=
54,251,243)"><code class=3D"language-text" style=3D"font-family:M=
enlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; font-=
size:undefined; padding:0px; color:inherit; white-space:pre-wrap;=
 background-color:transparent">14/11/04 12:08:12 WARN ipc.Client:=
 Exception encountered while connecting to the server : javax.sec=
urity.sasl.SaslException:=0AGSS initiate failed [Caused by GS***c=
eption: No valid credentials provided (Mechanism level: Failed to=
 find any Kerberos tgt)]=0ABad connection to FS. command aborted.=
 exception: Call to cdh1/192.168.56.121:8020 failed on local exce=
ption: java.io.IOException:=0Ajavax.security.sasl.SaslException:=20=
GSS initiate failed [Caused by GS***ception: No valid credentials=
 provided (Mechanism level: Failed to find any Kerberos tgt)]=0A<=
/code></pre></div><h2 id=3D"4.6-=C6=F4=B6=AFdatanode" style=3D"fo=
nt-family:inherit; font-weight:500; line-height:1.1; margin-top:2=
0px; margin-bottom:10px; font-size:30px"><a name=3D"t23"></a>=0A4=
.6 =C6=F4=B6=AFDataNode</h2><p style=3D"margin-top:0px; margin-bo=
ttom:10px">DataNode =D0=E8=D2=AA=CD=A8=B9=FD JSVC =C6=F4=B6=AF=A1=
=A3=CA=D7=CF=C8=BC=EC=B2=E9=CA=C7=B7=F1=B0=B2=D7=B0=C1=CB JSVC =C3=
=FC=C1=EE=A3=AC=C8=BB=BA=F3=C5=E4=D6=C3=BB=B7=BE=B3=B1=E4=C1=BF=A1=
=A3</p><p style=3D"margin-top:0px; margin-bottom:10px">=D4=DA cdh=
1 =BD=DA=B5=E3=B2=E9=BF=B4=CA=C7=B7=F1=B0=B2=D7=B0=C1=CB JSVC=A3=BA=
</p><div class=3D"highlight"><pre style=3D"overflow:auto; font-fa=
mily:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13p=
x; padding:9.5px; margin:10px auto; line-height:1.42857143; color=
:rgb(51,51,51); word-break:break-all; word-wrap:break-word; max-w=
idth:98%; background-color:rgb(254,251,243)"><code class=3D"langu=
age-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Cour=
ier New',Monaco,monospace; font-size:undefined; padding:0px; colo=
r:inherit; white-space:pre-wrap; background-color:transparent"><s=
pan class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>ls /usr/=
lib/bigtop-utils/=0Abigtop-detect-classpath  bigtop-detect-javaho=
me  bigtop-detect-javalibs  jsvc=0A</code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=C8=BB=BA=F3=B1=E0=BC=AD&nbs=
p;<code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,C=
onsolas,'Courier New',monospace; font-size:13px; padding:2px 4px;=
 color:rgb(199,37,78); background-color:rgb(254,251,243)">/etc/de=
fault/hadoop-hdfs-datanode</code>=A3=AC=C8=A1=CF=FB=B6=D4=CF=C2=C3=
=E6=B5=C4=D7=A2=CA=CD=B2=A2=CC=ED=BC=D3=D2=BB=D0=D0=C9=E8=D6=C3&n=
bsp;<code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco=
,Consolas,'Courier New',monospace; font-size:13px; padding:2px 4p=
x; color:rgb(199,37,78); background-color:rgb(254,251,243)">JSVC_=
HOME</code>=A3=AC=D0=DE=B8=C4=C8=E7=CF=C2=A3=BA</p><div class=3D"=
highlight"><pre style=3D"overflow:auto; font-family:Menlo,Monaco,=
Consolas,'Courier New',monospace; font-size:13px; padding:9.5px;=20=
margin:10px auto; line-height:1.42857143; color:rgb(51,51,51); wo=
rd-break:break-all; word-wrap:break-word; max-width:98%; backgrou=
nd-color:rgb(254,251,243)"><code class=3D"language-bash" style=3D=
"font-family:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,mo=
nospace; font-size:undefined; padding:0px; color:inherit; white-s=
pace:pre-wrap; background-color:transparent"><span class=3D"nb" s=
tyle=3D"color:rgb(0,128,0)">export </span><span class=3D"nv" styl=
e=3D"color:rgb(25,23,124)">HADOOP_SECURE_DN_USER</span><span clas=
s=3D"o" style=3D"color:rgb(102,102,102)">=3D</span>hdfs=0A<span c=
lass=3D"nb" style=3D"color:rgb(0,128,0)">export </span><span clas=
s=3D"nv" style=3D"color:rgb(25,23,124)">HADOOP_SECURE_DN_PID_DIR<=
/span><span class=3D"o" style=3D"color:rgb(102,102,102)">=3D</spa=
n>/var/run/hadoop-hdfs=0A<span class=3D"nb" style=3D"color:rgb(0,=
128,0)">export </span><span class=3D"nv" style=3D"color:rgb(25,23=
,124)">HADOOP_SECURE_DN_LOG_DIR</span><span class=3D"o" style=3D"=
color:rgb(102,102,102)">=3D</span>/var/log/hadoop-hdfs=0A=0A<span=
 class=3D"nb" style=3D"color:rgb(0,128,0)">export </span><span cl=
ass=3D"nv" style=3D"color:rgb(25,23,124)">JSVC_HOME</span><span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">=3D</span>/usr/lib/bi=
gtop-utils=0A</code></pre></div><p style=3D"margin-top:0px; margi=
n-bottom:10px">=BD=AB=B8=C3=CE=C4=BC=FE=CD=AC=B2=BD=B5=BD=C6=E4=CB=
=FB=BD=DA=B5=E3=A3=BA</p><div class=3D"highlight"><pre style=3D"o=
verflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',mon=
ospace; font-size:13px; padding:9.5px; margin:10px auto; line-hei=
ght:1.42857143; color:rgb(51,51,51); word-break:break-all; word-w=
rap:break-word; max-width:98%; background-color:rgb(254,251,243)"=
><code class=3D"language-bash" style=3D"font-family:Menlo,'Andale=
 Mono',Consolas,'Courier New',Monaco,monospace; font-size:undefin=
ed; padding:0px; color:inherit; white-space:pre-wrap; background-=
color:transparent"><span class=3D"nv" style=3D"color:rgb(25,23,12=
4)">$ </span>scp /etc/default/hadoop-hdfs-datanode cdh2:/etc/defa=
ult/hadoop-hdfs-datanode=0A<span class=3D"nv" style=3D"color:rgb(=
25,23,124)">$ </span>scp /etc/default/hadoop-hdfs-datanode cdh3:/=
etc/default/hadoop-hdfs-datanode=0A</code></pre></div><p style=3D=
"margin-top:0px; margin-bottom:10px">=B7=D6=B1=F0=D4=DA cdh2=A1=A2=
cdh3 =BB=F1=C8=A1 ticket =C8=BB=BA=F3=C6=F4=B6=AF=B7=FE=CE=F1=A3=BA=
</p><div class=3D"highlight"><pre style=3D"overflow:auto; font-fa=
mily:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13p=
x; padding:9.5px; margin:10px auto; line-height:1.42857143; color=
:rgb(51,51,51); word-break:break-all; word-wrap:break-word; max-w=
idth:98%; background-color:rgb(254,251,243)"><code class=3D"langu=
age-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Cour=
ier New',Monaco,monospace; font-size:undefined; padding:0px; colo=
r:inherit; white-space:pre-wrap; background-color:transparent"><s=
pan class=3D"c" style=3D"color:rgb(64,128,128); font-style:italic=
">#root =CE=AA root/admin =B5=C4=C3=DC=C2=EB</span><span class=3D=
"nv" style=3D"color:rgb(25,23,124)">$ </span>ssh cdh1 <span class=
=3D"s2" style=3D"color:rgb(186,33,33)">"kinit -k -t /etc/hadoop/c=
onf/hdfs.keytab hdfs/cdh1@JAVACHEN.COM; service hadoop-hdfs-datan=
ode start"</span><span class=3D"nv" style=3D"color:rgb(25,23,124)=
">$ </span>ssh cdh2 <span class=3D"s2" style=3D"color:rgb(186,33,=
33)">"kinit -k -t /etc/hadoop/conf/hdfs.keytab hdfs/cdh2@JAVACHEN=
.COM; service hadoop-hdfs-datanode start"</span><span class=3D"nv=
" style=3D"color:rgb(25,23,124)">$ </span>ssh cdh3 <span class=3D=
"s2" style=3D"color:rgb(186,33,33)">"kinit -k -t /etc/hadoop/conf=
/hdfs.keytab hdfs/cdh3@JAVACHEN.COM; service hadoop-hdfs-datanode=
 start"</span></code></pre></div><p style=3D"margin-top:0px; marg=
in-bottom:10px">=B9=DB=BF=B4 cdh1 =C9=CF NameNode =C8=D5=D6=BE=A3=
=AC=B3=F6=CF=D6=CF=C2=C3=E6=C8=D5=D6=BE=B1=ED=CA=BE DataNode =C6=F4=
=B6=AF=B3=C9=B9=A6=A3=BA</p><div class=3D"highlight"><pre style=3D=
"overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',m=
onospace; font-size:13px; padding:9.5px; margin:10px auto; line-h=
eight:1.42857143; color:rgb(51,51,51); word-break:break-all; word=
-wrap:break-word; max-width:98%; background-color:rgb(254,251,243=
)"><code class=3D"language-text" style=3D"font-family:Menlo,'Anda=
le Mono',Consolas,'Courier New',Monaco,monospace; font-size:undef=
ined; padding:0px; color:inherit; white-space:pre-wrap; backgroun=
d-color:transparent">14/11/04 17:21:41 INFO security.UserGroupInf=
ormation:=0ALogin successful for user hdfs/cdh2@JAVACHEN.COM usin=
g keytab file /etc/hadoop/conf/hdfs.keytab=0A</code></pre></div><=
h1 id=3D"5.-=C6=E4=CB=FB" style=3D"margin:20px 0px 10px; font-siz=
e:36px; font-family:inherit; font-weight:500; line-height:1.1"><a=
 name=3D"t24"></a>=0A5. =C6=E4=CB=FB</h1><h2 id=3D"5.1-=C5=FA=C1=BF=
=C9=FA=B3=C9-keytab" style=3D"font-family:inherit; font-weight:50=
0; line-height:1.1; margin-top:20px; margin-bottom:10px; font-siz=
e:30px"><a name=3D"t25"></a>=0A5.1 =C5=FA=C1=BF=C9=FA=B3=C9 keyta=
b</h2><p style=3D"margin-top:0px; margin-bottom:10px">=CE=AA=C1=CB=
=B7=BD=B1=E3=C5=FA=C1=BF=C9=FA=B3=C9 keytab=A3=AC=D0=B4=C1=CB=D2=BB=
=B8=F6=BD=C5=B1=BE=A3=AC=C8=E7=CF=C2=A3=BA</p><div class=3D"highl=
ight"><pre style=3D"overflow:auto; font-family:Menlo,Monaco,Conso=
las,'Courier New',monospace; font-size:13px; padding:9.5px; margi=
n:10px auto; line-height:1.42857143; color:rgb(51,51,51); word-br=
eak:break-all; word-wrap:break-word; max-width:98%; background-co=
lor:rgb(254,251,243)"><code class=3D"language-bash" style=3D"font=
-family:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospa=
ce; font-size:undefined; padding:0px; color:inherit; white-space:=
pre-wrap; background-color:transparent"><span class=3D"c" style=3D=
"color:rgb(64,128,128); font-style:italic">#!/bin/bash</span><spa=
n class=3D"nv" style=3D"color:rgb(25,23,124)">DNS</span><span cla=
ss=3D"o" style=3D"color:rgb(102,102,102)">=3D</span>LASHOU.COM=0A=
<span class=3D"nv" style=3D"color:rgb(25,23,124)">hostname</span>=
<span class=3D"o" style=3D"color:rgb(102,102,102)">=3D</span><spa=
n class=3D"sb" style=3D"color:rgb(186,33,33)">`</span>hostname -i=
<span class=3D"sb" style=3D"color:rgb(186,33,33)">`</span>=0A=0Ay=
um install krb5-server krb5-libs krb5-auth-dialog krb5-workstatio=
n  -y=0Arm -rf /var/kerberos/krb5kdc/*.keytab /var/kerberos/krb5k=
dc/prin*=0A=0Akdb5_util create -r LASHOU.COM -s=0A=0Achkconfig --=
level <span class=3D"m" style=3D"color:rgb(102,102,102)">35</span=
> krb5kdc on=0Achkconfig --level <span class=3D"m" style=3D"color=
:rgb(102,102,102)">35</span> kadmin on=0Aservice krb5kdc restart=0A=
service kadmin restart=0A=0A<span class=3D"nb" style=3D"color:rgb=
(0,128,0)">echo</span> -e <span class=3D"s2" style=3D"color:rgb(1=
86,33,33)">"root\nroot"</span> <span class=3D"p">|</span> kadmin.=
local -q <span class=3D"s2" style=3D"color:rgb(186,33,33)">"addpr=
inc root/admin"</span><span class=3D"k" style=3D"color:rgb(0,128,=
0); font-weight:bold">for</span> host in  <span class=3D"sb" styl=
e=3D"color:rgb(186,33,33)">`</span>cat /etc/hosts<span class=3D"p=
">|</span>grep 10<span class=3D"p">|</span>grep -v <span class=3D=
"nv" style=3D"color:rgb(25,23,124)">$hostname</span><span class=3D=
"p">|</span>awk <span class=3D"s1" style=3D"color:rgb(186,33,33)"=
>'{print $2}'</span><span class=3D"sb" style=3D"color:rgb(186,33,=
33)">`</span> <span class=3D"p">;</span><span class=3D"k" style=3D=
"color:rgb(0,128,0); font-weight:bold">do</span><span class=3D"k"=
 style=3D"color:rgb(0,128,0); font-weight:bold">for</span> user i=
n hdfs hive<span class=3D"p">;</span> <span class=3D"k" style=3D"=
color:rgb(0,128,0); font-weight:bold">do</span>=0A    kadmin.loca=
l -q <span class=3D"s2" style=3D"color:rgb(186,33,33)">"addprinc=20=
-randkey $user/$host@$DNS"</span>=0A    kadmin.local -q <span cla=
ss=3D"s2" style=3D"color:rgb(186,33,33)">"xst -k /var/kerberos/kr=
b5kdc/$user-un.keytab $user/$host@$DNS"</span><span class=3D"k" s=
tyle=3D"color:rgb(0,128,0); font-weight:bold">done</span><span cl=
ass=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold">for</spa=
n> user in HTTP lashou yarn mapred impala zookeeper sentry llama=20=
zkcli <span class=3D"p">;</span> <span class=3D"k" style=3D"color=
:rgb(0,128,0); font-weight:bold">do</span>=0A    kadmin.local -q=20=
<span class=3D"s2" style=3D"color:rgb(186,33,33)">"addprinc -rand=
key $user/$host@$DNS"</span>=0A    kadmin.local -q <span class=3D=
"s2" style=3D"color:rgb(186,33,33)">"xst -k /var/kerberos/krb5kdc=
/$user.keytab $user/$host@$DNS"</span><span class=3D"k" style=3D"=
color:rgb(0,128,0); font-weight:bold">done</span><span class=3D"k=
" style=3D"color:rgb(0,128,0); font-weight:bold">done</span><span=
 class=3D"nb" style=3D"color:rgb(0,128,0)">cd</span> /var/kerbero=
s/krb5kdc/=0A<span class=3D"nb" style=3D"color:rgb(0,128,0)">echo=
</span> -e <span class=3D"s2" style=3D"color:rgb(186,33,33)">"rkt=
 lashou.keytab\nrkt hdfs-un.keytab\nrkt HTTP.keytab\nwkt hdfs.key=
tab"</span> <span class=3D"p">|</span> ktutil=0A<span class=3D"nb=
" style=3D"color:rgb(0,128,0)">echo</span> -e <span class=3D"s2"=20=
style=3D"color:rgb(186,33,33)">"rkt lashou.keytab\nrkt hive-un.ke=
ytab\nwkt hive.keytab"</span> <span class=3D"p">|</span> ktutil=0A=
=0A<span class=3D"c" style=3D"color:rgb(64,128,128); font-style:i=
talic">#kerberos =D6=D8=D0=C2=B3=F5=CA=BC=BB=AF=D6=AE=BA=F3=A3=AC=
=BB=B9=D0=E8=D2=AA=CC=ED=BC=D3=CF=C2=C3=E6=B4=FA=C2=EB=D3=C3=D3=DA=
=BC=AF=B3=C9 ldap</span>=0A=0Akadmin.local -q <span class=3D"s2"=20=
style=3D"color:rgb(186,33,33)">"addprinc ldapadmin@JAVACHEN.COM"<=
/span>=0Akadmin.local -q <span class=3D"s2" style=3D"color:rgb(18=
6,33,33)">"addprinc -randkey ldap/cdh1@JAVACHEN.COM"</span>=0Akad=
min.local -q <span class=3D"s2" style=3D"color:rgb(186,33,33)">"k=
tadd -k /etc/openldap/ldap.keytab ldap/cdh1@JAVACHEN.COM"</span><=
span class=3D"c" style=3D"color:rgb(64,128,128); font-style:itali=
c">#=C8=E7=B9=FB=B0=B2=D7=B0=C1=CB openldap =A3=AC=D6=D8=C6=F4 sl=
apd</span>=0A/etc/init.d/slapd restart=0A=0A<span class=3D"c" sty=
le=3D"color:rgb(64,128,128); font-style:italic">#=B2=E2=CA=D4 lda=
p =CA=C7=B7=F1=BF=C9=D2=D4=D5=FD=B3=A3=CA=B9=D3=C3</span>=0Aldaps=
earch -x -b <span class=3D"s1" style=3D"color:rgb(186,33,33)">'dc=
=3Djavachen,dc=3Dcom'</span></code></pre></div><p style=3D"margin=
-top:0px; margin-bottom:10px">=D2=D4=CF=C2=BD=C5=B1=BE=D3=C3=D3=DA=
=D4=DA=C3=BF=B8=F6=BF=CD=BB=A7=B6=CB=C9=CF=BB=F1=B5=C3 root/admin=
 =B5=C4 ticket=A3=AC=C6=E4=C3=DC=C2=EB=CE=AA root=A3=BA</p><div c=
lass=3D"highlight"><pre style=3D"overflow:auto; font-family:Menlo=
,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding=
:9.5px; margin:10px auto; line-height:1.42857143; color:rgb(51,51=
,51); word-break:break-all; word-wrap:break-word; max-width:98%;=20=
background-color:rgb(254,251,243)"><code class=3D"language-bash"=20=
style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier New',M=
onaco,monospace; font-size:undefined; padding:0px; color:inherit;=
 white-space:pre-wrap; background-color:transparent"><span class=3D=
"c" style=3D"color:rgb(64,128,128); font-style:italic">#!/bin/sh<=
/span><span class=3D"k" style=3D"color:rgb(0,128,0); font-weight:=
bold">for</span> node in 56.121 56.122 56.123 <span class=3D"p">;=
</span><span class=3D"k" style=3D"color:rgb(0,128,0); font-weight=
:bold">do</span><span class=3D"nb" style=3D"color:rgb(0,128,0)">e=
cho</span> <span class=3D"s2" style=3D"color:rgb(186,33,33)">"=3D=
=3D=3D=3D=3D=3D=3D=3D10.168.$node=3D=3D=3D=3D=3D=3D=3D=3D"</span>=
=0A  ssh 192.168.<span class=3D"nv" style=3D"color:rgb(25,23,124)=
">$node</span> <span class=3D"s1" style=3D"color:rgb(186,33,33)">=
'echo root|kinit root/admin'</span><span class=3D"k" style=3D"col=
or:rgb(0,128,0); font-weight:bold">done</span></code></pre></div>=
<h2 id=3D"5.2-=B9=DC=C0=ED=BC=AF=C8=BA=BD=C5=B1=BE" style=3D"font=
-family:inherit; font-weight:500; line-height:1.1; margin-top:20p=
x; margin-bottom:10px; font-size:30px"><a name=3D"t26"></a>=0A5.2=
 =B9=DC=C0=ED=BC=AF=C8=BA=BD=C5=B1=BE</h2><p style=3D"margin-top:=
0px; margin-bottom:10px">=C1=ED=CD=E2=A3=AC=CE=AA=C1=CB=B7=BD=B1=E3=
=B9=DC=C0=ED=BC=AF=C8=BA=A3=AC=D4=DA cdh1 =C9=CF=B4=B4=BD=A8=D2=BB=
=B8=F6 shell =BD=C5=B1=BE=D3=C3=D3=DA=C5=FA=C1=BF=B9=DC=C0=ED=BC=AF=
=C8=BA=A3=AC=BD=C5=B1=BE=C8=E7=CF=C2=A3=A8=B1=A3=B4=E6=CE=AA&nbsp=
;<code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Co=
nsolas,'Courier New',monospace; font-size:13px; padding:2px 4px;=20=
color:rgb(199,37,78); background-color:rgb(254,251,243)">manager_=
cluster.sh</code>=A3=A9=A3=BA</p><div class=3D"highlight"><pre st=
yle=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier=20=
New',monospace; font-size:13px; padding:9.5px; margin:10px auto;=20=
line-height:1.42857143; color:rgb(51,51,51); word-break:break-all=
; word-wrap:break-word; max-width:98%; background-color:rgb(254,2=
51,243)"><code class=3D"language-bash" style=3D"font-family:Menlo=
,'Andale Mono',Consolas,'Courier New',Monaco,monospace; font-size=
:undefined; padding:0px; color:inherit; white-space:pre-wrap; bac=
kground-color:transparent"><span class=3D"c" style=3D"color:rgb(6=
4,128,128); font-style:italic">#!/bin/bash</span><span class=3D"n=
v" style=3D"color:rgb(25,23,124)">role</span><span class=3D"o" st=
yle=3D"color:rgb(102,102,102)">=3D</span><span class=3D"nv" style=
=3D"color:rgb(25,23,124)">$1</span><span class=3D"nb" style=3D"co=
lor:rgb(0,128,0)">command</span><span class=3D"o" style=3D"color:=
rgb(102,102,102)">=3D</span><span class=3D"nv" style=3D"color:rgb=
(25,23,124)">$2</span><span class=3D"nv" style=3D"color:rgb(25,23=
,124)">dir</span><span class=3D"o" style=3D"color:rgb(102,102,102=
)">=3D</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$r=
ole</span><span class=3D"k" style=3D"color:rgb(0,128,0); font-wei=
ght:bold">if</span> <span class=3D"o" style=3D"color:rgb(102,102,=
102)">[</span> X<span class=3D"s2" style=3D"color:rgb(186,33,33)"=
>"$role"</span> <span class=3D"o" style=3D"color:rgb(102,102,102)=
">=3D=3D</span> X<span class=3D"s2" style=3D"color:rgb(186,33,33)=
">"hdfs"</span> <span class=3D"o" style=3D"color:rgb(102,102,102)=
">]</span><span class=3D"p">;</span><span class=3D"k" style=3D"co=
lor:rgb(0,128,0); font-weight:bold">then</span><span class=3D"nv"=
 style=3D"color:rgb(25,23,124)">dir</span><span class=3D"o" style=
=3D"color:rgb(102,102,102)">=3D</span>hadoop=0A<span class=3D"k"=20=
style=3D"color:rgb(0,128,0); font-weight:bold">fi</span><span cla=
ss=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold">if</span>=
 <span class=3D"o" style=3D"color:rgb(102,102,102)">[</span> X<sp=
an class=3D"s2" style=3D"color:rgb(186,33,33)">"$role"</span> <sp=
an class=3D"o" style=3D"color:rgb(102,102,102)">=3D=3D</span> X<s=
pan class=3D"s2" style=3D"color:rgb(186,33,33)">"yarn"</span> <sp=
an class=3D"o" style=3D"color:rgb(102,102,102)">]</span><span cla=
ss=3D"p">;</span><span class=3D"k" style=3D"color:rgb(0,128,0); f=
ont-weight:bold">then</span><span class=3D"nv" style=3D"color:rgb=
(25,23,124)">dir</span><span class=3D"o" style=3D"color:rgb(102,1=
02,102)">=3D</span>hadoop=0A<span class=3D"k" style=3D"color:rgb(=
0,128,0); font-weight:bold">fi</span><span class=3D"k" style=3D"c=
olor:rgb(0,128,0); font-weight:bold">if</span> <span class=3D"o"=20=
style=3D"color:rgb(102,102,102)">[</span> X<span class=3D"s2" sty=
le=3D"color:rgb(186,33,33)">"$role"</span> <span class=3D"o" styl=
e=3D"color:rgb(102,102,102)">=3D=3D</span> X<span class=3D"s2" st=
yle=3D"color:rgb(186,33,33)">"mapred"</span> <span class=3D"o" st=
yle=3D"color:rgb(102,102,102)">]</span><span class=3D"p">;</span>=
<span class=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold">=
then</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">dir<=
/span><span class=3D"o" style=3D"color:rgb(102,102,102)">=3D</spa=
n>hadoop=0A<span class=3D"k" style=3D"color:rgb(0,128,0); font-we=
ight:bold">fi</span><span class=3D"k" style=3D"color:rgb(0,128,0)=
; font-weight:bold">for</span> node in 56.121 56.122 56.123 <span=
 class=3D"p">;</span><span class=3D"k" style=3D"color:rgb(0,128,0=
); font-weight:bold">do</span><span class=3D"nb" style=3D"color:r=
gb(0,128,0)">echo</span> <span class=3D"s2" style=3D"color:rgb(18=
6,33,33)">"=3D=3D=3D=3D=3D=3D=3D=3D192.168.$node=3D=3D=3D=3D=3D=3D=
=3D=3D"</span>=0A  ssh 192.168.<span class=3D"nv" style=3D"color:=
rgb(25,23,124)">$node</span> <span class=3D"s1" style=3D"color:rg=
b(186,33,33)">'</span><span class=3D"s1" style=3D"color:rgb(186,3=
3,33)">    #=CF=C8=BB=F1=C8=A1 root/admin =B5=C4=C6=BE=D6=A4</spa=
n><span class=3D"s1" style=3D"color:rgb(186,33,33)">    echo root=
|kinit root/admin</span><span class=3D"s1" style=3D"color:rgb(186=
,33,33)">    host=3D`hostname -f| tr "[:upper:]" "[:lower:]"`</sp=
an><span class=3D"s1" style=3D"color:rgb(186,33,33)">    path=3D"=
'</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$role</=
span><span class=3D"s1" style=3D"color:rgb(186,33,33)">'/$host"</=
span><span class=3D"s1" style=3D"color:rgb(186,33,33)">    #echo=20=
$path</span><span class=3D"s1" style=3D"color:rgb(186,33,33)">  =20=
 principal=3D`klist -k /etc/'</span><span class=3D"nv" style=3D"c=
olor:rgb(25,23,124)">$dir</span><span class=3D"s1" style=3D"color=
:rgb(186,33,33)">'/conf/'</span><span class=3D"nv" style=3D"color=
:rgb(25,23,124)">$role</span><span class=3D"s1" style=3D"color:rg=
b(186,33,33)">'.keytab | grep $path | head -n1 | cut -d " " -f5`<=
/span><span class=3D"s1" style=3D"color:rgb(186,33,33)">    #echo=
 $principal</span><span class=3D"s1" style=3D"color:rgb(186,33,33=
)">    if [ X"$principal" =3D=3D X ]; then</span><span class=3D"s=
1" style=3D"color:rgb(186,33,33)">      principal=3D`klist -k /et=
c/'</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$dir<=
/span><span class=3D"s1" style=3D"color:rgb(186,33,33)">'/conf/'<=
/span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$role</sp=
an><span class=3D"s1" style=3D"color:rgb(186,33,33)">'.keytab | g=
rep $path | head -n1 | cut -d " " -f4`</span><span class=3D"s1" s=
tyle=3D"color:rgb(186,33,33)">      if [ X"$principal" =3D=3D X ]=
; then</span><span class=3D"s1" style=3D"color:rgb(186,33,33)"> =20=
          echo "Failed to get hdfs Kerberos principal"</span><spa=
n class=3D"s1" style=3D"color:rgb(186,33,33)">            exit 1<=
/span><span class=3D"s1" style=3D"color:rgb(186,33,33)">      fi<=
/span><span class=3D"s1" style=3D"color:rgb(186,33,33)">    fi</s=
pan><span class=3D"s1" style=3D"color:rgb(186,33,33)">    kinit -=
r 24l -kt /etc/'</span><span class=3D"nv" style=3D"color:rgb(25,2=
3,124)">$dir</span><span class=3D"s1" style=3D"color:rgb(186,33,3=
3)">'/conf/'</span><span class=3D"nv" style=3D"color:rgb(25,23,12=
4)">$role</span><span class=3D"s1" style=3D"color:rgb(186,33,33)"=
>'.keytab $principal</span><span class=3D"s1" style=3D"color:rgb(=
186,33,33)">    if [ $? -ne 0 ]; then</span><span class=3D"s1" st=
yle=3D"color:rgb(186,33,33)">        echo "Failed to login as hdf=
s by kinit command"</span><span class=3D"s1" style=3D"color:rgb(1=
86,33,33)">        exit 1</span><span class=3D"s1" style=3D"color=
:rgb(186,33,33)">    fi</span><span class=3D"s1" style=3D"color:r=
gb(186,33,33)">    kinit -R</span><span class=3D"s1" style=3D"col=
or:rgb(186,33,33)">    for src in `ls /etc/init.d|grep '</span><s=
pan class=3D"nv" style=3D"color:rgb(25,23,124)">$role</span><span=
 class=3D"s1" style=3D"color:rgb(186,33,33)">'`;do service $src '=
</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$command=
</span><span class=3D"s1" style=3D"color:rgb(186,33,33)">'; done<=
/span><span class=3D"s1" style=3D"color:rgb(186,33,33)">  '</span=
><span class=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold"=
>done</span></code></pre></div><p style=3D"margin-top:0px; margin=
-bottom:10px">=CA=B9=D3=C3=B7=BD=B7=A8=CE=AA=A3=BA</p><div class=3D=
"highlight"><pre style=3D"overflow:auto; font-family:Menlo,Monaco=
,Consolas,'Courier New',monospace; font-size:13px; padding:9.5px;=
 margin:10px auto; line-height:1.42857143; color:rgb(51,51,51); w=
ord-break:break-all; word-wrap:break-word; max-width:98%; backgro=
und-color:rgb(254,251,243)"><code class=3D"language-bash" style=3D=
"font-family:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,mo=
nospace; font-size:undefined; padding:0px; color:inherit; white-s=
pace:pre-wrap; background-color:transparent"><span class=3D"nv" s=
tyle=3D"color:rgb(25,23,124)">$ </span>sh manager_cluster.sh hdfs=
 start <span class=3D"c" style=3D"color:rgb(64,128,128); font-sty=
le:italic">#=C6=F4=B6=AF hdfs =D3=C3=BB=A7=B9=DC=C0=ED=B5=C4=B7=FE=
=CE=F1</span><span class=3D"nv" style=3D"color:rgb(25,23,124)">$=20=
</span>sh manager_cluster.sh yarn start <span class=3D"c" style=3D=
"color:rgb(64,128,128); font-style:italic">#=C6=F4=B6=AF yarn =D3=
=C3=BB=A7=B9=DC=C0=ED=B5=C4=B7=FE=CE=F1</span><span class=3D"nv"=20=
style=3D"color:rgb(25,23,124)">$ </span>sh manager_cluster.sh map=
red start <span class=3D"c" style=3D"color:rgb(64,128,128); font-=
style:italic">#=C6=F4=B6=AF mapred =D3=C3=BB=A7=B9=DC=C0=ED=B5=C4=
=B7=FE=CE=F1</span><span class=3D"nv" style=3D"color:rgb(25,23,12=
4)">$ </span>sh manager_cluster.sh hdfs status <span class=3D"c"=20=
style=3D"color:rgb(64,128,128); font-style:italic"># =D4=DA=C3=BF=
=B8=F6=BD=DA=B5=E3=C9=CF=BB=F1=C8=A1 hdfs =B5=C4 ticket=A3=AC=C8=BB=
=BA=F3=BF=C9=D2=D4=D6=B4=D0=D0=C6=E4=CB=FB=B2=D9=D7=F7=A3=AC=C8=E7=
=C5=FA=C1=BF=C6=F4=B6=AF datanode =B5=C8=B5=C8</span></code></pre=
></div><h2 id=3D"5.3-=CA=B9=D3=C3-java-=B4=FA=C2=EB=B2=E2=CA=D4-k=
erberos" style=3D"font-family:inherit; font-weight:500; line-heig=
ht:1.1; margin-top:20px; margin-bottom:10px; font-size:30px"><a n=
ame=3D"t27"></a>=0A5.3 =CA=B9=D3=C3 java =B4=FA=C2=EB=B2=E2=CA=D4=
 kerberos</h2><p style=3D"margin-top:0px; margin-bottom:10px">=D4=
=DA hdfs =D6=D0=BC=AF=B3=C9 kerberos =D6=AE=C7=B0=A3=AC=BF=C9=D2=D4=
=CF=C8=CA=B9=D3=C3=CF=C2=C3=E6=B4=FA=C2=EB(Krb.java)=BD=F8=D0=D0=B2=
=E2=CA=D4=A3=BA</p><div class=3D"highlight"><pre style=3D"overflo=
w:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace=
; font-size:13px; padding:9.5px; margin:10px auto; line-height:1.=
42857143; color:rgb(51,51,51); word-break:break-all; word-wrap:br=
eak-word; max-width:98%; background-color:rgb(254,251,243)"><code=
 class=3D"language-java" style=3D"font-family:Menlo,'Andale Mono'=
,Consolas,'Courier New',Monaco,monospace; font-size:undefined; pa=
dding:0px; color:inherit; white-space:pre-wrap; background-color:=
transparent"><span class=3D"kn" style=3D"color:rgb(0,128,0); font=
-weight:bold">import</span> <span class=3D"nn" style=3D"color:rgb=
(0,0,255); font-weight:bold">com.sun.security.auth.module.Krb5Log=
inModule</span><span class=3D"o" style=3D"color:rgb(102,102,102)"=
>;</span><span class=3D"kn" style=3D"color:rgb(0,128,0); font-wei=
ght:bold">import</span> <span class=3D"nn" style=3D"color:rgb(0,0=
,255); font-weight:bold">javax.security.auth.Subject</span><span=20=
class=3D"o" style=3D"color:rgb(102,102,102)">;</span><span class=3D=
"kn" style=3D"color:rgb(0,128,0); font-weight:bold">import</span>=
 <span class=3D"nn" style=3D"color:rgb(0,0,255); font-weight:bold=
">java.io.File</span><span class=3D"o" style=3D"color:rgb(102,102=
,102)">;</span><span class=3D"kn" style=3D"color:rgb(0,128,0); fo=
nt-weight:bold">import</span> <span class=3D"nn" style=3D"color:r=
gb(0,0,255); font-weight:bold">java.io.FileInputStream</span><spa=
n class=3D"o" style=3D"color:rgb(102,102,102)">;</span><span clas=
s=3D"kn" style=3D"color:rgb(0,128,0); font-weight:bold">import</s=
pan> <span class=3D"nn" style=3D"color:rgb(0,0,255); font-weight:=
bold">java.io.InputStream</span><span class=3D"o" style=3D"color:=
rgb(102,102,102)">;</span><span class=3D"kn" style=3D"color:rgb(0=
,128,0); font-weight:bold">import</span> <span class=3D"nn" style=
=3D"color:rgb(0,0,255); font-weight:bold">java.util.HashMap</span=
><span class=3D"o" style=3D"color:rgb(102,102,102)">;</span><span=
 class=3D"kn" style=3D"color:rgb(0,128,0); font-weight:bold">impo=
rt</span> <span class=3D"nn" style=3D"color:rgb(0,0,255); font-we=
ight:bold">java.util.Map</span><span class=3D"o" style=3D"color:r=
gb(102,102,102)">;</span><span class=3D"kn" style=3D"color:rgb(0,=
128,0); font-weight:bold">import</span> <span class=3D"nn" style=3D=
"color:rgb(0,0,255); font-weight:bold">java.util.Properties</span=
><span class=3D"o" style=3D"color:rgb(102,102,102)">;</span><span=
 class=3D"kd" style=3D"color:rgb(0,128,0); font-weight:bold">publ=
ic</span> <span class=3D"kd" style=3D"color:rgb(0,128,0); font-we=
ight:bold">class</span> <span class=3D"nc" style=3D"color:rgb(0,0=
,255); font-weight:bold">Krb</span> <span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">{</span><span class=3D"kd" style=3D"color:r=
gb(0,128,0); font-weight:bold">private</span> <span class=3D"kt"=20=
style=3D"color:rgb(176,0,64)">void</span> <span class=3D"nf" styl=
e=3D"color:rgb(0,0,255)">loginImpl</span><span class=3D"o" style=3D=
"color:rgb(102,102,102)">(</span><span class=3D"kd" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">final</span> <span class=3D"n">=
String</span> <span class=3D"n">propertiesFileName</span><span cl=
ass=3D"o" style=3D"color:rgb(102,102,102)">)</span> <span class=3D=
"kd" style=3D"color:rgb(0,128,0); font-weight:bold">throws</span>=
 <span class=3D"n">Exception</span> <span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">{</span><span class=3D"n">System</span><spa=
n class=3D"o" style=3D"color:rgb(102,102,102)">.</span><span clas=
s=3D"na" style=3D"color:rgb(125,144,41)">out</span><span class=3D=
"o" style=3D"color:rgb(102,102,102)">.</span><span class=3D"na" s=
tyle=3D"color:rgb(125,144,41)">println</span><span class=3D"o" st=
yle=3D"color:rgb(102,102,102)">(</span><span class=3D"s" style=3D=
"color:rgb(186,33,33)">"NB: system property to specify the krb5 c=
onfig: [java.security.krb5.conf]"</span><span class=3D"o" style=3D=
"color:rgb(102,102,102)">);</span><span class=3D"c1" style=3D"col=
or:rgb(64,128,128); font-style:italic">//System.setProperty("java=
.security.krb5.conf", "/etc/krb5.conf");</span><span class=3D"n">=
System</span><span class=3D"o" style=3D"color:rgb(102,102,102)">.=
</span><span class=3D"na" style=3D"color:rgb(125,144,41)">out</sp=
an><span class=3D"o" style=3D"color:rgb(102,102,102)">.</span><sp=
an class=3D"na" style=3D"color:rgb(125,144,41)">println</span><sp=
an class=3D"o" style=3D"color:rgb(102,102,102)">(</span><span cla=
ss=3D"n">System</span><span class=3D"o" style=3D"color:rgb(102,10=
2,102)">.</span><span class=3D"na" style=3D"color:rgb(125,144,41)=
">getProperty</span><span class=3D"o" style=3D"color:rgb(102,102,=
102)">(</span><span class=3D"s" style=3D"color:rgb(186,33,33)">"j=
ava.version"</span><span class=3D"o" style=3D"color:rgb(102,102,1=
02)">));</span><span class=3D"n">System</span><span class=3D"o" s=
tyle=3D"color:rgb(102,102,102)">.</span><span class=3D"na" style=3D=
"color:rgb(125,144,41)">setProperty</span><span class=3D"o" style=
=3D"color:rgb(102,102,102)">(</span><span class=3D"s" style=3D"co=
lor:rgb(186,33,33)">"sun.security.krb5.debug"</span><span class=3D=
"o" style=3D"color:rgb(102,102,102)">,</span> <span class=3D"s" s=
tyle=3D"color:rgb(186,33,33)">"true"</span><span class=3D"o" styl=
e=3D"color:rgb(102,102,102)">);</span><span class=3D"kd" style=3D=
"color:rgb(0,128,0); font-weight:bold">final</span> <span class=3D=
"n">Subject</span> <span class=3D"n">subject</span> <span class=3D=
"o" style=3D"color:rgb(102,102,102)">=3D</span> <span class=3D"k"=
 style=3D"color:rgb(0,128,0); font-weight:bold">new</span> <span=20=
class=3D"nf" style=3D"color:rgb(0,0,255)">Subject</span><span cla=
ss=3D"o" style=3D"color:rgb(102,102,102)">();</span><span class=3D=
"kd" style=3D"color:rgb(0,128,0); font-weight:bold">final</span>=20=
<span class=3D"n">Krb5LoginModule</span> <span class=3D"n">krb5Lo=
ginModule</span> <span class=3D"o" style=3D"color:rgb(102,102,102=
)">=3D</span> <span class=3D"k" style=3D"color:rgb(0,128,0); font=
-weight:bold">new</span> <span class=3D"nf" style=3D"color:rgb(0,=
0,255)">Krb5LoginModule</span><span class=3D"o" style=3D"color:rg=
b(102,102,102)">();</span><span class=3D"kd" style=3D"color:rgb(0=
,128,0); font-weight:bold">final</span> <span class=3D"n">Map</sp=
an><span class=3D"o" style=3D"color:rgb(102,102,102)">&lt;</span>=
<span class=3D"n">String</span><span class=3D"o" style=3D"color:r=
gb(102,102,102)">,</span><span class=3D"n">String</span><span cla=
ss=3D"o" style=3D"color:rgb(102,102,102)">&gt;</span> <span class=
=3D"n">optionMap</span> <span class=3D"o" style=3D"color:rgb(102,=
102,102)">=3D</span> <span class=3D"k" style=3D"color:rgb(0,128,0=
); font-weight:bold">new</span> <span class=3D"n">HashMap</span><=
span class=3D"o" style=3D"color:rgb(102,102,102)">&lt;</span><spa=
n class=3D"n">String</span><span class=3D"o" style=3D"color:rgb(1=
02,102,102)">,</span><span class=3D"n">String</span><span class=3D=
"o" style=3D"color:rgb(102,102,102)">&gt;();</span><span class=3D=
"k" style=3D"color:rgb(0,128,0); font-weight:bold">if</span> <spa=
n class=3D"o" style=3D"color:rgb(102,102,102)">(</span><span clas=
s=3D"n">propertiesFileName</span> <span class=3D"o" style=3D"colo=
r:rgb(102,102,102)">=3D=3D</span> <span class=3D"kc" style=3D"col=
or:rgb(0,128,0); font-weight:bold">null</span><span class=3D"o" s=
tyle=3D"color:rgb(102,102,102)">)</span> <span class=3D"o" style=3D=
"color:rgb(102,102,102)">{</span><span class=3D"c1" style=3D"colo=
r:rgb(64,128,128); font-style:italic">//optionMap.put("ticketCach=
e", "/tmp/krb5cc_1000");</span><span class=3D"n">optionMap</span>=
<span class=3D"o" style=3D"color:rgb(102,102,102)">.</span><span=20=
class=3D"na" style=3D"color:rgb(125,144,41)">put</span><span clas=
s=3D"o" style=3D"color:rgb(102,102,102)">(</span><span class=3D"s=
" style=3D"color:rgb(186,33,33)">"keyTab"</span><span class=3D"o"=
 style=3D"color:rgb(102,102,102)">,</span> <span class=3D"s" styl=
e=3D"color:rgb(186,33,33)">"/etc/krb5.keytab"</span><span class=3D=
"o" style=3D"color:rgb(102,102,102)">);</span><span class=3D"n">o=
ptionMap</span><span class=3D"o" style=3D"color:rgb(102,102,102)"=
>.</span><span class=3D"na" style=3D"color:rgb(125,144,41)">put</=
span><span class=3D"o" style=3D"color:rgb(102,102,102)">(</span><=
span class=3D"s" style=3D"color:rgb(186,33,33)">"principal"</span=
><span class=3D"o" style=3D"color:rgb(102,102,102)">,</span> <spa=
n class=3D"s" style=3D"color:rgb(186,33,33)">"foo"</span><span cl=
ass=3D"o" style=3D"color:rgb(102,102,102)">);</span> <span class=3D=
"c1" style=3D"color:rgb(64,128,128); font-style:italic">// defaul=
t realm</span><span class=3D"n">optionMap</span><span class=3D"o"=
 style=3D"color:rgb(102,102,102)">.</span><span class=3D"na" styl=
e=3D"color:rgb(125,144,41)">put</span><span class=3D"o" style=3D"=
color:rgb(102,102,102)">(</span><span class=3D"s" style=3D"color:=
rgb(186,33,33)">"doNotPrompt"</span><span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">,</span> <span class=3D"s" style=3D"color:r=
gb(186,33,33)">"true"</span><span class=3D"o" style=3D"color:rgb(=
102,102,102)">);</span><span class=3D"n">optionMap</span><span cl=
ass=3D"o" style=3D"color:rgb(102,102,102)">.</span><span class=3D=
"na" style=3D"color:rgb(125,144,41)">put</span><span class=3D"o"=20=
style=3D"color:rgb(102,102,102)">(</span><span class=3D"s" style=3D=
"color:rgb(186,33,33)">"refreshKrb5Config"</span><span class=3D"o=
" style=3D"color:rgb(102,102,102)">,</span> <span class=3D"s" sty=
le=3D"color:rgb(186,33,33)">"true"</span><span class=3D"o" style=3D=
"color:rgb(102,102,102)">);</span><span class=3D"n">optionMap</sp=
an><span class=3D"o" style=3D"color:rgb(102,102,102)">.</span><sp=
an class=3D"na" style=3D"color:rgb(125,144,41)">put</span><span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">(</span><span class=3D=
"s" style=3D"color:rgb(186,33,33)">"useTicketCache"</span><span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">,</span> <span class=3D=
"s" style=3D"color:rgb(186,33,33)">"true"</span><span class=3D"o"=
 style=3D"color:rgb(102,102,102)">);</span><span class=3D"n">opti=
onMap</span><span class=3D"o" style=3D"color:rgb(102,102,102)">.<=
/span><span class=3D"na" style=3D"color:rgb(125,144,41)">put</spa=
n><span class=3D"o" style=3D"color:rgb(102,102,102)">(</span><spa=
n class=3D"s" style=3D"color:rgb(186,33,33)">"renewTGT"</span><sp=
an class=3D"o" style=3D"color:rgb(102,102,102)">,</span> <span cl=
ass=3D"s" style=3D"color:rgb(186,33,33)">"true"</span><span class=
=3D"o" style=3D"color:rgb(102,102,102)">);</span><span class=3D"n=
">optionMap</span><span class=3D"o" style=3D"color:rgb(102,102,10=
2)">.</span><span class=3D"na" style=3D"color:rgb(125,144,41)">pu=
t</span><span class=3D"o" style=3D"color:rgb(102,102,102)">(</spa=
n><span class=3D"s" style=3D"color:rgb(186,33,33)">"useKeyTab"</s=
pan><span class=3D"o" style=3D"color:rgb(102,102,102)">,</span> <=
span class=3D"s" style=3D"color:rgb(186,33,33)">"true"</span><spa=
n class=3D"o" style=3D"color:rgb(102,102,102)">);</span><span cla=
ss=3D"n">optionMap</span><span class=3D"o" style=3D"color:rgb(102=
,102,102)">.</span><span class=3D"na" style=3D"color:rgb(125,144,=
41)">put</span><span class=3D"o" style=3D"color:rgb(102,102,102)"=
>(</span><span class=3D"s" style=3D"color:rgb(186,33,33)">"storeK=
ey"</span><span class=3D"o" style=3D"color:rgb(102,102,102)">,</s=
pan> <span class=3D"s" style=3D"color:rgb(186,33,33)">"true"</spa=
n><span class=3D"o" style=3D"color:rgb(102,102,102)">);</span><sp=
an class=3D"n">optionMap</span><span class=3D"o" style=3D"color:r=
gb(102,102,102)">.</span><span class=3D"na" style=3D"color:rgb(12=
5,144,41)">put</span><span class=3D"o" style=3D"color:rgb(102,102=
,102)">(</span><span class=3D"s" style=3D"color:rgb(186,33,33)">"=
isInitiator"</span><span class=3D"o" style=3D"color:rgb(102,102,1=
02)">,</span> <span class=3D"s" style=3D"color:rgb(186,33,33)">"t=
rue"</span><span class=3D"o" style=3D"color:rgb(102,102,102)">);<=
/span><span class=3D"o" style=3D"color:rgb(102,102,102)">}</span>=
 <span class=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold"=
>else</span> <span class=3D"o" style=3D"color:rgb(102,102,102)">{=
</span><span class=3D"n">File</span> <span class=3D"n">f</span> <=
span class=3D"o" style=3D"color:rgb(102,102,102)">=3D</span> <spa=
n class=3D"k" style=3D"color:rgb(0,128,0); font-weight:bold">new<=
/span> <span class=3D"nf" style=3D"color:rgb(0,0,255)">File</span=
><span class=3D"o" style=3D"color:rgb(102,102,102)">(</span><span=
 class=3D"n">propertiesFileName</span><span class=3D"o" style=3D"=
color:rgb(102,102,102)">);</span><span class=3D"n">System</span><=
span class=3D"o" style=3D"color:rgb(102,102,102)">.</span><span c=
lass=3D"na" style=3D"color:rgb(125,144,41)">out</span><span class=
=3D"o" style=3D"color:rgb(102,102,102)">.</span><span class=3D"na=
" style=3D"color:rgb(125,144,41)">println</span><span class=3D"o"=
 style=3D"color:rgb(102,102,102)">(</span><span class=3D"s" style=
=3D"color:rgb(186,33,33)">"=3D=3D=3D=3D=3D=3D=3D loading property=
 file ["</span><span class=3D"o" style=3D"color:rgb(102,102,102)"=
>+</span><span class=3D"n">f</span><span class=3D"o" style=3D"col=
or:rgb(102,102,102)">.</span><span class=3D"na" style=3D"color:rg=
b(125,144,41)">getAbsolutePath</span><span class=3D"o" style=3D"c=
olor:rgb(102,102,102)">()+</span><span class=3D"s" style=3D"color=
:rgb(186,33,33)">"]"</span><span class=3D"o" style=3D"color:rgb(1=
02,102,102)">);</span><span class=3D"n">Properties</span> <span c=
lass=3D"n">p</span> <span class=3D"o" style=3D"color:rgb(102,102,=
102)">=3D</span> <span class=3D"k" style=3D"color:rgb(0,128,0); f=
ont-weight:bold">new</span> <span class=3D"nf" style=3D"color:rgb=
(0,0,255)">Properties</span><span class=3D"o" style=3D"color:rgb(=
102,102,102)">();</span><span class=3D"n">InputStream</span> <spa=
n class=3D"n">is</span> <span class=3D"o" style=3D"color:rgb(102,=
102,102)">=3D</span> <span class=3D"k" style=3D"color:rgb(0,128,0=
); font-weight:bold">new</span> <span class=3D"nf" style=3D"color=
:rgb(0,0,255)">FileInputStream</span><span class=3D"o" style=3D"c=
olor:rgb(102,102,102)">(</span><span class=3D"n">f</span><span cl=
ass=3D"o" style=3D"color:rgb(102,102,102)">);</span><span class=3D=
"k" style=3D"color:rgb(0,128,0); font-weight:bold">try</span> <sp=
an class=3D"o" style=3D"color:rgb(102,102,102)">{</span><span cla=
ss=3D"n">p</span><span class=3D"o" style=3D"color:rgb(102,102,102=
)">.</span><span class=3D"na" style=3D"color:rgb(125,144,41)">loa=
d</span><span class=3D"o" style=3D"color:rgb(102,102,102)">(</spa=
n><span class=3D"n">is</span><span class=3D"o" style=3D"color:rgb=
(102,102,102)">);</span><span class=3D"o" style=3D"color:rgb(102,=
102,102)">}</span> <span class=3D"k" style=3D"color:rgb(0,128,0);=
 font-weight:bold">finally</span> <span class=3D"o" style=3D"colo=
r:rgb(102,102,102)">{</span><span class=3D"n">is</span><span clas=
s=3D"o" style=3D"color:rgb(102,102,102)">.</span><span class=3D"n=
a" style=3D"color:rgb(125,144,41)">close</span><span class=3D"o"=20=
style=3D"color:rgb(102,102,102)">();</span><span class=3D"o" styl=
e=3D"color:rgb(102,102,102)">}</span><span class=3D"n">optionMap<=
/span><span class=3D"o" style=3D"color:rgb(102,102,102)">.</span>=
<span class=3D"na" style=3D"color:rgb(125,144,41)">putAll</span><=
span class=3D"o" style=3D"color:rgb(102,102,102)">((</span><span=20=
class=3D"n">Map</span><span class=3D"o" style=3D"color:rgb(102,10=
2,102)">)</span><span class=3D"n">p</span><span class=3D"o" style=
=3D"color:rgb(102,102,102)">);</span><span class=3D"o" style=3D"c=
olor:rgb(102,102,102)">}</span><span class=3D"n">optionMap</span>=
<span class=3D"o" style=3D"color:rgb(102,102,102)">.</span><span=20=
class=3D"na" style=3D"color:rgb(125,144,41)">put</span><span clas=
s=3D"o" style=3D"color:rgb(102,102,102)">(</span><span class=3D"s=
" style=3D"color:rgb(186,33,33)">"debug"</span><span class=3D"o"=20=
style=3D"color:rgb(102,102,102)">,</span> <span class=3D"s" style=
=3D"color:rgb(186,33,33)">"true"</span><span class=3D"o" style=3D=
"color:rgb(102,102,102)">);</span> <span class=3D"c1" style=3D"co=
lor:rgb(64,128,128); font-style:italic">// switch on debug of the=
 Java implementation</span><span class=3D"n">krb5LoginModule</spa=
n><span class=3D"o" style=3D"color:rgb(102,102,102)">.</span><spa=
n class=3D"na" style=3D"color:rgb(125,144,41)">initialize</span><=
span class=3D"o" style=3D"color:rgb(102,102,102)">(</span><span c=
lass=3D"n">subject</span><span class=3D"o" style=3D"color:rgb(102=
,102,102)">,</span> <span class=3D"kc" style=3D"color:rgb(0,128,0=
); font-weight:bold">null</span><span class=3D"o" style=3D"color:=
rgb(102,102,102)">,</span> <span class=3D"k" style=3D"color:rgb(0=
,128,0); font-weight:bold">new</span> <span class=3D"n">HashMap</=
span><span class=3D"o" style=3D"color:rgb(102,102,102)">&lt;</spa=
n><span class=3D"n">String</span><span class=3D"o" style=3D"color=
:rgb(102,102,102)">,</span><span class=3D"n">String</span><span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">&gt;(),</span> <span=20=
class=3D"n">optionMap</span><span class=3D"o" style=3D"color:rgb(=
102,102,102)">);</span><span class=3D"kt" style=3D"color:rgb(176,=
0,64)">boolean</span> <span class=3D"n">loginOk</span> <span clas=
s=3D"o" style=3D"color:rgb(102,102,102)">=3D</span> <span class=3D=
"n">krb5LoginModule</span><span class=3D"o" style=3D"color:rgb(10=
2,102,102)">.</span><span class=3D"na" style=3D"color:rgb(125,144=
,41)">login</span><span class=3D"o" style=3D"color:rgb(102,102,10=
2)">();</span><span class=3D"n">System</span><span class=3D"o" st=
yle=3D"color:rgb(102,102,102)">.</span><span class=3D"na" style=3D=
"color:rgb(125,144,41)">out</span><span class=3D"o" style=3D"colo=
r:rgb(102,102,102)">.</span><span class=3D"na" style=3D"color:rgb=
(125,144,41)">println</span><span class=3D"o" style=3D"color:rgb(=
102,102,102)">(</span><span class=3D"s" style=3D"color:rgb(186,33=
,33)">"=3D=3D=3D=3D=3D=3D=3D login:  "</span> <span class=3D"o" s=
tyle=3D"color:rgb(102,102,102)">+</span> <span class=3D"n">loginO=
k</span><span class=3D"o" style=3D"color:rgb(102,102,102)">);</sp=
an><span class=3D"kt" style=3D"color:rgb(176,0,64)">boolean</span=
> <span class=3D"n">commitOk</span> <span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">=3D</span> <span class=3D"n">krb5LoginModul=
e</span><span class=3D"o" style=3D"color:rgb(102,102,102)">.</spa=
n><span class=3D"na" style=3D"color:rgb(125,144,41)">commit</span=
><span class=3D"o" style=3D"color:rgb(102,102,102)">();</span><sp=
an class=3D"n">System</span><span class=3D"o" style=3D"color:rgb(=
102,102,102)">.</span><span class=3D"na" style=3D"color:rgb(125,1=
44,41)">out</span><span class=3D"o" style=3D"color:rgb(102,102,10=
2)">.</span><span class=3D"na" style=3D"color:rgb(125,144,41)">pr=
intln</span><span class=3D"o" style=3D"color:rgb(102,102,102)">(<=
/span><span class=3D"s" style=3D"color:rgb(186,33,33)">"=3D=3D=3D=
=3D=3D=3D=3D commit: "</span> <span class=3D"o" style=3D"color:rg=
b(102,102,102)">+</span> <span class=3D"n">commitOk</span><span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">);</span><span class=3D=
"n">System</span><span class=3D"o" style=3D"color:rgb(102,102,102=
)">.</span><span class=3D"na" style=3D"color:rgb(125,144,41)">out=
</span><span class=3D"o" style=3D"color:rgb(102,102,102)">.</span=
><span class=3D"na" style=3D"color:rgb(125,144,41)">println</span=
><span class=3D"o" style=3D"color:rgb(102,102,102)">(</span><span=
 class=3D"s" style=3D"color:rgb(186,33,33)">"=3D=3D=3D=3D=3D=3D=3D=
 Subject: "</span> <span class=3D"o" style=3D"color:rgb(102,102,1=
02)">+</span> <span class=3D"n">subject</span><span class=3D"o" s=
tyle=3D"color:rgb(102,102,102)">);</span><span class=3D"o" style=3D=
"color:rgb(102,102,102)">}</span><span class=3D"kd" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">public</span> <span class=3D"kd=
" style=3D"color:rgb(0,128,0); font-weight:bold">static</span> <s=
pan class=3D"kt" style=3D"color:rgb(176,0,64)">void</span> <span=20=
class=3D"nf" style=3D"color:rgb(0,0,255)">main</span><span class=3D=
"o" style=3D"color:rgb(102,102,102)">(</span><span class=3D"n">St=
ring</span><span class=3D"o" style=3D"color:rgb(102,102,102)">[]<=
/span> <span class=3D"n">args</span><span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">)</span> <span class=3D"kd" style=3D"color:=
rgb(0,128,0); font-weight:bold">throws</span> <span class=3D"n">E=
xception</span> <span class=3D"o" style=3D"color:rgb(102,102,102)=
">{</span><span class=3D"n">System</span><span class=3D"o" style=3D=
"color:rgb(102,102,102)">.</span><span class=3D"na" style=3D"colo=
r:rgb(125,144,41)">out</span><span class=3D"o" style=3D"color:rgb=
(102,102,102)">.</span><span class=3D"na" style=3D"color:rgb(125,=
144,41)">println</span><span class=3D"o" style=3D"color:rgb(102,1=
02,102)">(</span><span class=3D"s" style=3D"color:rgb(186,33,33)"=
>"A property file with the login context can be specified as the=20=
1st and the only paramater."</span><span class=3D"o" style=3D"col=
or:rgb(102,102,102)">);</span><span class=3D"kd" style=3D"color:r=
gb(0,128,0); font-weight:bold">final</span> <span class=3D"n">Krb=
</span> <span class=3D"n">krb</span> <span class=3D"o" style=3D"c=
olor:rgb(102,102,102)">=3D</span> <span class=3D"k" style=3D"colo=
r:rgb(0,128,0); font-weight:bold">new</span> <span class=3D"nf" s=
tyle=3D"color:rgb(0,0,255)">Krb</span><span class=3D"o" style=3D"=
color:rgb(102,102,102)">();</span><span class=3D"n">krb</span><sp=
an class=3D"o" style=3D"color:rgb(102,102,102)">.</span><span cla=
ss=3D"na" style=3D"color:rgb(125,144,41)">loginImpl</span><span c=
lass=3D"o" style=3D"color:rgb(102,102,102)">(</span><span class=3D=
"n">args</span><span class=3D"o" style=3D"color:rgb(102,102,102)"=
>.</span><span class=3D"na" style=3D"color:rgb(125,144,41)">lengt=
h</span> <span class=3D"o" style=3D"color:rgb(102,102,102)">=3D=3D=
</span> <span class=3D"mi" style=3D"color:rgb(102,102,102)">0</sp=
an> <span class=3D"o" style=3D"color:rgb(102,102,102)">?</span> <=
span class=3D"kc" style=3D"color:rgb(0,128,0); font-weight:bold">=
null</span> <span class=3D"o" style=3D"color:rgb(102,102,102)">:<=
/span> <span class=3D"n">args</span><span class=3D"o" style=3D"co=
lor:rgb(102,102,102)">[</span><span class=3D"mi" style=3D"color:r=
gb(102,102,102)">0</span><span class=3D"o" style=3D"color:rgb(102=
,102,102)">]);</span><span class=3D"o" style=3D"color:rgb(102,102=
,102)">}</span><span class=3D"o" style=3D"color:rgb(102,102,102)"=
>}</span></code></pre></div><p style=3D"margin-top:0px; margin-bo=
ttom:10px">=B4=B4=BD=A8=D2=BB=B8=F6=C5=E4=D6=C3=CE=C4=BC=FEkrb5.p=
roperties=A3=BA</p><div class=3D"highlight"><pre style=3D"overflo=
w:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace=
; font-size:13px; padding:9.5px; margin:10px auto; line-height:1.=
42857143; color:rgb(51,51,51); word-break:break-all; word-wrap:br=
eak-word; max-width:98%; background-color:rgb(254,251,243)"><code=
 class=3D"language-properties" style=3D"font-family:Menlo,'Andale=
 Mono',Consolas,'Courier New',Monaco,monospace; font-size:undefin=
ed; padding:0px; color:inherit; white-space:pre-wrap; background-=
color:transparent"><span class=3D"na" style=3D"color:rgb(125,144,=
41)">keyTab</span><span class=3D"o" style=3D"color:rgb(102,102,10=
2)">=3D</span><span class=3D"s" style=3D"color:rgb(186,33,33)">/e=
tc/hadoop/conf/hdfs.keytab</span><span class=3D"na" style=3D"colo=
r:rgb(125,144,41)">principal</span><span class=3D"o" style=3D"col=
or:rgb(102,102,102)">=3D</span><span class=3D"s" style=3D"color:r=
gb(186,33,33)">hdfs/cdh1@JAVACHEN.COM</span><span class=3D"na" st=
yle=3D"color:rgb(125,144,41)">doNotPrompt</span><span class=3D"o"=
 style=3D"color:rgb(102,102,102)">=3D</span><span class=3D"s" sty=
le=3D"color:rgb(186,33,33)">true</span><span class=3D"na" style=3D=
"color:rgb(125,144,41)">refreshKrb5Config</span><span class=3D"o"=
 style=3D"color:rgb(102,102,102)">=3D</span><span class=3D"s" sty=
le=3D"color:rgb(186,33,33)">true</span><span class=3D"na" style=3D=
"color:rgb(125,144,41)">useTicketCache</span><span class=3D"o" st=
yle=3D"color:rgb(102,102,102)">=3D</span><span class=3D"s" style=3D=
"color:rgb(186,33,33)">true</span><span class=3D"na" style=3D"col=
or:rgb(125,144,41)">renewTGT</span><span class=3D"o" style=3D"col=
or:rgb(102,102,102)">=3D</span><span class=3D"s" style=3D"color:r=
gb(186,33,33)">true</span><span class=3D"na" style=3D"color:rgb(1=
25,144,41)">useKeyTab</span><span class=3D"o" style=3D"color:rgb(=
102,102,102)">=3D</span><span class=3D"s" style=3D"color:rgb(186,=
33,33)">true</span><span class=3D"na" style=3D"color:rgb(125,144,=
41)">storeKey</span><span class=3D"o" style=3D"color:rgb(102,102,=
102)">=3D</span><span class=3D"s" style=3D"color:rgb(186,33,33)">=
true</span><span class=3D"na" style=3D"color:rgb(125,144,41)">isI=
nitiator</span><span class=3D"o" style=3D"color:rgb(102,102,102)"=
>=3D</span><span class=3D"s" style=3D"color:rgb(186,33,33)">true<=
/span></code></pre></div><p style=3D"margin-top:0px; margin-botto=
m:10px">=B1=E0=D2=EB java =B4=FA=C2=EB=B2=A2=D4=CB=D0=D0=A3=BA</p=
><div class=3D"highlight"><pre style=3D"overflow:auto; font-famil=
y:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px;=20=
padding:9.5px; margin:10px auto; line-height:1.42857143; color:rg=
b(51,51,51); word-break:break-all; word-wrap:break-word; max-widt=
h:98%; background-color:rgb(254,251,243)"><code class=3D"language=
-bash" style=3D"font-family:Menlo,'Andale Mono',Consolas,'Courier=
 New',Monaco,monospace; font-size:undefined; padding:0px; color:i=
nherit; white-space:pre-wrap; background-color:transparent"><span=
 class=3D"c" style=3D"color:rgb(64,128,128); font-style:italic">#=
 =CF=C8=CF=FA=BB=D9=B5=B1=C7=B0 ticket</span><span class=3D"nv" s=
tyle=3D"color:rgb(25,23,124)">$ </span>kdestroy=0A=0A<span class=3D=
"nv" style=3D"color:rgb(25,23,124)">$ </span>javac Krb.java=0A=0A=
<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>java -=
cp . Krb ./krb5.properties=0A</code></pre></div><h1 id=3D"6.-=D7=DC=
=BD=E1" style=3D"margin:20px 0px 10px; font-size:36px; font-famil=
y:inherit; font-weight:500; line-height:1.1"><a name=3D"t28"></a>=
=0A6. =D7=DC=BD=E1</h1><p style=3D"margin-top:0px; margin-bottom:=
10px">=B1=BE=CE=C4=BD=E9=C9=DC=C1=CB CDH Hadoop =BC=AF=B3=C9 kerb=
eros =C8=CF=D6=A4=B5=C4=B9=FD=B3=CC=A3=AC=C6=E4=D6=D0=D6=F7=D2=AA=
=D0=E8=D2=AA=D7=A2=D2=E2=D2=D4=CF=C2=BC=B8=B5=E3=A3=BA</p><ul sty=
le=3D"margin-top:0px; margin-bottom:10px"><li style=3D"margin:3px=
 0px">1. =C5=E4=D6=C3 hosts=A3=AC<code class=3D"prettyprint" styl=
e=3D"font-family:Menlo,Monaco,Consolas,'Courier New',monospace; f=
ont-size:13px; padding:2px 4px; color:rgb(199,37,78); background-=
color:rgb(254,251,243)">hostname</code>&nbsp;=C7=EB=CA=B9=D3=C3=D0=
=A1=D0=B4=A1=A3</li><li style=3D"margin:3px 0px">2. =C8=B7=B1=A3=20=
kerberos =BF=CD=BB=A7=B6=CB=BA=CD=B7=FE=CE=F1=B6=CB=C1=AC=CD=A8</=
li><li style=3D"margin:3px 0px">3. =CC=E6=BB=BB JRE =D7=D4=B4=F8=B5=
=C4 JCE jar =B0=FC</li><li style=3D"margin:3px 0px">4. =CE=AA Dat=
aNode =C9=E8=D6=C3=D4=CB=D0=D0=D3=C3=BB=A7=B2=A2=C5=E4=D6=C3&nbsp=
;<code class=3D"prettyprint" style=3D"font-family:Menlo,Monaco,Co=
nsolas,'Courier New',monospace; font-size:13px; padding:2px 4px;=20=
color:rgb(199,37,78); background-color:rgb(254,251,243)">JSVC_HOM=
E</code></li><li style=3D"margin:3px 0px">5. =C6=F4=B6=AF=B7=FE=CE=
=F1=C7=B0=A3=AC=CF=C8=BB=F1=C8=A1 ticket =D4=D9=D4=CB=D0=D0=CF=E0=
=B9=D8=C3=FC=C1=EE</li></ul><p style=3D"margin-top:0px; margin-bo=
ttom:10px">=BD=D3=CF=C2=C0=B4=BE=CD=CA=C7=C5=E4=D6=C3 Hadoop =BC=AF=
=C8=BA=D6=D0=C6=E4=CB=FB=B7=FE=CE=F1=D2=D4=BC=AF=B3=C9 kerberos =C8=
=CF=D6=A4=A3=AC=D3=C9=D3=DA=C6=AA=B7=F9=D4=AD=D2=F2=A3=AC=BA=F3=C3=
=E6=D4=D9=D7=F6=CB=B5=C3=F7=A1=A3</p><h1 id=3D"7.-=B2=CE=BF=BC=CE=
=C4=D5=C2" style=3D"margin:20px 0px 10px; font-size:36px; font-fa=
mily:inherit; font-weight:500; line-height:1.1"><a name=3D"t29"><=
/a>=0A7. =B2=CE=BF=BC=CE=C4=D5=C2</h1><ul style=3D"margin-top:0px=
; margin-bottom:10px"><li style=3D"margin:3px 0px"><a target=3D"_=
blank" href=3D"https://github.com/zouhc/MyHadoop/blob/master/doc/=
Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD=
%B2.md" style=3D"text-decoration: none;">Hadoop=B5=C4kerberos=B5=C4=
=CA=B5=BC=F9=B2=BF=CA=F0</a></li><li style=3D"margin:3px 0px"><a=20=
target=3D"_blank" href=3D"http://blog.chinaunix.net/uid-1838361-i=
d-3243243.html" style=3D"text-decoration: none;">hadoop =CC=ED=BC=
=D3kerberos=C8=CF=D6=A4</a></li><li style=3D"margin:3px 0px"><a t=
arget=3D"_blank" href=3D"http://blog.csdn.net/lalaguozhe/article/=
details/11570009" style=3D"text-decoration: none;">YARN &amp; HDF=
S2 =B0=B2=D7=B0=BA=CD=C5=E4=D6=C3Kerberos</a></li><li style=3D"ma=
rgin:3px 0px"><a target=3D"_blank" href=3D"http://blog.godatadriv=
en.com/kerberos_kdc_install.html" style=3D"text-decoration: none;=
">Kerberos basics and installing a KDC</a></li><li style=3D"margi=
n:3px 0px"><a target=3D"_blank" href=3D"http://www.wuzesheng.com/=
?p=3D2345" style=3D"text-decoration: none;">Hadoop, Hbase, Zookee=
per=B0=B2=C8=AB=CA=B5=BC=F9</a></li><li><br><div style=3D"color:g=
ray"><small>=C0=B4=D4=B4=A3=BA&nbsp;&lt;<a href=3D"http://blog.cs=
dn.net/wulantian/article/details/42173023">http://blog.csdn.net/w=
ulantian/article/details/42173023</a><small>&gt;</small></small><=
/div><small><small>&nbsp;</small></small></li></ul></div></body><=
/html>=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A

------=_Next_Part_0000208484.142--

------=_Next_Part_0000625452.913--

