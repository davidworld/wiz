From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?SGFkb29wtcTIz9aku/rWxg==?=
Date: Date: Fri, 23 Jul 2021 05:51:01 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0000624795.964"

This is a multi-part message in MIME format.

------=_Next_Part_0000624795.964
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0000208265.342"


------=_Next_Part_0000208265.342
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0000208265.342
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!doctype html><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A<meta http-equiv=3D"X-UA-Compatible" content=3D=
"IE=3D8">=0A=0A=0A<title>Hadoop=B5=C4=C8=CF=D6=A4=BB=FA=D6=C6</ti=
tle>=0A=0A=0A=0A=0A<style type=3D"text/css" id=3D"wiz_todo_style_=
id" wiz_link_version=3D"01.00.09">.wiz-todo, .wiz-todo-img {width=
: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; ver=
tical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { d=
isplay: inline-block; padding-top: 7px; padding-bottom: 6px; line=
-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo=
-label-unchecked {text-decoration: initial;} .wiz-todo-completed-=
info {padding-left: 44px; display: inline-block; } .wiz-todo-avat=
ar { width:20px; height: 20px; vertical-align: -20%; margin-right=
:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { col=
or: #666; }</style>=0A=0A<style id=3D"wiz_custom_css">        htm=
l, body {            font-size: 15px;        }        body {    =20=
       font-family: Helvetica, 'Hiragino Sans GB', '=CE=A2=C8=ED=D1=
=C5=BA=DA', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-ser=
if;            line-height: 1.6;            margin: 0;          =20=
 padding: 20px 36px;            padding: 1.33rem 2.4rem;        }=
        h1, h2, h3, h4, h5, h6 {            margin: 20px 0 10px;=20=
           margin: 1.33rem 0 0.667rem;            padding: 0;   =20=
        font-weight: bold;        }        h1 {            font-s=
ize: 21px;            font-size: 1.4rem;        }        h2 {   =20=
        font-size: 20px;            font-size: 1.33rem;        }=20=
       h3 {            font-size: 18px;            font-size: 1.2=
rem;        }        h4 {            font-size: 17px;           =20=
font-size: 1.13rem;        }        h5 {            font-size: 15=
px;            font-size: 1rem;        }        h6 {            f=
ont-size: 15px;            font-size: 1rem;            color: #77=
7777;            margin: 1rem 0;        }        div, p, ul, ol,=20=
dl, li {            margin: 0;        }        blockquote, table,=
 pre, code{            margin: 8px 0;        }        ul, ol {  =20=
         padding-left: 32px;            padding-left: 2.13rem;  =20=
     }        blockquote {            border-left: 4px solid #ddd=
ddd;            padding: 0 12px;            padding: 0 0.8rem;  =20=
         color: #aaa;        }        blockquote > :first-child {=
            margin-top: 0;        }        blockquote > :last-chi=
ld {            margin-bottom: 0;        }        img {         =20=
  border: 0;            max-width: 100%;            height: auto=20=
!important;            margin: 2px 0;        }        table {   =20=
        border-collapse: collapse;            border: 1px solid #=
bbbbbb;        }        td {            padding:4px 8px;        =20=
   border-collapse: collapse;            border: 1px solid #bbbbb=
b;        }        @media screen and (max-width: 660px) {       =20=
    body {                padding: 20px 18px;                padd=
ing: 1.33rem 1.2rem;            }        }        @media only scr=
een and (-webkit-max-device-width: 1024px), only screen and (-o-m=
ax-device-width: 1024px), only screen and (max-device-width: 1024=
px), only screen and (-webkit-min-device-pixel-ratio: 3), only sc=
reen and (-o-min-device-pixel-ratio: 3), only screen and (min-dev=
ice-pixel-ratio: 3) {            html, body {                font=
-size: 17px;            }            body {                line-h=
eight: 1.7;                padding: 0.75rem 0.9375rem;          =20=
     color: #353c47;            }            h1 {               =20=
font-size: 2.125rem;            }            h2 {               =20=
font-size: 1.875rem;            }            h3 {               =20=
font-size: 1.625rem;            }            h4 {               =20=
font-size: 1.375rem;            }            h5 {               =20=
font-size: 1.125rem;            }            h6 {               =20=
color: inherit;            }            ul, ol {                p=
adding-left: 2.5rem;            }            blockquote {       =20=
        border-left: 4px solid #c8d4e8;                padding: 0=
 0.9375rem;                color: #b3c2dd;            }        }<=
/style></head>=0A=0A<body style><h1>Hadoop=B5=C4=C8=CF=D6=A4=BB=FA=
=D6=C6</h1><p>=CF=EA=CF=B8=BD=E9=C9=DC=C7=EB=B2=CE=BF=BC<a href=3D=
"http://dongxicheng.org/mapreduce/hadoop-security/">Hadoop=B0=B2=C8=
=AB=BB=FA=D6=C6=D1=D0=BE=BF</a></p><p><a href=3D"http://dongxiche=
ng.org/mapreduce/hadoop-kerberos-introduction/">hadoop-kerberos=BD=
=E9=C9=DC</a></p><p>=BC=F2=B5=A5=C0=B4=CB=B5,=C3=BB=D3=D0=D7=F6ke=
rberos=C8=CF=D6=A4=B5=C4Hadoop=A3=AC=D6=BB=D2=AA=D3=D0client=B6=CB=
=BE=CD=C4=DC=B9=BB=C1=AC=BD=D3=C9=CF=A1=A3=B6=F8=C7=D2=A3=AC=CD=A8=
=B9=FD=D2=BB=B8=F6=D3=D0root=B5=C4=C8=A8=CF=DE=B5=C4=C4=DA=CD=F8=BB=
=FA=C6=F7=A3=AC=CD=A8=B9=FD=B4=B4=BD=A8=B6=D4=D3=A6=B5=C4linux=D3=
=C3=BB=A7=A3=AC=BE=CD=C4=DC=B9=BB=B5=C3=B5=BDHadoop=BC=AF=C8=BA=C9=
=CF=B6=D4=D3=A6=B5=C4=C8=A8=CF=DE=A1=A3</p><p>=B6=F8=CA=B5=D0=D0K=
erberos=BA=F3=A3=AC=C8=CE=D2=E2=BB=FA=C6=F7=B5=C4=C8=CE=D2=E2=D3=C3=
=BB=A7=B6=BC=B1=D8=D0=EB=CF=D6=D4=DAKerberos=B5=C4KDC=D6=D0=D3=D0=
=BC=C7=C2=BC=A3=AC=B2=C5=D4=CA=D0=ED=BA=CD=BC=AF=C8=BA=D6=D0=C6=E4=
=CB=FC=B5=C4=C4=A3=BF=E9=BD=F8=D0=D0=CD=A8=D0=C5=A1=A3</p><h2><a=20=
id=3D"user-content-java=B5=C4=B0=B2=C8=AB=BB=FA=D6=C6" class=3D"a=
nchor" href=3D"https://github.com/zouhc/MyHadoop/blob/master/doc/=
Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD=
%B2.md#java%E7%9A%84%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6"></a>Jav=
a=B5=C4=B0=B2=C8=AB=BB=FA=D6=C6</h2><p>=CF=EA=CF=B8=BD=E9=C9=DC=C7=
=EB=B2=CE=BF=BC<a href=3D"http://docs.huihoo.com/java/j2ee/jaas.h=
tml">JAAS:=C1=E9=BB=EE=B5=C4Java=B0=B2=C8=AB=BB=FA=D6=C6</a></p><=
p>=BC=F2=B5=A5=C0=B4=CB=B5,=D3=C3=BB=A7=CA=D7=CF=C8=CA=B9=D3=C3Lo=
ginContext=B5=C4=BD=D3=BF=DA=BD=F8=D0=D0=B5=C7=C2=BC=D1=E9=D6=A4=A1=
=A3LoginContext=BF=C9=D2=D4=C5=E4=D6=C3=CA=B9=D3=C3=B2=BB=CD=AC=B5=
=C4=D1=E9=D6=A4=D0=AD=D2=E9=A1=A3=D1=E9=D6=A4=CD=A8=B9=FD=BA=F3=A3=
=AC=D3=C3=BB=A7=B5=C3=B5=BD =D2=BB=B8=F6subject=A3=AC=C0=EF=C3=E6=
=B0=FC=BA=AC=C6=BE=D6=A4=A3=AC=B9=AB=CB=BD=D4=BF=B5=C8=A1=A3=D6=AE=
=BA=F3=A3=AC=D4=DA=C9=E6=BC=B0=B5=BD=D0=E8=D2=AA=BD=F8=D0=D0=C8=A8=
=CF=DE=C8=CF=D6=A4=B5=C4=B5=D8=B7=BD=A3=A8=C0=FD=C8=E7=A3=AC=D7=CA=
=D4=B4=B7=C3=CE=CA=A3=AC=CD=E2=B2=BF=C1=B4=BD=D3=D0=A3=D1=E9=A3=AC=
=D0=AD=D2=E9=B7=C3=CE=CA=B5=C8=A3=A9=A3=AC=CA=B9=D3=C3doAs=BA=AF=CA=
=FD ()=B4=FA=CC=E6=D6=B1=BD=D3=D6=B4=D0=D0=A1=A3</p><p>=D5=E2=D1=F9=
=A3=ACjava=B5=C4=C8=A8=CF=DE=C8=CF=D6=A4=BE=CD=BA=CD=D3=C3=BB=A7=B5=
=C4=D2=B5=CE=F1=C2=DF=BC=AD=B7=D6=C0=EB=C1=CB=A1=A3</p><pre><code=
>    //=D2=BB=B6=CE=B5=E4=D0=CD=B5=C4=B4=FA=C2=EB=C8=E7=CF=C2=0A=20=
   LoginContext lc =3D new LoginContext("MyExample");=0A    try {=
=0A    lc.login();=0A    } catch (LoginException) {=0A    // Auth=
entication failed.=0A    }=0A=0A    // Authentication successful,=
 we can now continue.=0A    // We can use the returned Subject if=
 we like.=0A    Subject sub =3D lc.getSubject();=0A    Subject.do=
As(sub, new MyPrivilegedAction());=0A</code></pre><h2><a id=3D"us=
er-content-kerberos=C8=CF=D6=A4=D0=AD=D2=E9" class=3D"anchor" hre=
f=3D"https://github.com/zouhc/MyHadoop/blob/master/doc/Hadoop%E7%=
9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B2.md#ker=
beros%E8%AE%A4%E8%AF%81%E5%8D%8F%E8%AE%AE"></a>Kerberos=C8=CF=D6=A4=
=D0=AD=D2=E9</h2><p>Kerberos=CA=C7=D2=BB=D6=D6=CD=F8=C2=E7=C8=CF=D6=
=A4=D0=AD=D2=E9=A3=AC=C6=E4=C9=E8=BC=C6=C4=BF=B1=EA=CA=C7=CD=A8=B9=
=FD=C3=DC=D4=BF=CF=B5=CD=B3=CE=AA=BF=CD=BB=A7=BB=FA / =B7=FE=CE=F1=
=C6=F7=D3=A6=D3=C3=B3=CC=D0=F2=CC=E1=B9=A9=C7=BF=B4=F3=B5=C4=C8=CF=
=D6=A4=B7=FE=CE=F1=A1=A3</p><h3><a id=3D"user-content-=BC=F2=B5=A5=
=BD=E9=C9=DC" class=3D"anchor" href=3D"https://github.com/zouhc/M=
yHadoop/blob/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E=
%E8%B7%B5%E9%83%A8%E7%BD%B2.md#%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%=
8D"></a>=BC=F2=B5=A5=BD=E9=C9=DC</h3><p>=CA=B9=D3=C3Kerberos=CA=B1=
=A3=AC=D2=BB=B8=F6=BF=CD=BB=A7=B6=CB=D0=E8=D2=AA=BE=AD=B9=FD=C8=FD=
=B8=F6=B2=BD=D6=E8=C0=B4=BB=F1=C8=A1=B7=FE=CE=F1:</p><ol><li>=C8=CF=
=D6=A4=A3=BA=BF=CD=BB=A7=B6=CB=CF=F2=C8=CF=D6=A4=B7=FE=CE=F1=C6=F7=
=B7=A2=CB=CD=D2=BB=CC=F5=B1=A8=CE=C4=A3=AC=B2=A2=BB=F1=C8=A1=D2=BB=
=B8=F6=BA=AC=CA=B1=BC=E4=B4=C1=B5=C4Ticket-Granting Ticket=A3=A8T=
GT=A3=A9=A1=A3</li><li>=CA=DA=C8=A8=A3=BA=BF=CD=BB=A7=B6=CB=CA=B9=
=D3=C3TGT=CF=F2Ticket-Granting Server=A3=A8TGS=A3=A9=C7=EB=C7=F3=D2=
=BB=B8=F6=B7=FE=CE=F1Ticket=A1=A3</li><li>=B7=FE=CE=F1=C7=EB=C7=F3=
=A3=BA=BF=CD=BB=A7=B6=CB=CF=F2=B7=FE=CE=F1=C6=F7=B3=F6=CA=BE=B7=FE=
=CE=F1Ticket=A3=AC=D2=D4=D6=A4=CA=B5=D7=D4=BC=BA=B5=C4=BA=CF=B7=A8=
=D0=D4=A1=A3=B8=C3=B7=FE=CE=F1=C6=F7=CC=E1=B9=A9=BF=CD=BB=A7=B6=CB=
=CB=F9=D0=E8=B7=FE=CE=F1=A3=AC=D4=DAHadoop=D3=A6=D3=C3=D6=D0=A3=AC=
=B7=FE=CE=F1=C6=F7=BF=C9=D2=D4=CA=C7namenode=BB=F2jobtracker=A1=A3=
</li></ol><p>=CE=AA=B4=CB=A3=ACKerberos=D0=E8=D2=AAThe Key Distri=
bution Centers=A3=A8KDC=A3=A9=C0=B4=BD=F8=D0=D0=C8=CF=D6=A4=A1=A3=
KDC=D6=BB=D3=D0=D2=BB=B8=F6Master=A3=AC=BF=C9=D2=D4=B4=F8=B6=E0=B8=
=F6slaves=BB=FA=C6=F7=A1=A3slaves=BB=FA=C6=F7=BD=F6=BD=F8=D0=D0=C6=
=D5=CD=A8=D1=E9=D6=A4=A1=A3Mater=C9=CF=D7=F6=B5=C4=D0=DE=B8=C4=D0=
=E8=D2=AA=D7=D4=B6=AF=CD=AC=B2=BD=B5=BDslaves=A1=A3</p><p>=C1=ED=CD=
=E2=A3=ACKDC=D0=E8=D2=AA=D2=BB=B8=F6admin=A3=AC=C0=B4=BD=F8=D0=D0=
=C8=D5=B3=A3=B5=C4=B9=DC=C0=ED=B2=D9=D7=F7=A1=A3=D5=E2=B8=F6admin=
=BF=C9=D2=D4=CD=A8=B9=FD=D4=B6=B3=CC=BB=F2=D5=DF=B1=BE=B5=D8=B7=BD=
=CA=BD=B5=C7=C2=BC=A1=A3</p><h3><a id=3D"user-content-=B4=EE=BD=A8=
kerberos" class=3D"anchor" href=3D"https://github.com/zouhc/MyHad=
oop/blob/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%=
B7%B5%E9%83%A8%E7%BD%B2.md#%E6%90%AD%E5%BB%BAkerberos"></a>=B4=EE=
=BD=A8Kerberos</h3><p>=BB=B7=BE=B3=A3=BA=BC=D9=C9=E8=CE=D2=C3=C7=D3=
=D05=B8=F6=BB=FA=C6=F7=A3=AC=B7=D6=B1=F0=CA=C7hadoop1~hadoop5=A1=A3=
=D1=A1=D4=F1hadoop1,hadoop2,hadoop3=D7=E9=B3=C9=B7=D6=B2=BC=CA=BD=
=B5=C4KDC=A1=A3hadoop1=D7=F7=CE=AAMaster=BB=FA=C6=F7=A1=A3</p><p>=
1.=B0=B2=D7=B0=A3=BA=CD=A8=B9=FDyum=B0=B2=D7=B0=BC=B4=BF=C9=A3=AC=
=D7=E9=B3=C9KDC=A1=A3</p><pre><code>yum install -y krb5-server kr=
b5-lib krb5-workstation=0A</code></pre><p>2.=C5=E4=D6=C3=A3=BAKer=
beros=B5=C4=C5=E4=D6=C3=CE=C4=BC=FE=D6=BB=D3=D0=C1=BD=B8=F6=A1=A3=
=D4=DAHadoop1=D6=D0=B4=B4=BD=A8=D2=D4=CF=C2=C1=BD=B8=F6=CE=C4=BC=FE=
,=B2=A2=CD=AC=B2=BD/etc/krb5.conf=B5=BD=CB=F9=D3=D0=BB=FA=C6=F7=A1=
=A3</p><ol><li><p>/var/kerberos/krb5kdc/kdc.conf:=B0=FC=C0=A8KDC=B5=
=C4=C5=E4=D6=C3=D0=C5=CF=A2=A1=A3=C4=AC=C8=CF=B7=C5=D4=DA /usr/lo=
cal/var/krb5kdc=A1=A3=BB=F2=D5=DF=CD=A8=B9=FD=B8=B2=B8=C7KRB5_KDC=
_PROFILE=BB=B7=BE=B3=B1=E4=C1=BF=D0=DE=B8=C4=C5=E4=D6=C3=CE=C4=BC=
=FE=CE=BB=D6=C3=A1=A3</p><p>=C5=E4=D6=C3=CA=BE=C0=FD=A3=BA</p><pr=
e><code>[kdcdefaults]=0A kdc_ports =3D 88=0A kdc_tcp_ports =3D 88=
=0A=0A[realms]=0A HADOOP.COM =3D {=0A  master_key_type =3D aes128=
-cts=0A  acl_file =3D /var/kerberos/krb5kdc/kadm5.acl=0A  dict_fi=
le =3D /usr/share/dict/words=0A  admin_keytab =3D /var/kerberos/k=
rb5kdc/kadm5.keytab=0A  max_renewable_life =3D 7d=0A  supported_e=
nctypes =3D aes128-cts:normal des3-hmac-sha1:normal arcfour-hmac:=
normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-crc:normal=
=0A }=0A</code></pre><p>=CB=B5=C3=F7=A3=BA</p><pre><blockquote st=
yle=3D"margin: 0 0 0 40px; border: none; padding: 0px;"><code>HAD=
OOP.COM:=CA=C7=C9=E8=B6=A8=B5=C4realms=A1=A3=C3=FB=D7=D6=CB=E6=D2=
=E2=A1=A3Kerberos=BF=C9=D2=D4=D6=A7=B3=D6=B6=E0=B8=F6realms=A3=AC=
=BB=E1=D4=F6=BC=D3=B8=B4=D4=D3=B6=C8=A1=A3=B1=BE=CE=C4=B2=BB=CC=BD=
=CC=D6=A1=A3=B4=F3=D0=A1=D0=B4=C3=F4=B8=D0=A3=AC=D2=BB=B0=E3=CE=AA=
=C1=CB=CA=B6=B1=F0=CA=B9=D3=C3=C8=AB=B2=BF=B4=F3=D0=B4=A1=A3=D5=E2=
=B8=F6realms=B8=FA=BB=FA=C6=F7=B5=C4host=C3=BB=D3=D0=B4=F3=B9=D8=CF=
=B5=A1=A3</code></blockquote><code>=0Amax_renewable_life =3D 7d =C9=
=E6=BC=B0=B5=BD=CA=C7=B7=F1=C4=DC=BD=F8=D0=D0ticket=B5=C4renwe=B1=
=D8=D0=EB=C5=E4=D6=C3=A1=A3=0A=0Amaster_key_type:=BA=CDsupported_=
enctypes=C4=AC=C8=CF=CA=B9=D3=C3aes256-cts=A1=A3=D3=C9=D3=DA=A3=AC=
JAVA=CA=B9=D3=C3aes256-cts=D1=E9=D6=A4=B7=BD=CA=BD=D0=E8=D2=AA=B0=
=B2=D7=B0=B6=EE=CD=E2=B5=C4jar=B0=FC=A1=A3=CD=C6=BC=F6=B2=BB=CA=B9=
=D3=C3=A1=A3=0A=0Aacl_file:=B1=EA=D7=A2=C1=CBadmin=B5=C4=D3=C3=BB=
=A7=C8=A8=CF=DE=A3=AC=D0=E8=D2=AA=D3=C3=BB=A7=D7=D4=BC=BA=B4=B4=BD=
=A8=A1=A3=CE=C4=BC=FE=B8=F1=CA=BD=CA=C7 =0A     Kerberos_principa=
l permissions [target_principal]  [restrictions]=0A    =D6=A7=B3=D6=
=CD=A8=C5=E4=B7=FB=B5=C8=A1=A3=D7=EE=BC=F2=B5=A5=B5=C4=D0=B4=B7=A8=
=CA=C7=0A    */admin@HADOOP.COM      *=0A    =B4=FA=B1=ED=C3=FB=B3=
=C6=C6=A5=C5=E4*/admin@HADOOP.COM =B6=BC=C8=CF=CE=AA=CA=C7admin=A3=
=AC=C8=A8=CF=DE=CA=C7 *=A1=A3=B4=FA=B1=ED=C8=AB=B2=BF=C8=A8=CF=DE=
=A1=A3=0A=0Aadmin_keytab:KDC=BD=F8=D0=D0=D0=A3=D1=E9=B5=C4keytab=A1=
=A3=BA=F3=CE=C4=BB=E1=CC=E1=BC=B0=C8=E7=BA=CE=B4=B4=BD=A8=A1=A3=0A=
=0Asupported_enctypes:=D6=A7=B3=D6=B5=C4=D0=A3=D1=E9=B7=BD=CA=BD=A1=
=A3=D7=A2=D2=E2=B0=D1aes256-cts=C8=A5=B5=F4=A1=A3=0A</code></pre>=
</li><li><p>/etc/krb5.conf:=B0=FC=BA=ACKerberos=B5=C4=C5=E4=D6=C3=
=D0=C5=CF=A2=A1=A3=C0=FD=C8=E7=A3=ACKDC=B5=C4=CE=BB=D6=C3=A3=ACKe=
rberos=B5=C4admin=B5=C4realms =B5=C8=A1=A3=D0=E8=D2=AA=CB=F9=D3=D0=
=CA=B9=D3=C3=B5=C4Kerberos=B5=C4=BB=FA=C6=F7=C9=CF=B5=C4=C5=E4=D6=
=C3=CE=C4=BC=FE=B6=BC=CD=AC=B2=BD=A1=A3=D5=E2=C0=EF=BD=F6=C1=D0=BE=
=D9=D0=E8=D2=AA=B5=C4=BB=F9=B1=BE=C5=E4=D6=C3=A1=A3=CF=EA=CF=B8=BD=
=E9=C9=DC=B2=CE=BF=BC=A3=BA<a href=3D"http://web.mit.edu/~kerbero=
s/krb5-devel/doc/admin/conf_files/krb5_conf.html">krb5conf</a></p=
><p>=C5=E4=D6=C3=CA=BE=C0=FD=A3=BA</p><pre><code>[logging]=0A def=
ault =3D FILE:/var/log/krb5libs.log=0A kdc =3D FILE:/var/log/krb5=
kdc.log=0A admin_server =3D FILE:/var/log/kadmind.log=0A=0A[libde=
faults]=0A default_realm =3D HADOOP.COM=0A dns_lookup_realm =3D f=
alse=0A dns_lookup_kdc =3D false=0A ticket_lifetime =3D 24h=0A re=
new_lifetime =3D 7d=0A max_life =3D 12h 0m 0s=0A forwardable =3D=20=
true=0A udp_preference_limit =3D 1=0A=0A[realms]=0A HADOOP.COM =3D=
 {=0A  kdc =3D hadoop1:88=0A  admin_server =3D hadoop1:749=0A  de=
fault_domain =3D HADOOP.COM=0A }=0A=0A[appdefaults]=0A</code></pr=
e><p>=CB=B5=C3=F7=A3=BA</p><pre><code>[logging]=A3=BA=B1=ED=CA=BE=
server=B6=CB=B5=C4=C8=D5=D6=BE=B5=C4=B4=F2=D3=A1=CE=BB=D6=C3=0A[l=
ibdefaults]=A3=BA=C3=BF=D6=D6=C1=AC=BD=D3=B5=C4=C4=AC=C8=CF=C5=E4=
=D6=C3=A3=AC=D0=E8=D2=AA=D7=A2=D2=E2=D2=D4=CF=C2=BC=B8=B8=F6=B9=D8=
=BC=FC=B5=C4=D0=A1=C5=E4=D6=C3=0A   default_realm =3D HADOOP.COM=20=
=C4=AC=C8=CF=B5=C4realm=A3=AC=B1=D8=D0=EB=B8=FA=D2=AA=C5=E4=D6=C3=
=B5=C4realm=B5=C4=C3=FB=B3=C6=D2=BB=D6=C2=A1=A3=0A   udp_preferen=
ce_limit =3D 1 =BD=FB=D6=B9=CA=B9=D3=C3udp=BF=C9=D2=D4=B7=C0=D6=B9=
=D2=BB=B8=F6Hadoop=D6=D0=B5=C4=B4=ED=CE=F3=0A[realms]:=C1=D0=BE=D9=
=CA=B9=D3=C3=B5=C4realm=A1=A3=0A   kdc=A3=BA=B4=FA=B1=ED=D2=AAkdc=
=B5=C4=CE=BB=D6=C3=A1=A3=B8=F1=CA=BD=CA=C7 =BB=FA=C6=F7:=B6=CB=BF=
=DA=0A   admin_server:=B4=FA=B1=EDadmin=B5=C4=CE=BB=D6=C3=A1=A3=B8=
=F1=CA=BD=CA=C7 =BB=FA=C6=F7:=B6=CB=BF=DA=0A   default_domain=A3=BA=
=B4=FA=B1=ED=C4=AC=C8=CF=B5=C4=D3=F2=C3=FB=0A=0A[appdefaults]:=BF=
=C9=D2=D4=C9=E8=B6=A8=D2=BB=D0=A9=D5=EB=B6=D4=CC=D8=B6=A8=D3=A6=D3=
=C3=B5=C4=C5=E4=D6=C3=A3=AC=B8=B2=B8=C7=C4=AC=C8=CF=C5=E4=D6=C3=A1=
=A3=0A</code></pre></li><li><p>=B3=F5=CA=BC=BB=AF=B2=A2=C6=F4=B6=AF=
=A3=BA=CD=EA=B3=C9=C9=CF=C3=E6=C1=BD=B8=F6=C5=E4=D6=C3=CE=C4=BC=FE=
=BA=F3=A3=AC=BE=CD=BF=C9=D2=D4=BD=F8=D0=D0=B3=F5=CA=BC=BB=AF=B2=A2=
=C6=F4=B6=AF=C1=CB=A1=A3</p><p>A.=B3=F5=CA=BC=BB=AF=CA=FD=BE=DD=BF=
=E2:=D4=DAhadoop1=C9=CF=D4=CB=D0=D0=C3=FC=C1=EE=A1=A3=C6=E4=D6=D0=
-r=D6=B8=B6=A8=B6=D4=D3=A6realm=A1=A3</p><pre><code>kdb5_util cre=
ate -r HADOOP.COM -s=0A</code></pre><p>=C8=E7=B9=FB=D3=F6=B5=BD=CA=
=FD=BE=DD=BF=E2=D2=D1=BE=AD=B4=E6=D4=DA=B5=C4=CC=E1=CA=BE=A3=AC=BF=
=C9=D2=D4=B0=D1/var/kerberos/krb5kdc/=C4=BF=C2=BC=CF=C2=B5=C4prin=
cipal=B5=C4=CF=E0=B9=D8=CE=C4=BC=FE=B6=BC=C9=BE=B3=FD=B5=F4=A1=A3=
=C4=AC=C8=CF=B5=C4=CA=FD=BE=DD=BF=E2=C3=FB=D7=D6=B6=BC=CA=C7princ=
ipal=A1=A3=BF=C9=D2=D4=CA=B9=D3=C3-d=D6=B8=B6=A8=CA=FD=BE=DD=BF=E2=
=C3=FB=D7=D6=A1=A3(=C9=D0=CE=B4=B2=E2=CA=D4=B6=E0=CA=FD=BE=DD=BF=E2=
=B5=C4=C7=E9=BF=F6)=A1=A3</p><p>B.=C6=F4=B6=AFkerberos=A1=A3=C8=E7=
=B9=FB=CF=EB=BF=AA=BB=FA=D7=D4=C6=F4=B6=AF=A3=AC=D0=E8=D2=AAstash=
=CE=C4=BC=FE=A1=A3</p><pre><code> /usr/local/sbin/krb5kdc=0A /usr=
/local/sbin/kadmind=0A</code></pre><pre><code><h3 id=3D"3.2.6-=C6=
=F4=B6=AF=B7=FE=CE=F1" style=3D"font-family:inherit; font-weight:=
500; line-height:1.1; margin-top:20px; margin-bottom:10px; font-s=
ize:24px">=C6=F4=B6=AF=B7=FE=CE=F1</h3><div class=3D"highlight"><=
pre style=3D"overflow:auto; font-family:Menlo,Monaco,Consolas,'Co=
urier New',monospace; font-size:13px; padding:9.5px; margin:10px=20=
auto; line-height:1.42857143; color:rgb(51,51,51); word-break:bre=
ak-all; word-wrap:break-word; max-width:98%; background-color:rgb=
(254,251,243)"><code class=3D"language-bash" style=3D"font-family=
:Menlo,'Andale Mono',Consolas,'Courier New',Monaco,monospace; fon=
t-size:undefined; padding:0px; color:inherit; white-space:pre-wra=
p; background-color:transparent"><span class=3D"nv" style=3D"colo=
r:rgb(25,23,124)">$ </span>chkconfig --level <span class=3D"m" st=
yle=3D"color:rgb(102,102,102)">35</span> krb5kdc on=0A<span class=
=3D"nv" style=3D"color:rgb(25,23,124)">$ </span>chkconfig --level=
 <span class=3D"m" style=3D"color:rgb(102,102,102)">35</span> kad=
min on=0A<span class=3D"nv" style=3D"color:rgb(25,23,124)">$ </sp=
an>service krb5kdc start=0A<span class=3D"nv" style=3D"color:rgb(=
25,23,124)">$ </span>service kadmin start=0A</code></pre></div></=
code></pre><p>=D6=C1=B4=CBkerberos=A3=AC=B4=EE=BD=A8=CD=EA=B1=CF=A1=
=A3</p></li><li><p>=B4=EE=BD=A8Slave KDCs</p><p>=CE=AA=C1=CB=D4=DA=
=C9=FA=B2=FA=BB=B7=BE=B3=D6=D0=BB=F1=B5=C3=B8=DF=BF=C9=D3=C3=B5=C4=
KDC=A1=A3=BB=B9=D0=E8=D2=AA=B4=EE=BD=A8Slave KDCs=A1=A3 TODO =BE=AD=
=B9=FD=B8=F7=D6=D6=C5=AC=C1=A6=BB=B9=CA=C7=B2=BB=C4=DC=B3=C9=B9=A6=
=CD=AC=B2=BD=A3=AC=CF=C8=B7=C5=CF=C2=A1=A3</p></li><li><p>=B2=E2=CA=
=D4kerberos=A3=AC=B4=EE=BD=A8=CD=EA=B1=CF=BA=F3=A3=AC=BD=F8=D0=D0=
=D2=D4=CF=C2=B2=BD=D6=E8=B2=E2=CA=D4Kerberos=CA=C7=B7=F1=BF=C9=D3=
=C3=A1=A3</p><p>A. =BD=F8=C8=EBkadmin=D4=DAkadmin=C9=CF=CC=ED=BC=D3=
=D2=BB=B8=F6=B3=AC=BC=B6=B9=DC=C0=ED=D4=B1=D5=CB=BB=A7=A3=AC=D0=E8=
=D2=AA=CA=E4=C8=EBpasswd</p><pre><code>kadmin.local=0Aaddprinc ad=
min/admin    =C3=DC=C2=EBadmin=0A</code></pre><p>B. =D4=DA=C6=E4=CB=
=FC=BB=FA=C6=F7=B3=A2=CA=D4=CD=A8=B9=FDkadmin=C1=AC=BD=D3,=D0=E8=D2=
=AA=CA=E4=C8=EB=C3=DC=C2=EB</p><pre><code>kinit admin/admin=0Akad=
min =0A</code></pre><p>=C8=E7=B9=FB=C4=DC=B3=C9=B9=A6=BD=F8=C8=EB=
=A3=AC=D4=F2=B4=EE=BD=A8=B3=C9=B9=A6=A1=A3</p></li></ol><h3><a id=
=3D"user-content-kerberos=C8=D5=B3=A3=B2=D9=D7=F7" class=3D"ancho=
r" href=3D"https://github.com/zouhc/MyHadoop/blob/master/doc/Hado=
op%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B2.=
md#kerberos%E6%97%A5%E5%B8%B8%E6%93%8D%E4%BD%9C"></a>kerberos=C8=D5=
=B3=A3=B2=D9=D7=F7</h3><ul><li><p>=B9=DC=C0=ED=D4=B1=B2=D9=D7=F7<=
/p><ol><li><p>=B5=C7=C2=BC=B5=BD=B9=DC=C0=ED=D4=B1=D5=CB=BB=A7: =C8=
=E7=B9=FB=D4=DA=B1=BE=BB=FA=C9=CF=A3=AC=BF=C9=D2=D4=CD=A8=B9=FDka=
dmin.local=D6=B1=BD=D3=B5=C7=C2=BC=A1=A3=C6=E4=CB=FC=BB=FA=C6=F7=B5=
=C4=A3=AC=CF=C8=CA=B9=D3=C3kinit=BD=F8=D0=D0=D1=E9=D6=A4=A1=A3</p=
><pre><code>kadmin.local  =0A=0Akinit admin/admin=0Akadmin =0A</c=
ode></pre></li><li><p>=D4=F6=C9=BE=B8=C4=B2=E9=D5=CB=BB=A7:=D4=DA=
=B9=DC=C0=ED=D4=B1=B5=C4=D7=B4=CC=AC=CF=C2=CA=B9=D3=C3addprinc,de=
lprinc,modprinc,listprincs=C3=FC=C1=EE=A1=A3=CA=B9=D3=C3?=BF=C9=D2=
=D4=C1=D0=B3=F6=CB=F9=D3=D0=B5=C4=C3=FC=C1=EE=A1=A3</p><pre><code=
>kamdin:addprinc -randkey hdfs/hadoop1=0Akamdin:delprinc hdfs/had=
oop1=0Akamdin:listprincs=C3=FC=C1=EE=0A</code></pre></li><li><p>=C9=
=FA=B3=C9keytab:=CA=B9=D3=C3xst=C3=FC=C1=EE=BB=F2=D5=DFktadd=C3=FC=
=C1=EE</p><pre><code>kadmin:xst -k /xxx/xxx/kerberos.keytab hdfs/=
hadoop1=0A</code></pre></li></ol></li><li><p>=D3=C3=BB=A7=B2=D9=D7=
=F7</p><ol><li>=B2=E9=BF=B4=B5=B1=C7=B0=B5=C4=C8=CF=D6=A4=D3=C3=BB=
=A7:klist</li><li>=C8=CF=D6=A4=D3=C3=BB=A7:kinit -kt /xx/xx/kerbe=
ros.keytab hdfs/hadoop1</li><li>=C9=BE=B3=FD=B5=B1=C7=B0=B5=C4=C8=
=CF=D6=A4=B5=C4=BB=BA=B4=E6: kdestroy</li></ol></li></ul><h2><a i=
d=3D"user-content-=D4=DAcm=C9=CF=CA=B9=D3=C3kerberos=C8=CF=D6=A4"=
 class=3D"anchor" href=3D"https://github.com/zouhc/MyHadoop/blob/=
master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%=
83%A8%E7%BD%B2.md#%E5%9C%A8cm%E4%B8%8A%E4%BD%BF%E7%94%A8kerberos%=
E8%AE%A4%E8%AF%81"></a>=D4=DACM=C9=CF=CA=B9=D3=C3Kerberos=C8=CF=D6=
=A4</h2><p>=D4=DACM=C9=CF=CA=B9=D3=C3Kerberos=C8=CF=D6=A4=A3=AC=CB=
=FC=BB=E1=B0=EF=CE=D2=C3=C7=B4=B4=BD=A8=CB=F9=D3=D0=B5=C4=D0=E8=D2=
=AA=B5=C4Kerberos=D5=CB=BB=A7=A3=AC=B2=A2=C7=D2=D4=DA=C6=F4=B6=AF=
=B5=C4=CA=B1=BA=F2=D7=D4=B6=AF=C9=FA=B3=C9keytab=B4=E6=B7=C5=B5=BD=
=B6=D4=D3=A6=B5=C4=C6=F4=B6=AF=C4=BF=C2=BC=A3=AC=D4=DA=C5=E4=D6=C3=
=CE=C4=BC=FE=D6=D0=CC=ED=BC=D3=B6=D4=D3=A6=B5=C4keytab=CE=C4=BC=FE=
=C5=E4=D6=C3=BA=CD=D3=C3=BB=A7=C3=FB=A1=A3</p><p>=CB=F9=D2=D4=A3=AC=
=D6=BB=D0=E8=D2=AA=B8=F8CM=B4=B4=BD=A8=D2=BB=B8=F6=D3=B5=D3=D0=B9=
=DC=C0=ED=D4=B1=C8=A8=CF=DE=B5=C4=D5=CB=BB=A7=A1=A3CM=BE=CD=C4=DC=
=B9=BB=CD=EA=B3=C9=B4=F3=B2=BF=B7=D6=B5=C4=B3=F5=CA=BC=BB=AF=B9=A4=
=D7=F7=A1=A3</p><h2><a id=3D"user-content-=B3=F5=CA=BC=BB=AF=B2=BF=
=CA=F0" class=3D"anchor" href=3D"https://github.com/zouhc/MyHadoo=
p/blob/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7=
%B5%E9%83%A8%E7%BD%B2.md#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%83%A8%E7%=
BD%B2"></a>=B3=F5=CA=BC=BB=AF=B2=BF=CA=F0</h2><ol><li><p>=CE=AACM=
=CC=ED=BC=D3=D2=BB=B8=F6=D5=CB=BB=A7=A3=AC=B2=A2=C9=FA=B3=C9keyta=
b=CE=C4=BC=FE</p><p>kadmin kadmin:addprinc -randkey cloudera-scm/=
admin@HADOOP.COM kadmin:xst -k cmf.keytab cloudera-scm/admin@HADO=
OP.COM</p></li><li><p>=BD=AB=C9=CF=CE=C4=B2=FA=C9=FA=B5=C4keytab=CE=
=C4=BC=FE=D2=C6=B5=BDcloudera-scm=B5=C4=C5=E4=D6=C3=C4=BF=C2=BC=A3=
=AC=CC=ED=BC=D3cmf.principal=CE=C4=BC=FE=B2=A2=D0=B4=C8=EB=D5=CB=BB=
=A7=B5=C4=C3=FB=B3=C6=A3=AC=D7=EE=BA=F3=D0=DE=B8=C4=CE=C4=BC=FE=C8=
=A8=CF=DE=A1=A3</p><pre><code>mv cmf.keytab /etc/cloudera-scm-ser=
ver/=0Aecho "cloudera-scm/admin@HADOOP.COM" &gt;&gt; /etc/clouder=
a-scm-server/cmf.principal=0Achown cloudera-scm:cloudera-scm cmf.=
keytab =0Achmod 600 cmf.keytab =0Achown cloudera-scm:cloudera-scm=
 cmf.principal=0Achmod 600 cmf.principal=0A</code></pre><p>=C4=AC=
=C8=CF=C5=E4=D6=C3=C4=BF=C2=BC=D4=DA/etc/cloudera-scm-server/,=B5=
=AB=CA=C7=CE=D2=C3=C7=D0=DE=B8=C4=CE=AA/home/cloudera-manager/cm-=
4.6.3/etc/cloudera-scm-server/</p></li><li><p>=C9=E8=D6=C3CM=B5=C4=
default Realm =A3=BA=D4=DA=BD=E7=C3=E6=C9=CF=B6=A5=B2=BF=B5=C4Adm=
inistrator-setting-security-Kerberos Security Realm =CC=EE=C8=EB=20=
HADOOP.COM</p></li><li><p>=D5=EB=B6=D4=CB=F9=D3=D0=B7=FE=CE=F1=BF=
=AA=C6=F4security=D1=A1=CF=EE</p><ul><li>Zookeeper:<ul><li>=B9=B4=
=D1=A1 Zookeeper Service &gt; Configuration &gt; Enable Zookeeper=
 Security</li></ul></li><li>HDFS:<ul><li>=B9=B4=D1=A1 HDFS Servic=
e &gt; Configuration &gt; Authentication</li><li>=B9=B4=D1=A1 HDF=
S Service &gt; Configuration &gt; Authorization</li><li>=D0=DE=B8=
=C4Datanode Transceiver Port =B5=BD1004</li><li>=D0=DE=B8=C4Datan=
ode HTTP Web UI Port =B5=BD1006</li></ul></li><li>HBASE=A3=BA<ul>=
<li>=B9=B4=D1=A1HBase Service &gt; Configuration &gt; Authenticat=
ion</li></ul><h2><a id=3D"user-content---=B9=B4=D1=A1hbase-servic=
e--configuration---authorization-" class=3D"anchor" href=3D"https=
://github.com/zouhc/MyHadoop/blob/master/doc/Hadoop%E7%9A%84kerbe=
ros%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B2.md#--%E5%8B%BE%E=
9%80%89hbase-service--configuration---authorization-"></a>- =B9=B4=
=D1=A1HBase Service &gt; Configuration &gt; Authorization</h2></l=
i></ul></li><li>=C6=F4=B6=AF=BC=B4=BF=C9<br></li></ol><blockquote=
><p>=D6=D8=B4=F3=B5=C4bug: =B5=B1=CE=D2=D4=DA=B2=E2=CA=D4=BB=FA=C9=
=CF=B3=C9=B9=A6=C5=DC=CD=A8=D6=AE=BA=F3=A3=AC=D6=D8=D0=C2=C9=BE=B3=
=FD=C1=CBkerberos=B5=C4=CA=FD=BE=DD=BF=E2=BA=F3=A1=A3=B9=D8=B1=D5=
=B5=F4=CB=F9=D3=D0=B7=FE=CE=F1=B5=C4=B0=B2=C8=AB=D1=A1=CF=EE=A1=A3=
 =D6=D8=D0=C2=C6=F4=B6=AF=BA=F3=A3=ACGenerate Credentials=B2=BB=C4=
=DC=B3=C9=B9=A6=B4=B4=BD=A8=D5=CB=BB=A7=A1=A3=B6=F8=C7=D2=D2=B2=C1=
=AC=BD=D3=B2=BB=B5=BD=D2=D1=BE=AD=B4=E6=D4=DA=B5=C4=D5=CB=BB=A7=B5=
=C4=C4=DA=C8=DD=A1=A3 =B5=DA=B6=FE=CC=EC=BB=D8=C0=B4=A3=AC=B7=A2=CF=
=D6=B4=B4=BD=A8=C1=CB=C9=D9=C1=BF=B5=C4=D5=CB=BB=A7YARN=BA=CDmapr=
ed=B5=C4=D5=CB=BB=A7=A1=A3=B5=AB=CA=C7=C6=E4=CB=FC=B5=C4=D5=CB=BB=
=A7=B6=BC=C3=BB=D3=D0=A1=A3 =B2=C2=B2=E2=A3=BA=BF=C9=C4=DC=CA=C7=D2=
=F2=CE=AA=D4=F6=BC=D3=C1=CB=C1=BD=B8=F6=D5=CB=BB=A7=B7=D6=B1=F0=CA=
=C7 krbtgt/HADOOP.COM@HADOOP.COM krbtgt/hadoop1@HADOOP.COM =B8=F9=
=BE=DD=CA=FD=BE=DD=BF=E2=B5=C4=BD=E1=B9=B9=B7=D6=CE=F6=A3=AC=BB=B3=
=D2=C9cloudera manager=B0=D1keytab=B6=BC=B1=A3=B4=E6=C1=CB=A1=A3=CB=
=F9=D2=D4=A3=AC=B2=BB=D4=D9=D6=D8=D0=C2=B2=FA=C9=FAkeytab=A1=A3 k=
eytab=B2=BB=C4=DC=D6=D8=D0=C2=C9=FA=B3=C9=CA=C7=D2=BB=B8=F6=B4=F3=
=CE=CA=CC=E2=A1=A3</p></blockquote><h2><a id=3D"user-content-=B7=C7=
cm=CF=C2=B5=C4keytab=C5=E4=D6=C3" class=3D"anchor" href=3D"https:=
//github.com/zouhc/MyHadoop/blob/master/doc/Hadoop%E7%9A%84kerber=
os%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B2.md#%E9%9D%9Ecm%E4=
%B8%8B%E7%9A%84keytab%E9%85%8D%E7%BD%AE"></a>=B7=C7CM=CF=C2=B5=C4=
keytab=C5=E4=D6=C3</h2><p>=BC=EC=B2=E9=A3=BA=C8=E7=B9=FBJAVA=B5=C4=
=B0=E6=B1=BE=D4=DA1.6.21=BB=F2=D2=D4=C7=B0=B5=C4,=BB=E1=D3=F6=B5=BD=
=BF=CD=BB=A7=B6=CB=D0=E8=D2=AArenew ticket,=B2=C5=C4=DC=CD=A8=B9=FD=
=C8=CF=D6=A4=A1=A3=B6=F8renwe ticket=B1=D8=D0=EB=B1=A3=D6=A4kdc=B5=
=C4=C5=E4=D6=C3=CE=C4=BC=FE=B0=FC=BA=ACmax_renewable_life =3D 7d=CF=
=EE=A1=A3</p><h3><a id=3D"user-content-=B4=B4=BD=A8=D5=CB=BB=A7"=20=
class=3D"anchor" href=3D"https://github.com/zouhc/MyHadoop/blob/m=
aster/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%8=
3%A8%E7%BD%B2.md#%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7"></a>=B4=B4=
=BD=A8=D5=CB=BB=A7</h3><p>=B4=B4=BD=A8=CB=F9=D3=D0=D5=CB=BB=A7,=C9=
=FA=B3=C9keytab(=CE=D2=C3=C7=CA=B9=D3=C3hadoop=D5=CB=BB=A7=C6=F4=B6=
=AF=CB=F9=D3=D0=B5=C4=B7=FE=CE=F1=A3=AC=CB=F9=D2=D4=A3=AC=D6=BB=C9=
=FA=B3=C9hadoop=BA=CDHTTP=D5=CB=BB=A7=BE=CD=D7=E3=B9=BB=C1=CB)</p=
><pre><code>kadmin:addprinc -randkey hadoop/hadoop1@HADOOP.COM=0A=
...=0Akadmin:addprinc -randkey hadoop/hadoop5@HADOOP.COM=0Akadmin=
:addprinc -randkey HTTP/hadoop1@HADOOP.COM=0A...=0Akadmin:addprin=
c -randkey HTTP/hadoop5@HADOOP.COM=0Akadmin:xst -k /xxx/hadoop.ke=
ytab hadoop/hadoop1 HTTP/hadoop1=0A...=0Akadmin:xst -k /xxx/hadoo=
p.keytab hadoop/hadoop5 HTTP/hadoop5=0A</code></pre><p>=CB=B5=C3=F7=
=A3=BA=D2=BB=B9=B2=CC=ED=BC=D3=C1=CB10=B8=F6=D5=CB=BB=A7=B7=D6=B1=
=F0=CA=C7hadoop=B5=C4hadoop1=B5=BDhadoop5=B5=C4=D5=CB=BB=A7=BA=CD=
HTTP=B5=C4hadoop1=B5=BDhadoop5=B5=C4=D5=CB=BB=A7=A1=A3=B5=BC=B3=F6=
=D5=CB=BB=A7=B5=C4=CA=B1=BA=F2=A3=AC=B0=D1hadoop1=BB=FA=C6=F7=B5=C4=
hadoop=D5=CB=BB=A7=BA=CDHTTP=D5=CB=BB=A7=B5=BC=C8=EB=B5=BD=CD=AC=D2=
=BB=B8=F6keytab=CE=C4=BC=FE=D6=D0=A1=A3</p><p>=D4=DA=B1=EA=D7=BC=B5=
=C4=C7=E9=BF=F6=D6=D0=A3=AC=D2=C0=BE=DD=B2=BB=CD=AC=B7=FE=CE=F1=B5=
=C4=C6=F4=B6=AF=D5=DF=B5=C4=B2=BB=CD=AC=A3=AC=BB=E1=B4=B4=BD=A8=B2=
=BB=CD=AC=B5=C4=D5=CB=BB=A7=A3=AC=B5=BC=B3=F6=B2=BB=CD=AC=B5=C4ke=
ytab=CE=C4=BC=FE=A1=A3=D3=C9=D3=DA=CE=D2=C3=C7=CA=B9=D3=C3=B5=C4=CA=
=C7hadoop=D3=C3=BB=A7=C6=F4=B6=AF=CB=F9=D3=D0=B7=FE=CE=F1=B5=C4=D7=
=B4 =BF=F6=A3=AC=CB=F9=D2=D4=D2=BB=B8=F6hadoop.keytab=BE=CD=D7=E3=
=B9=BB=CA=B9=D3=C3=C1=CB=A1=A3=C8=E7=B9=FB=CF=F1ClouderaManager=C4=
=C7=D1=F9=B5=C4=D2=BB=B8=F6=D3=C3=BB=A7=C6=F4=B6=AF=D2=BB=D6=D6=B7=
=FE=CE=F1=A3=AC=BE=CD=D2=AA=B4=B4=BD=A8=B2=BB=CD=AC=B5=C4=D3=C3=BB=
=A7=A3=AC=B5=BC=B3=F6=B2=BB=CD=AC =B5=C4keytab=A1=A3=C0=FD=C8=E7:=
hadoop1=B5=C4zookeeper=C5=E4=D6=C3=CE=C4=BC=FE=D6=D0=D0=E8=D2=AAz=
ookeeper.keytab=A3=AC=B5=B1=D6=D0=BA=AC=D3=D0 zookeeper/hadoop1=D5=
=E2=B8=F6=D5=CB=BB=A7</p><p>=CF=C2=CE=C4=CC=E1=B5=BD=B5=C4=C5=E4=D6=
=C3=CE=C4=BC=FE=D6=D0=CC=ED=BC=D3keytab=CE=C4=BC=FE=A3=AC=B6=BC=D2=
=AA=C7=F3=B2=BB=CD=AC=BB=FA=C6=F7=BA=AC=D3=D0=B6=D4=D3=A6=B5=C4=BB=
=FA=C6=F7=C3=FB=BA=CD=C6=F4=B6=AF=D3=C3=BB=A7=B5=C4keytab=CE=C4=BC=
=FE=A1=A3=D2=AA=B2=E2=CA=D4=D5=E2=B8=F6=BB=FA=C6=F7=B5=C4keytab=CE=
=C4=BC=FE=CA=C7=B7=F1=BF=C9=D3=C3=A3=AC=BF=C9=CA=B9=D3=C3=D2=D4=CF=
=C2=C3=FC=C1=EE=BD=F8=D0=D0=B2=E2=CA=D4:</p><pre><code>kinit -kt=20=
/xx/xx/hadoop.keytab hadoop/hadoop1=0Aklist =0A</code></pre><h3><=
a id=3D"user-content-=CE=AAzk=CC=ED=BC=D3=C8=CF=D6=A4" class=3D"a=
nchor" href=3D"https://github.com/zouhc/MyHadoop/blob/master/doc/=
Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD=
%B2.md#%E4%B8%BAzk%E6%B7%BB%E5%8A%A0%E8%AE%A4%E8%AF%81"></a>=CE=AA=
ZK=CC=ED=BC=D3=C8=CF=D6=A4</h3><ul><li>=D0=DE=B8=C4zoo.cfg=CC=ED=BC=
=D3=C5=E4=D6=C3<ul><li>authProvider.1=3Dorg.apache.zookeeper.serv=
er.auth.SASLAuthenticationProvider</li><li>jaasLoginRenew=3D36000=
00</li></ul></li><li><p>=D4=DA=C5=E4=D6=C3=C4=BF=C2=BC=D6=D0=CC=ED=
=BC=D3=B6=D4=D3=A6=D5=CB=BB=A7=B5=C4keytab=CE=C4=BC=FE=C7=D2=B4=B4=
=BD=A8jaas.conf=C5=E4=D6=C3=CE=C4=BC=FE,=C4=DA=C8=DD=C8=E7=CF=C2=A3=
=BA</p><pre><code>Server {=0A    com.sun.security.auth.module.Krb=
5LoginModule required=0A    useKeyTab=3Dtrue=0A    keyTab=3D"/XX/=
XX/hadoop.keytab"=0A    storeKey=3Dtrue=0A    useTicketCache=3Dtr=
ue=0A    principal=3D"hadoop/hadoop3@HADOOP.COM";=0A};=0A</code><=
/pre><p>=C6=E4=D6=D0keytab=CC=EE=D0=B4=D5=E6=CA=B5=B5=C4keytab=B5=
=C4=BE=F8=B6=D4=C2=B7=BE=B6=A3=ACprincipal=CC=EE=D0=B4=B6=D4=D3=A6=
=B5=C4=C8=CF=D6=A4=B5=C4=D3=C3=BB=A7=BA=CD=BB=FA=C6=F7=C3=FB=B3=C6=
=A1=A3</p></li><li><p>=D4=DA=C5=E4=D6=C3=C4=BF=C2=BC=D6=D0=CC=ED=BC=
=D3java.env=B5=C4=C5=E4=D6=C3=CE=C4=BC=FE=A3=AC=C4=DA=C8=DD=C8=E7=
=CF=C2=A3=BA</p><pre><code>export JVMFLAGS=3D"-Djava.security.aut=
h.login.config=3D/xx/xx/jaas.conf"=0A</code></pre></li><li><p>=C3=
=BF=B8=F6zookeeper=B5=C4=BB=FA=C6=F7=B6=BC=BD=F8=D0=D0=D2=D4=C9=CF=
=B5=C4=D0=DE=B8=C4</p></li><li><p>=C6=F4=B6=AF=B7=BD=CA=BD=BA=CD=C6=
=BD=B3=A3=CE=DE=D2=EC=A3=AC=C8=E7=B3=C9=B9=A6=CA=B9=D3=C3=B0=B2=C8=
=AB=B7=BD=CA=BD=C6=F4=B6=AF=A3=AC=C8=D5=D6=BE=D6=D0=BF=B4=B5=BD=C8=
=E7=CF=C2=C8=D5=D6=BE=A3=BA</p><pre><code>2013-11-18 10:23:30,067=
 ... - successfully logged in.=0A</code></pre></li></ul><h3><a id=
=3D"user-content-=CE=AAhdfs=CC=ED=BC=D3=C8=CF=D6=A4" class=3D"anc=
hor" href=3D"https://github.com/zouhc/MyHadoop/blob/master/doc/Ha=
doop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B=
2.md#%E4%B8%BAhdfs%E6%B7%BB%E5%8A%A0%E8%AE%A4%E8%AF%81"></a>=CE=AA=
HDFS=CC=ED=BC=D3=C8=CF=D6=A4</h3><ul><li><p>=D4=F6=BC=D3=BB=F9=B1=
=BE=C5=E4=D6=C3=B0=FC=C0=A8=B8=F7=D6=D6=B5=C4princal=BA=CDkeytab=CE=
=C4=BC=FE=B5=C4=C5=E4=D6=C3(=C9=FA=B3=C9=B5=C4hdfs=B5=C4keytab=BA=
=CDHTTP=B5=C4keytab=D7=EE=BA=C3=B7=C5=D2=BB=C6=F0=A3=AC=C8=DD=D2=D7=
=C5=E4=D6=C3=A1=A3=CF=C2=C3=E6=B5=C4=C5=E4=D6=C3=D6=D0keytab=CE=C4=
=BC=FE=CA=B9=D3=C3=BE=F8=B6=D4=C2=B7=BE=B6=A3=ACprincipal=CA=B9=D3=
=C3_HOST=A3=ACHadoop=BB=E1=D7=D4=B6=AF=CC=E6=BB=BB=CE=AA=B6=D4=D3=
=A6=B5=C4=D3=F2=C3=FB=A1=A3=A3=A9=A1=A3</p><ul><li><p>core-site.x=
ml</p><ul><li>hadoop.security.authorization=A3=BAtrue</li><li>had=
oop.security.authentication=A3=BAkerberos</li></ul></li><li><p>hd=
fs-site.xml</p><ul><li>dfs.block.access.token.enable=A3=BAtrue</l=
i><li>dfs.namenode.keytab.file: /xx/xx/hadoop.keytab</li><li>dfs.=
namenode.kerberos.principal: hadoop/_HOST@HADOOP.COM</li><li>dfs.=
namenode.kerberos.internal.spnego.principal: HTTP/_HOST@HADOOP.CO=
M</li><li>dfs.datanode.keytab.file: /xx/xx/hadoop.keytab</li><li>=
dfs.datanode.kerberos.principal: hadoop/_HOST@HADOOP.COM</li><li>=
dfs.datanode.address: 1004 (=D0=A1=D3=DA1024=A3=A9</li><li>dfs.da=
tanode.http.address: 1006 (=D0=A1=D3=DA1024=A3=A9</li><li>dfs.jou=
rnalnode.keytab.file: /xx/xx/hadoop.keytab</li><li>dfs.journalnod=
e.kerberos.principal: hadoop/_HOST@HADOOP.COM</li><li>dfs.journal=
node.kerberos.internal.spnego.principal: HTTP/_HOST@HADOOP.COM</l=
i></ul></li><li><p>hadoop-env.sh</p><pre><code>export HADOOP_SECU=
RE_DN_USER=3Dhadoop=0Aexport HADOOP_SECURE_DN_PID_DIR=3D/home/had=
oop/hadoop/pids=0Aexport HADOOP_SECURE_DN_LOG_DIR=3D/home/hadoop/=
hadoop/logs=0Aexport JSVC_HOME=3D/usr/bin=0A#=C8=E7=B9=FBroot=CF=C2=
=C3=BB=D3=D0JAVA_HOME=C5=E4=D6=C3=A3=AC=D4=F2=D0=E8=D2=AA=D6=B8=B6=
=A8JAVA_HOME=0Aexport JAVA_HOME=3D/home/hadoop/java/jdk =0A</code=
></pre></li></ul></li><li><p>=C6=F4=B6=AF=A3=BA=C9=E8=D6=C3=C1=CB=
Security=BA=F3=A3=ACNameNode=A3=ACQJM=A3=ACZKFC=BF=C9=D2=D4=CD=A8=
=B9=FDstart-dfs.sh=C6=F4=B6=AF=A1=A3DataNode=D0=E8=D2=AA=CA=B9=D3=
=C3 root=C8=A8=CF=DE=C6=F4=B6=AF=A1=A3=C9=E8=D6=C3=C1=CBHADOOP_SE=
CURE_DN_USER=B5=C4=BB=B7=BE=B3=B1=E4=C1=BF=BA=F3=A3=ACstart-dfs.s=
h=B5=C4=C6=F4=B6=AF=BD=C5=B1=BE=BD=AB=BB=E1=D7=D4=B6=AF=CC=F8=B9=FD=
DATANODE=B5=C4 =C6=F4=B6=AF=A1=A3=CB=F9=D2=D4=A3=AC=D5=FB=B8=F6=C6=
=F4=B6=AF=B9=FD=B3=CC=B7=D6=CE=AA=D2=D4=CF=C2=C1=BD=B2=BD=A3=BA</=
p><ul><li><p>=C6=F4=B6=AFNameNode=A3=ACQJM=A3=ACZKFC</p><pre><cod=
e>start-dfs.sh=0A</code></pre><p>=CB=B5=C3=F7:=B2=E9=BF=B4QJM=B5=C4=
=C8=D5=D6=BE=BA=CDZKFC=B5=C4=C8=D5=D6=BE=A1=A3=BC=EC=B2=E9=D3=D0=CE=
=DEexception=A1=A3QJM=B5=C4=B1=A8=B4=ED=B2=BB=BB=E1=D3=D0=C3=F7=CF=
=D4=B5=C4=CC=E1=CA=BE=A1=A3=C8=E7=B9=FB=C6=F4=B6=AF=B2=BB=B3=C9=B9=
=A6=BC=EC=B2=E9=D2=D4=CF=C2=BC=B8=B5=E3=CA=C7=B7=F1=D7=F6=BA=C3=A3=
=BA</p><ul><li>QJM=BA=CDNameNode=B6=D4=D3=A6=B5=C4keytab=CE=C4=BC=
=FE=CA=C7=B7=F1=B0=FC=BA=AChadoop=D5=CB=BB=A7=BA=CDHTTP=D5=CB=BB=A7=
=B6=D4=D3=A6=B8=C3=BB=FA=C6=F7=B5=C4kerberos=D5=CB=BB=A7=A1=A3</l=
i><li>keytab=CA=B9=D3=C3=BE=F8=B6=D4=C2=B7=BE=B6=A3=AC=BF=C9=D2=D4=
=B1=DC=C3=E2=D2=BB=D0=A9=CE=CA=CC=E2=A1=A3</li></ul><p>=D2=C9=BB=F3=
=A3=BAZKFC=D6=D0=D3=D0=C8=D5=D6=BE=A3=AC=B5=AB=CA=C7=B9=A4=D7=F7=D5=
=FD=B3=A3=A3=AC=B4=F3=B5=A8=D4=A4=B2=E2=C1=AC=BD=D3zookeeper=B2=BB=
=D0=E8=D2=AA=C7=BF=D6=C6=CD=A8=B9=FDjaas=D1=E9=D6=A4=A1=A3TODO=A3=
=BA=D1=E9=D6=A4=B4=CB=B2=C2=CF=EB=A1=A3</p><pre><code>INFO org.ap=
ache.zookeeper.ClientCnxn: Opening socket connection to server ha=
doop3/10.1.74.46:59181. Will not attempt to authenticate using SA=
SL (=CE=DE=B7=A8=B6=A8=CE=BB=B5=C7=C2=BC=C5=E4=D6=C3)=0A</code></=
pre></li><li><p>=C6=F4=B6=AFDataNode=A3=BA</p><ul><li><p>=C5=E4=D6=
=C3JSVC=A3=BADataNode=D0=E8=D2=AAJSVC=C6=F4=B6=AF=A1=A3=CA=D7=CF=C8=
=B0=B2=D7=B0JSVC=A3=AC=C8=BB=BA=F3=C5=E4=D6=C3=B5=C4hadoop-env.sh=
=B5=C4JSVC_HOME=B1=E4=C1=BF=A1=A3JSVC=D4=CB=D0=D0=BB=B9=D0=E8=D2=AA=
=D2=BB=B8=F6commons-daemon-xxx.jar=B0=FC=A1=A3=B4=D3<a href=3D"ht=
tp://archive.apache.org/dist/commons/daemon/binaries/">commons/da=
emon</a>=CF=C2=D4=D8=D2=BB=B8=F6=D7=EE=D0=C2=B0=E6=B1=BE=B5=C4jar=
=B0=FC=A1=A3=B5=B1=C7=B0=A3=ACJSVC=C6=F4=B6=AF=B5=C4=CA=B1=BA=F2=D3=
=F6=B5=BD=D2=BB=B8=F6=C6=E6=B9=D6=B5=C4bug=A3=AC=BE=CD=CA=C7JSVC=B5=
=C4classpath=B2=BB=D6=A7=B3=D6*=C6=A5=C5=E4=A1=A3=CF=EA=CF=B8=D0=DE=
=B8=C4=C8=E7=CF=C2=A3=BA</p><pre><code>#=CC=ED=BC=D3commons-daemo=
n=B5=C4jar=B0=FC,=B2=A2=CC=E6=BB=BB=C2=B7=BE=B6=CE=AA=BE=F8=B6=D4=
=C2=B7=BE=B6=0Aexport CLASSPATH=3D$CLASSPATH:/xxx/commons-daemon-=
1.0.15.jar=0Atemp=3D${CLASSPATH//':'/' '}=0At=3D`echo $temp`=0Aex=
port CLASSPATH=3D${t//' '/':'}=0A</code></pre></li><li><p>mv=CE=CA=
=CC=E2:=D3=C9=D3=DA=C8=A8=CF=DE=CE=CA=CC=E2=A3=AC=D4=DA=D2=C6=B6=AF=
=C8=D5=D6=BE=CE=C4=BC=FE=C6=F4=B6=AF=B5=C4=CA=B1=BA=F2=A3=AC=BB=E1=
=D1=AF=CE=CA=CA=C7=B7=F1=B8=B2=B8=C7=D6=BB=B6=C1=B5=C4=C8=D5=D6=BE=
=CE=C4=BC=FE=A1=A3=D5=E2=B8=F6=BB=E1=B5=BC=D6=C2=CA=B9=D3=C3start=
-secure-dns.sh=C6=F4=B6=AF=B5=C4=CA=B1=BA=F2=B2=BB=CB=B3=B3=A9=A1=
=A3=CD=C6=BC=F6=D0=DE=B8=C4hadoop-daemon.sh=B5=C474=D0=D0:</p><pr=
e><code>mv "$log" "$log.$num"; --&gt;=D0=DE=B8=C4=CE=AA--&gt; mv=20=
-f "$log" "$log.$num";         =0A</code></pre></li><li><p>=C6=F4=
=B6=AF=A3=BA</p><ul><li><p>=C7=D0=BB=BB=B5=BDroot=D3=C3=BB=A7=A3=AC=
=D0=E8=D2=AA=C5=E4=D6=C3=D5=E2=B8=F6root=D3=C3=BB=A7=C3=E2=C3=DC=C2=
=EB=B5=C7=C2=BD=B5=BD=C6=E4=CB=FC=B5=C4=BB=FA=C6=F7=A1=A3</p><pre=
><code>#=D7=D4=B6=AF=B5=C7=C2=BD=B2=A2=C6=F4=B6=AFdatanode=0Ash /=
home/xx/hadoop/sbin/start-secure-dns.sh=0A</code></pre></li><li><=
p>=B7=F1=D4=F2=A3=AC=D0=E8=D2=AA=B5=A5=B6=C0=B5=C7=C2=BD=B5=BD=CB=
=F9=D3=D0=BB=FA=C6=F7=C6=F4=B6=AFdatanode=A1=A3</p><pre><code>#=C8=
=E7=B9=FB=B5=A5=B6=C0=B5=C7=C2=BD=C6=F4=B6=AFdatanode=0Ash /home/=
xx/hadoop/sbin/hadoop-daemon.sh datanode start=0A</code></pre></l=
i></ul></li></ul></li></ul></li><li><p>=B2=E2=CA=D4=A3=BA=CA=B9=D3=
=C3=C8=CE=D2=E2=D3=C3=BB=A7=CD=A8=B9=FDkeytab=CE=C4=BC=FE=BD=F8=D0=
=D0=C8=CF=D6=A4=A3=AC=D4=CB=D0=D0hdfs=CF=E0=B9=D8=C3=FC=C1=EE=A1=A3=
</p><pre><code>kinit -kt /xx/xx/qiujw/keytab qiujw/hadoopN=0A#=B6=
=D4=D3=DAjava1.6_26=D2=D4=CF=C2=B0=E6=B1=BE=B5=C4=D0=E8=D2=AArene=
w ticket=0Akinit -R=0Aklist=0Ahdfs dfs -ls /tmp=0A</code></pre></=
li></ul><h3><a id=3D"user-content-=CE=AAyarn=CC=ED=BC=D3=C8=CF=D6=
=A4=C5=E4=D6=C3" class=3D"anchor" href=3D"https://github.com/zouh=
c/MyHadoop/blob/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE=
%9E%E8%B7%B5%E9%83%A8%E7%BD%B2.md#%E4%B8%BAyarn%E6%B7%BB%E5%8A%A0=
%E8%AE%A4%E8%AF%81%E9%85%8D%E7%BD%AE"></a>=CE=AAYARN=CC=ED=BC=D3=C8=
=CF=D6=A4=C5=E4=D6=C3</h3><ul><li><p>=CC=ED=BC=D3=C5=E4=D6=C3</p>=
<ul><li>yarn.xml:<ul><li>yarn.resourcemanager.keytab:/xx/xx/hadoo=
p.keytab</li><li>yarn.resourcemanager.principal:hadoop/_HOST@HADO=
OP.COM</li><li>yarn.nodemanager.keytab:/xx/xx/hadoop.keytab</li><=
li>yarn.nodemanager.principal:hadoop/_HOST@HADOOP.COM</li><li>yar=
n.nodemanager.container-executor.class:org.apache.hadoop.yarn.ser=
ver.nodemanager.LinuxContainerExecutor</li><li>yarn.nodemanager.l=
inux-container-executor.group:hadoop</li></ul></li><li>mapred.xml=
:<ul><li>mapreduce.jobhistory.keytab:/xx/xx/hadoop.keytab</li><li=
>&gt;mapreduce.jobhistory.principal:hadoop/_HOST@HADOOP.COM</li><=
/ul></li></ul></li><li><p>=D0=DE=B8=C4container-executor.conf.dir=
=A3=AC=D6=D8=D0=C2=B1=E0=D2=EBcontainer-executor=A3=BA</p><pre><c=
ode>cp ~/hadoop/src=0Amvn package -Pdist,native -DskipTests -Dtar=
 -Dcontainer-executor.conf.dir=3D/etc=0Acp ./hadoop-yarn-project/=
target/hadoop-yarn-project-2.0.0-cdh4.2.1/bin/container-executor=20=
~/hadoop/bin=0A#=D2=D4=CF=C2=C3=FC=C1=EE=B2=E9=BF=B4=B1=E0=D2=EB=CA=
=C7=B7=F1=B3=C9=B9=A6=0Astrings ~/hadoop/bin/container-executor|g=
rep etc=0A#=D0=DE=B8=C4=C8=A8=CF=DE=0Asudo chown root:hadoop  /xx=
/hadoop/bin/container-executor=0Asudo chmod 4750 /xx/hadoop/bin/c=
ontainer-executor=0A</code></pre><p>=CB=B5=C3=F7=A3=BA=CE=AA=CA=B2=
=C3=B4=D2=AA=B1=E0=D2=EBcontainer-executor?</p><p>=B4=F0=A3=BA=D2=
=F2=CE=AAcontainer-executor=D2=AA=C7=F3container-executor.cfg=D5=E2=
=B8=F6=CE=C4=BC=FE=BC=B0=C6=E4=CB=F9=D3=D0=B8=B8=C4=BF=C2=BC=B6=BC=
=CA=F4=D3=DAroot=D3=C3=BB=A7=A3=AC=C7=D2=C8=A8 =CF=DE=D0=A1=D3=DA=
755=A1=A3=C5=E4=D6=C3=CE=C4=BC=FEcontainer-executor.cfg=C4=AC=C8=CF=
=B5=C4=C2=B7=BE=B6=D4=DA../etc/hadoop/container- executor.cfg=A1=A3=
=C8=E7=B9=FB=A3=AC=B0=B4=D5=D5=C4=AC=C8=CF=B5=C4=C2=B7=BE=B6=D0=DE=
=B8=C4=CB=F9=D3=D0=B8=B8=C4=BF=C2=BC=B6=BC=CA=F4=D3=DAroot=A3=AC=CF=
=D4=C8=BB=B2=BB=CF=D6=CA=B5=A1=A3=D3=DA=CA=C7=A3=AC=B0=D1=C2=B7=BE=
=B6=B1=E0=D2=EB=B5=BD/etc/container- executor.cfg=D6=D0=A1=A3</p>=
</li><li><p>=B4=B4=BD=A8/etc/container-executor.cfg=CE=C4=BC=FE,=CE=
=C4=BC=FE=C4=DA=C8=DD=C8=E7=CF=C2=A3=BA</p><pre><code>#=D4=CB=D0=D0=
container=B5=C4=D3=C3=BB=A7=0Ayarn.nodemanager.linux-container-ex=
ecutor.group=3Dhadoop=0A#=D5=E2=B8=F6=CA=C7=D4=CA=D0=ED=D4=CB=D0=D0=
=D3=A6=D3=C3=B5=C4=D3=C3=BB=A7=C1=D0=B1=ED=A3=AC=C4=AC=C8=CF=CA=C7=
=C8=AB=B2=BF=BF=C9=D2=D4=D4=CB=D0=D0=0A#banned.users=3D=0A#=D5=E2=
=B8=F6=CA=C7=D4=CA=D0=ED=CC=E1=BD=BBjob=B5=C4=D7=EE=D0=A1=B5=C4us=
erid=B5=C4=D6=B5=A1=A3centos=D6=D0=D2=BB=B0=E3=D3=C3=BB=A7=B5=C4i=
d=D4=DA500=D2=D4=C9=CF=A1=A3=0Amin.user.id=3D500=0A</code></pre><=
p>=D0=DE=B8=C4/etc/container-executor.cfg=B5=C4=C8=A8=CF=DE</p><p=
re><code>sudo chown root:root /etc/container-executor.cfg=0Asudo=20=
chmod 600 /etc/container-executor.cfg=0A</code></pre></li><li><p>=
=C6=F4=B6=AF=A3=AC=CA=B9=D3=C3hadoop=D3=C3=BB=A7=D6=B1=BD=D3=C6=F4=
=B6=AF=BC=B4=BF=C9</p><pre><code>start-yarn.sh=0A</code></pre></l=
i><li><p>=BC=EC=B2=E9Nodemanager=BA=CDResourcemanager=B5=C4=C8=D5=
=D6=BE=CA=C7=B7=F1=D3=D0=D2=EC=B3=A3=A1=A3</p><ul><li><p>=D2=BB=B0=
=E3=D2=EC=B3=A3=B6=BC=CA=C7=D2=F2=CE=AAcontainer-executor.cfg=B5=C4=
=C8=A8=CF=DE=BA=CDcontainer-executor=B5=C4=C8=A8=CF=DE=CE=CA=CC=E2=
=A1=A3=C7=EB=D7=D0=CF=B8=BA=CB=B6=D4=A3=BA</p><pre><code>[hadoop@=
hadoop2 hadoop]$ ls ~/hadoop/bin/container-executor  -l=0A</code>=
</pre><p>-rwsr-x--- 1 root hadoop 89206 Nov 18 16:18 /home/hadoop=
/hadoop/bin/container-executor [hadoop@hadoop2 hadoop]$ ls /etc/c=
ontainer-executor.cfg -l -rw------- 1 root root 240 Nov 18 16:31=20=
/etc/container-executor.cfg</p></li></ul></li><li><p>=B2=E2=CA=D4=
=A3=BA=CA=B9=D3=C3=C8=CE=D2=E2=D3=C3=BB=A7=CD=A8=B9=FDkeytab=CE=C4=
=BC=FE=BD=F8=D0=D0=C8=CF=D6=A4=A3=AC=D4=CB=D0=D0yarn=CF=E0=B9=D8=C3=
=FC=C1=EE=A1=A3</p><pre><code>kinit -kt /xx/xx/qiujw/keytab qiujw=
/hadoopN=0A#=B6=D4=D3=DAjava1.6_26=D2=D4=CF=C2=B0=E6=B1=BE=B5=C4=D0=
=E8=D2=AArenew ticket=0Akinit -R=0Aklist=0Ayarn jar /xx/xx/hadoop=
-mapreduce-examples-xx.jar pi 10 100=0A</code></pre></li></ul><h3=
><a id=3D"user-content-=CE=AAhbase=CC=ED=BC=D3=C8=CF=D6=A4" class=
=3D"anchor" href=3D"https://github.com/zouhc/MyHadoop/blob/master=
/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%=
E7%BD%B2.md#%E4%B8%BAhbase%E6%B7%BB%E5%8A%A0%E8%AE%A4%E8%AF%81"><=
/a>=CE=AAhbase=CC=ED=BC=D3=C8=CF=D6=A4</h3><ul><li><p>=CC=ED=BC=D3=
=C5=E4=D6=C3=A3=BA</p><ul><li>hbase-site.xml:=D2=D4=CF=C2=CC=ED=BC=
=D3=B5=BDclient=BA=CDserver=B6=CB<ul><li>hbase.security.authentic=
ation=A3=BAkerberos</li><li>hbase.rpc.engine: org.apache.hadoop.h=
base.ipc.SecureRpcEngine</li></ul></li><li>hbase-site.xml:=D2=D4=CF=
=C2=CC=ED=BC=D3=B5=BDserver=B6=CB<ul><li>hbase.regionserver.kerbe=
ros.principal=A3=BAhadoop/_HOST@HADOOP.COM</li><li>hbase.regionse=
rver.keytab.file: /xx/xx/hadoop.keytab</li><li>hbase.master.kerbe=
ros.principal: hadoop/_HOST@HADOOP.COM</li><li>hbase.master.keyta=
b.file: /xx/xx/hadoop.keytab</li></ul></li></ul></li><li><p>=CC=ED=
=BC=D3hbase=C1=AC=BD=D3secure=B5=C4zookeeper=A3=BA</p><ul><li><p>=
=B4=B4=BD=A8zk-jaas.conf=C5=E4=D6=C3=CE=C4=BC=FE=A3=AC=C4=DA=C8=DD=
=C8=E7=CF=C2=A3=BA</p><pre><code>Client {=0A  com.sun.security.au=
th.module.Krb5LoginModule required=0A  useKeyTab=3Dtrue=0A  useTi=
cketCache=3Dfalse=0A  keyTab=3D"/xx/hadoop.keytab"=0A  principal=3D=
"hadoop/hadoopN@HADOOP.COM";=0A};=0A</code></pre></li><li><p>=D0=DE=
=B8=C4hbase-env.sh:</p><pre><code>export HBASE_OPTS=3D"$HBASE_OPT=
S -Djava.security.auth.login.config=3D/xx/zk-jaas.conf"=0Aexport=20=
HBASE_MANAGES_ZK=3Dfalse=0A</code></pre></li><li><p>=C8=B7=B1=A3=D2=
=D4=CF=C2=C5=E4=D6=C3=CF=EE=CA=C7=D5=FD=C8=B7=B5=C4:</p><ul><li>h=
base-site.xml:<ul><li>hbase.zookeeper.quorum: hadoopN,...,hadoopN=
</li><li>hbase.cluster.distributed=A3=BA true</li></ul></li></ul>=
</li><li>=CC=ED=BC=D3=D2=D4=CF=C2=CF=EE=C4=BF=B5=BDzoo.cfg=D6=D0=A3=
=BA<ul><li>kerberos.removeHostFromPrincipal: true</li><li>kerbero=
s.removeRealmFromPrincipal: true</li></ul></li></ul></li><li><p>=C6=
=F4=B6=AF=A3=BA=C8=E7=CD=F9=B3=A3=C6=F4=B6=AF=BC=B4=BF=C9</p><pre=
><code>start-hbase.sh=0A</code></pre></li><li><p>TroubleShooting<=
/p><p>=B1=CA=D5=DF=D4=DA=C6=F4=B6=AFhbase=BA=F3=A3=AC=D4=DAzookee=
per=B5=C4=C8=D5=D6=BE=D6=D0=B4=F3=C1=BF=B7=A2=CF=D6=D5=E2=D6=D6=D0=
=C5=CF=A2=A3=BA</p><pre><code> Client failed to SASL authenticate=
: javax.security.sas     l.SaslException: GSS initiate failed [Ca=
used by GSSException: Failure unspecified at GSS-API level (Mecha=
nism level: Specified version of key is not available (44     ))]=
=0A</code></pre><p>=D4=DA=B6=E0=B4=CE=B5=F7=D5=FB=CE=DE=B9=FB=BA=F3=
=A3=AC=BB=B3=D2=C9=CA=C7=D2=F2=CE=AA=CE=D2=B5=C4=D2=BB=D0=A9=C0=CF=
=BE=C9=B5=C4=D5=CB=BB=A7=B5=C4renewmax=CA=F4=D0=D4=BB=B9=CA=C70.=D3=
=DA=CA=C7=A3=AC=B0=D1=CB=F9=D3=D0=CF=E0=B9=D8=D5=CB=BB=A7=B6=BC=C9=
=BE=B3=FD=A3=AC=C9=FA=B3=C9=BA=F3=A3=AC=D4=D9=B4=CE=C6=F4=B6=AF=A1=
=A3=D5=E2=B8=F6=B4=ED=CE=F3=BE=CD=CF=FB=CA=A7=C1=CB=A1=A3</p></li=
></ul><h4><a id=3D"user-content-hbase=B5=C4=C8=A8=CF=DE=BF=D8=D6=C6=
" class=3D"anchor" href=3D"https://github.com/zouhc/MyHadoop/blob=
/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9=
%83%A8%E7%BD%B2.md#hbase%E7%9A%84%E6%9D%83%E9%99%90%E6%8E%A7%E5%8=
8%B6"></a>Hbase=B5=C4=C8=A8=CF=DE=BF=D8=D6=C6</h4><ul><li>=C6=F4=B6=
=AFhbase=B5=C4=D3=C3=BB=A7=CA=C7=B3=AC=BC=B6=D3=C3=BB=A7=D3=B5=D3=
=D0=CB=F9=D3=D0=B5=C4=C8=A8=CF=DE=A1=A3</li><li><p>hbase=D6=A7=B3=
=D64=B8=F6=C8=A8=CF=DE</p><ul><li>R =A3=BA=B6=C1=C8=A8=CF=DE Get,=
 Scan, or Exists calls</li><li>W =A3=BA=D0=B4=C8=A8=CF=DE Put, De=
lete, LockRow, UnlockRow, IncrementColumnValue, CheckAndDelete, C=
heckAndPut, Flush, or Compact</li><li>C =A3=BA=B4=B4=BD=A8=C8=A8=CF=
=DE Create, Alter, or Drop</li><li>A =A3=BA=B9=DC=C0=ED=D4=B1=C8=A8=
=CF=DE Enable, Disable, MajorCompact, Grant, Revoke, and Shutdown=
.</li></ul></li><li><p>=C8=A8=CF=DE=BF=D8=D6=C6=D3=EF=BE=E4=A3=BA=
</p><pre><code>grant &lt;user&gt; &lt;permissions&gt;[ &lt;table&=
gt;[ &lt;column family&gt;[ &lt;column qualifier&gt; ] ] ]=0Arevo=
ke &lt;user&gt; &lt;permissions&gt; [ &lt;table&gt; [ &lt;column=20=
family&gt; [ &lt;column qualifier&gt; ]]]=0Aalter &lt;table&gt; {=
OWNER =3D&gt; &lt;user&gt;} # sets the table owner=0Auser_permiss=
ion &lt;table&gt;  # displays existing permissions=0A</code></pre=
></li><li><p>=B4=B4=BD=A8=B1=ED=B5=C4=D3=C3=BB=A7=D3=B5=D3=D0=B8=C3=
=B1=ED=B5=C4=CB=F9=D3=D0=C8=A8=CF=DE</p></li><li>=C8=E7=B9=FB=B8=B3=
=D3=E8=C8=A8=CF=DE=B5=C4=CA=B1=BA=F2=C3=BB=D3=D0=D5=EB=B6=D4=C4=B3=
=B8=F6=B1=ED=BB=F2=D5=DFCF=BD=F8=D0=D0=B8=B3=D3=E8=A3=AC=BE=CD=BB=
=E1=B6=D4=C8=AB=BE=D6=BB=F1=B5=C3=C8=A8=CF=DE=A1=A3=C7=EB=D0=A1=D0=
=C4=A1=A3</li></ul><h3><a id=3D"user-content-hive=B5=C4=C8=A8=CF=DE=
" class=3D"anchor" href=3D"https://github.com/zouhc/MyHadoop/blob=
/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9=
%83%A8%E7%BD%B2.md#hive%E7%9A%84%E6%9D%83%E9%99%90"></a>Hive=B5=C4=
=C8=A8=CF=DE</h3><ul><li>Hive=B5=C4=BF=CD=BB=A7=B6=CB=B5=C4=C8=A8=
=CF=DE=BA=CD=C6=D5=CD=A8=B5=C4=BF=CD=BB=A7=B6=CB=B5=C4=D2=BB=D6=C2=
=BE=CD=BF=C9=D2=D4=C1=CB=A1=A3</li></ul><h3><a id=3D"user-content=
-=BF=CD=BB=A7=B6=CB=C5=E4=D6=C3" class=3D"anchor" href=3D"https:/=
/github.com/zouhc/MyHadoop/blob/master/doc/Hadoop%E7%9A%84kerbero=
s%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B2.md#%E5%AE%A2%E6%88=
%B7%E7%AB%AF%E9%85%8D%E7%BD%AE"></a>=BF=CD=BB=A7=B6=CB=C5=E4=D6=C3=
</h3><p>=CA=B9=D3=C3=D5=DF=D2=AA=BA=CD=CA=B5=D0=D0=C1=CBkerberos=B5=
=C4=BC=AF=C8=BA=BD=F8=D0=D0=CD=A8=D0=C5=A1=A3=D2=AAkerberos=B5=C4=
=B9=DC=C0=ED=D4=B1=B4=B4=BD=A8=B6=D4=D3=A6=B5=C4=D5=CB=BB=A7=A1=A3=
=B2=A2=C7=D2=C9=FA=B3=C9keytab=B7=B5=BB=D8=B8=F8=CA=B9=D3=C3=D5=DF=
=A3=AC=CA=B9=D3=C3=D5=DF=CD=A8=B9=FDkinit=C3=FC=C1=EE=C8=CF=D6=A4=
=BA=F3=A3=AC=BE=CD=B8=FA=C6=BD=B3=A3=CA=B9=D3=C3Hadoop=B5=C4=B7=BD=
=CA=BD=D2=BB=D6=C2=B5=D8=CA=B9=D3=C3=BC=B4=BF=C9=A1=A3=D2=D4=CF=C2=
=CA=C7=D2=BB=B8=F6=C0=FD=D7=D3=A3=BA</p><pre><code>kadmin:addprin=
c qiujw/hadoop1=0Akadmin:xst -k qiujw.keytab qiujw/hadoop1=0A#=BD=
=ABqiujw.keytab=BD=BB=B8=F8=D3=C3=BB=A7=0A#=D4=DAhadoop1=BB=FA=C6=
=F7=C9=CF=0Akinit -kt qiujw.keytab qiujw/hadoop1=0Aklist=0A    Ti=
cket cache: FILE:/tmp/krb5cc_512=0A    Default principal: qiujw/h=
adoop2@HADOOP.COM=0A=0A    Valid starting     Expires           =20=
Service principal=0A    11/19/13 10:53:54  11/20/13 10:53:54  krb=
tgt/HADOOP.COM@HADOOP.COM=0A            renew until 11/26/13 10:4=
4:10=0A=0A=CB=B5=C3=F7=A3=BAExpires=CF=C2=C3=E6=B5=C4=CA=C7=D5=E2=
=B8=F6=C8=CF=D6=A4=B5=C4=B9=FD=C6=DA=B5=C4=C8=D5=D6=BE=A1=A3renew=
 until=BA=F3=C3=E6=B5=C4=CA=C7=D0=F8=D4=BC=C6=DA=A1=A3=0A=D2=E2=CB=
=BC=CA=C7,=C8=E7=B9=FB=D5=E2=B8=F6=BB=BA=B4=E6=B9=FD=C1=CB=C8=CF=D6=
=A4=B5=C4=B9=FD=C6=DA=CA=B1=BC=E4=A3=AC=BE=CD=BB=E1=CA=A7=D0=A7=A1=
=A3=D4=DA=D0=F8=D4=BC=C6=DA=C6=DA=BC=E4=CD=A8=B9=FD=CA=B9=D3=C3ki=
nit -R=BF=C9=D2=D4=D0=F8=D4=BC=D5=E2=B8=F6=C8=CF=D6=A4=A1=A3=B5=AB=
=CA=C7=A3=AC=B9=FD=C1=CB=D0=F8=D4=BC=C6=DA=A1=A3=B1=D8=D0=EB=D2=AA=
=CA=B9=D3=C3keytab=D6=D8=D0=C2=C8=CF=D6=A4=A1=A3=0A=0AHadoop=B5=C8=
=B5=C4=B7=FE=CE=F1=D6=D0=A3=AC=B6=BC=BB=E1=CA=B9=D3=C3keytab=D7=D4=
=B6=AF=D7=F6=D0=F8=D4=BC=B2=BB=BB=E1=B4=E6=D4=DA=B9=FD=C6=DA=B5=C4=
=C7=E9=BF=F6=A1=A3=C8=E7=B9=FB=BF=CD=BB=A7=B6=CB=D0=E8=D2=AA=B3=A4=
=BE=C3=D4=CB=D0=D0=B2=BB=B9=FD=C6=DA=A3=AC=D0=E8=D2=AA=D4=DA=B3=CC=
=D0=F2=D6=D0=CA=B9=D3=C3keytab=D7=F6=C8=CF=D6=A4=A1=A3=0A</code><=
/pre><h2><a id=3D"user-content-=D0=AD=D2=E9=BF=D8=D6=C6" class=3D=
"anchor" href=3D"https://github.com/zouhc/MyHadoop/blob/master/do=
c/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%=
BD%B2.md#%E5%8D%8F%E8%AE%AE%E6%8E%A7%E5%88%B6"></a>=D0=AD=D2=E9=BF=
=D8=D6=C6</h2><p>Hadoop=B5=C4=BF=F2=BC=DC=D6=D0=D6=A7=B3=D6=D5=EB=
=B6=D4=B2=BB=CD=AC=B5=C4=D0=AD=D2=E9=BF=AA=C6=F4=C8=A8=CF=DE=BF=D8=
=D6=C6=A1=A3=B2=BB=D4=D9=B1=BE=B4=CE=CC=BD=BE=BF=B7=B6=CE=A7=C4=DA=
=A1=A3<a href=3D"http://hadoop.apache.org/docs/current/hadoop-pro=
ject-dist/hadoop-common/ServiceLevelAuth.html">=B7=FE=CE=F1=D0=AD=
=D2=E9=BF=D8=D6=C6</a></p><br><div style=3D"color: gray;"><small>=
=C0=B4=D4=B4=A3=BA&nbsp;&lt;<a href=3D"https://github.com/zouhc/M=
yHadoop/blob/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E=
%E8%B7%B5%E9%83%A8%E7%BD%B2.md">https://github.com/zouhc/MyHadoop=
/blob/master/doc/Hadoop%E7%9A%84kerberos%E7%9A%84%E5%AE%9E%E8%B7%=
B5%E9%83%A8%E7%BD%B2.md</a><small>&gt;</small></small></div><smal=
l><small>&nbsp;</small></small></body></html>=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A

------=_Next_Part_0000208265.342--

------=_Next_Part_0000624795.964--

