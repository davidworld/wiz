From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?u/nT2lFKTS1RdXJvbSBKb3VybmFsIE1hbmFnZXItUGF4b3O1xEhERlMgSEHUrcDtvLC0+sLrt9bO9g==?=
Date: Date: Fri, 23 Jul 2021 05:55:35 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0001447077.951"

This is a multi-part message in MIME format.

------=_Next_Part_0001447077.951
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0000482359.101"


------=_Next_Part_0000482359.101
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0000482359.101
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!doctype html><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A<title>=BB=F9=D3=DAQJM-Qurom Journal Manager-Paxos=
=B5=C4HDFS HA=D4=AD=C0=ED=BC=B0=B4=FA=C2=EB=B7=D6=CE=F6</title>=0A=
    =0A<style id=3D"wiz_custom_css">html, body {font-size: 12pt;}=
body {font-family: Helvetica, 'Hiragino Sans GB', '=CE=A2=C8=ED=D1=
=C5=BA=DA', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-ser=
if;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding: 1.=
25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:1.2=
5rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20pt;=
font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {font-=
size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17rem=
;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-size=
:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {marg=
in:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padding=
-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-style=
-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-lat=
in;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}blockqu=
ote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-child=20=
{margin-top:0;}blockquote > :last-child {margin-bottom:0;}img {bo=
rder:0;max-width:100%;height:auto !important;margin:2px 0;}table=20=
{border-collapse:collapse;border:1px solid #bbbbbb;}td, th {paddi=
ng:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;min-=
height:28px;word-break:break-all;box-sizing: border-box;}.wiz-hid=
e {display:none !important;}</style></head>=0A=0A<body class spel=
lcheck=3D"false"><div><div class=3D"article-title-box" style=3D"p=
adding:0px;margin:0px 0px 16px;color:rgb(51, 51, 51);font-family:=
'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino S=
ans GB', 'Microsoft YaHei', sans-serif;font-size:0.875rem;font-st=
yle:normal;font-weight:normal;text-align:start;text-indent:0px;">=
<h6 class=3D"title-article" style=3D"padding:0px;margin:0px;font-=
size:1.5rem;">=BB=F9=D3=DAQJM/Qurom Journal Manager/Paxos=B5=C4HD=
FS HA=D4=AD=C0=ED=BC=B0=B4=FA=C2=EB=B7=D6=CE=F6</h6><div class=3D=
"article-info-box" style=3D"padding:0px 0px 14px;margin:0px;borde=
r-bottom-width:1px;border-bottom-style:solid;border-bottom-color:=
rgb(227, 227, 227);color:rgb(51, 51, 51);font-family:'SF Pro Disp=
lay', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Mi=
crosoft YaHei', sans-serif;font-size:0.875rem;font-style:normal;f=
ont-weight:normal;text-align:start;text-indent:0px;"><div class=3D=
"article-bar-top d-flex" style=3D"padding:0px;margin:0px;display:=
flex !important;color:rgb(133, 133, 133);"><span class=3D"time" s=
tyle=3D"margin-right:14px;">2014=C4=EA04=D4=C209=C8=D5 09:40:31</=
span><div class=3D"float-right" style=3D"padding:0px;margin:0px 0=
px 0px auto;"><span class=3D"read-count" style=3D"margin-right:14=
px;">=D4=C4=B6=C1=CA=FD=A3=BA1050</span></div></div></div><articl=
e style=3D"display:block;padding-top:16px;color:rgb(51, 51, 51);f=
ont-family:'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC',=20=
'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;font-size:0.875=
rem;font-style:normal;font-weight:normal;text-align:start;text-in=
dent:0px;"><div id=3D"article_content" class=3D"article_content c=
sdn-tracking-statistics" data-pid=3D"blog" data-mod=3D"popu_307"=20=
data-dsm=3D"post" style=3D"padding:0px;margin:0px;"><div class=3D=
"htmledit_views" style=3D"padding:0px;margin:0px;font-family:'Pin=
gFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;"><p style=3D=
"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79,=
 79);font-weight:400;text-align:justify;">HDFS HA=B5=C4=BD=E2=BE=F6=
=B7=BD=B0=B8=BF=C9=CE=BD=B0=D9=BB=A8=C6=EB=B7=C5=A3=ACLinux HA, V=
Mware FT, shared NAS+NFS, BookKeeper, QJM/Quorum Journal Manager,=
 BackupNode=B5=C8=B5=C8=A1=A3=C4=BF=C7=B0=C6=D5=B1=E9=B2=C9=D3=C3=
=B5=C4=CA=C7shard NAS+NFS=A3=AC=D2=F2=CE=AA=BC=F2=B5=A5=D2=D7=D3=C3=
=A3=AC=B5=AB=CA=C7=D0=E8=D2=AA=CC=E1=B9=A9=D2=BB=B8=F6HA=B5=C4=B9=
=B2=CF=ED=B4=E6=B4=A2=C9=E8=B1=B8=A1=A3=B6=F8=C9=E7=C7=F8=D2=D1=BE=
=AD=B0=D1=BB=F9=D3=DAQJM/Quorum Journal Manager=B5=C4=B7=BD=B0=B8=
merge=B5=BDtrunk=C1=CB=A3=ACclouderea=CC=E1=B9=A9=B5=C4=B7=A2=D0=D0=
=B0=E6=D6=D0=D2=B2=B0=FC=BA=AC=C1=CB=D5=E2=B8=F6feature=A3=AC=D5=E2=
=D6=D6=B7=BD=B0=B8=D2=B2=CA=C7=C9=E7=C7=F8=D4=DA=CE=B4=C0=B4=B7=A2=
=D0=D0=B0=E6=D6=D0=C4=AC=C8=CF=B5=C4HA=B7=BD=B0=B8=A1=A3=B1=BE=CE=
=C4=B4=D3=B4=FA=C2=EB=B5=C4=BD=C7=B6=C8=B7=D6=CE=F6=D5=E2=D6=D6=B7=
=BD=B0=B8=B5=C4=CA=B5=CF=D6=A1=A3</p><p style=3D"padding:0px;marg=
in:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:=
400;text-align:justify;">=B9=D8=D3=DAHDFS=D4=B4=B4=FA=C2=EB=D6=D0=
HA=BB=FA=D6=C6=B5=C4=D5=FB=CC=E5=BF=F2=BC=DC=CA=B5=CF=D6=A3=ACAct=
ive NN, Standby NN=C1=BD=D6=D6=BD=C7=C9=AB=B8=F7=D7=D4=B5=C4=B4=FA=
=C2=EB=D6=B4=D0=D0=C1=F7=B3=CC=A3=ACclient=C8=E7=BA=CE=D7=F6failo=
ver=A3=AC=CE=AA=CA=B2=C3=B4=D2=AAfencing=A3=AC=C3=BF=B8=F6DN=D2=AA=
=CF=F2Active=BA=CDStandby NN=B6=BC=D2=AAreport block=A3=AC=D5=E2=D1=
=F9=B2=C5=C4=DC=B1=A3=D6=A4hot standby=B5=C8=B5=C8=C0=E0=CB=C6=B5=
=C4=CE=CA=CC=E2=A3=AC=BF=C9=D2=D4=B2=CE=BF=BC=C7=B0=C3=E6=B5=C4=CE=
=C4=D5=C2:&nbsp;<a href=3D"http://yanbohappy.sinaapp.com/?p=3D50"=
 target=3D"_blank" style=3D"color:rgb(103, 149, 181);text-decorat=
ion:none;">http://yanbohappy.sinaapp.com/?p=3D50</a>&nbsp; =BA=CD=
<span class=3D"Apple-converted-space">&nbsp;</span><a href=3D"htt=
p://yanbohappy.sinaapp.com/?p=3D55" target=3D"_blank" style=3D"co=
lor:rgb(103, 149, 181);text-decoration:none;">http://yanbohappy.s=
inaapp.com/?p=3D55</a>&nbsp;=A1=A3</p><p style=3D"padding:0px;mar=
gin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight=
:400;text-align:justify;">=D4=DAHA=BE=DF=CC=E5=CA=B5=CF=D6=B7=BD=B7=
=A8=B2=BB=CD=AC=B5=C4=C7=E9=BF=F6=CF=C2=A3=ACHA=BF=F2=BC=DC=B5=C4=
=C1=F7=B3=CC=CA=C7=D2=BB=D6=C2=B5=C4=A1=A3=B2=BB=D2=BB=D6=C2=B5=C4=
=BE=CD=CA=C7=C8=E7=BA=CE=B4=E6=B4=A2=BA=CD=B9=DC=C0=ED=C8=D5=D6=BE=
=A1=A3=D4=DAActive NN=BA=CDStandby NN=D6=AE=BC=E4=D2=AA=D3=D0=B8=F6=
=B9=B2=CF=ED=B5=C4=B4=E6=B4=A2=C8=D5=D6=BE=B5=C4=B5=D8=B7=BD=A3=AC=
Active NN=B0=D1EditLog=D0=B4=B5=BD=D5=E2=B8=F6=B9=B2=CF=ED=B5=C4=B4=
=E6=B4=A2=C8=D5=D6=BE=B5=C4=B5=D8=B7=BD=A3=ACStandby NN=C8=A5=B6=C1=
=C8=A1=C8=D5=D6=BE=C8=BB=BA=F3=D6=B4=D0=D0=A3=AC=D5=E2=D1=F9Activ=
e=BA=CDStandby NN=C4=DA=B4=E6=D6=D0=B5=C4HDFS=D4=AA=CA=FD=BE=DD=B1=
=A3=B3=D6=D7=C5=CD=AC=B2=BD=A1=A3=D2=BB=B5=A9=B7=A2=C9=FA=D6=F7=B4=
=D3=C7=D0=BB=BBStandby NN=BF=C9=D2=D4=BE=A1=BF=EC=BD=D3=B9=DCActi=
ve NN=B5=C4=B9=A4=D7=F7=A3=A8=CB=E4=C8=BB=D2=AA=BE=AD=C0=FA=D2=BB=
=D0=A1=B6=CE=CA=B1=BC=E4=C8=C3=D4=AD=C0=B4Standby=D7=B7=C9=CF=D4=AD=
=C0=B4=B5=C4Active=A3=AC=B5=AB=CA=C7=CA=B1=BC=E4=BA=DC=B6=CC=A3=A9=
=A1=A3</p><p style=3D"padding:0px;margin:0px 0px 16px;font-size:1=
rem;color:rgb(79, 79, 79);font-weight:400;text-align:justify;">=CB=
=B5=B5=BD=D5=E2=B8=F6=B9=B2=CF=ED=B5=C4=B4=E6=B4=A2=C8=D5=D6=BE=B5=
=C4=B5=D8=B7=BD=A3=AC=C4=BF=C7=B0=B2=C9=D3=C3=D7=EE=B6=E0=B5=C4=BE=
=CD=CA=C7=D3=C3=B9=B2=CF=ED=B4=E6=B4=A2NAS+NFS=A1=A3=C8=B1=B5=E3=D3=
=D0=A3=BA1=A3=A9=D5=E2=B8=F6=B4=E6=B4=A2=C9=E8=B1=B8=D2=AA=C7=F3=CA=
=C7HA=B5=C4=A3=AC=B2=BB=C4=DC=B9=D2=B5=F4=A3=BB2=A3=A9=D6=F7=B4=D3=
=C7=D0=BB=BB=CA=B1=D0=E8=D2=AAfencing=B7=BD=B7=A8=C8=C3=D4=AD=C0=B4=
=B5=C4Active=B2=BB=D4=D9=D0=B4EditLog=A3=AC=B7=F1=D4=F2=B5=C4=BB=B0=
=BB=E1=B7=A2=C9=FAbrain-split=A3=AC=D2=F2=CE=AA=C8=E7=B9=FB=B2=BB=
=D7=E8=D6=B9=D4=AD=C0=B4=B5=C4Active=CD=A3=D6=B9=CF=F2=B9=B2=CF=ED=
=B4=E6=B4=A2=D0=B4EditLog=A3=AC=C4=C7=C3=B4=BE=CD=D3=D0=C1=BD=B8=F6=
Active NN=C1=CB=A3=AC=D5=E2=D1=F9=BE=CD=BB=E1=C6=C6=BB=B5HDFS=B5=C4=
=D4=AA=CA=FD=BE=DD=C1=CB=A1=A3=B6=D4=D3=DA=B7=C0=D6=B9brain-split=
=CE=CA=CC=E2=A3=AC=D4=DAQJM=B3=F6=CF=D6=D6=AE=C7=B0=A3=AC=B3=A3=BC=
=FB=B5=C4=B7=BD=B7=A8=BE=CD=CA=C7=D4=DA=B7=A2=C9=FA=D6=F7=B4=D3=C7=
=D0=BB=BB=B5=C4=CA=B1=BA=F2=A3=AC=B0=D1=B9=B2=CF=ED=B4=E6=B4=A2=C9=
=CF=B4=E6=B7=C5EditLog=B5=C4=CE=C4=BC=FE=BC=D0=B6=D4=D4=AD=C0=B4=B5=
=C4Active=B5=C4=D0=B4=C8=A8=CF=DE=C4=C3=B5=F4=A3=AC=C4=C7=C3=B4=BE=
=CD=BF=C9=D2=D4=B1=A3=D6=A4=CD=AC=CA=B1=D6=C1=B6=E0=D6=BB=D3=D0=D2=
=BB=B8=F6Active NN=A3=AC=B7=C0=D6=B9=C1=CB=C6=C6=BB=B5HDFS=D4=AA=CA=
=FD=BE=DD=A1=A3</p><p style=3D"padding:0px;margin:0px 0px 16px;fo=
nt-size:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:jus=
tify;">Clouera=CE=AA=BD=E2=BE=F6=D5=E2=B8=F6=CE=CA=CC=E2=CC=E1=B3=
=F6=C1=CBQJM/Qurom Journal Manager=A3=AC=D5=E2=CA=C7=D2=BB=B8=F6=BB=
=F9=D3=DAPaxos=CB=E3=B7=A8=CA=B5=CF=D6=B5=C4HDFS HA=B7=BD=B0=B8=A1=
=A3QJM=B5=C4=BD=E1=B9=B9=CD=BC=C8=E7=CF=C2=CB=F9=CA=BE=A3=BA</p><=
p style=3D"padding:0px;margin:0px 0px 16px;font-size:1rem;color:r=
gb(79, 79, 79);font-weight:400;text-align:justify;"><a href=3D"ht=
tp://yanbohappy-wordpress.stor.sinaapp.com/uploads/2012/11/QJM-ar=
chitecture-drawing2.png" target=3D"_blank" style=3D"color:rgb(103=
, 149, 181);text-decoration:none;"><img class=3D"aligncenter size=
-full wp-image-206" title=3D"QJM-architecture-drawing2" src alt h=
eight=3D"507" width=3D"534" style=3D"margin:0px;"></a></p><p styl=
e=3D"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79,=
 79, 79);font-weight:400;text-align:justify;">QJM=B5=C4=BB=F9=B1=BE=
=D4=AD=C0=ED=BE=CD=CA=C7=D3=C32N+1=CC=A8JournalNode=B4=E6=B4=A2Ed=
itLog=A3=AC=C3=BF=B4=CE=D0=B4=CA=FD=BE=DD=B2=D9=D7=F7=D3=D0=B4=F3=
=B6=E0=CA=FD=A3=A8&gt;=3DN+1=A3=A9=B7=B5=BB=D8=B3=C9=B9=A6=CA=B1=BC=
=B4=C8=CF=CE=AA=B8=C3=B4=CE=D0=B4=B3=C9=B9=A6=A3=AC=CA=FD=BE=DD=B2=
=BB=BB=E1=B6=AA=CA=A7=C1=CB=A1=A3=B5=B1=C8=BB=D5=E2=B8=F6=CB=E3=B7=
=A8=CB=F9=C4=DC=C8=DD=C8=CC=B5=C4=CA=C7=D7=EE=B6=E0=D3=D0N=CC=A8=BB=
=FA=C6=F7=B9=D2=B5=F4=A3=AC=C8=E7=B9=FB=B6=E0=D3=DAN=CC=A8=B9=D2=B5=
=F4=A3=AC=D5=E2=B8=F6=CB=E3=B7=A8=BE=CD=CA=A7=D0=A7=C1=CB=A1=A3=D5=
=E2=B8=F6=D4=AD=C0=ED=CA=C7=BB=F9=D3=DAPaxos=CB=E3=B7=A8=B5=C4=A3=
=AC=BF=C9=D2=D4=B2=CE=BF=BC<a href=3D"http://en.wikipedia.org/wik=
i/Paxos_%28computer_science%29" target=3D"_blank" style=3D"color:=
rgb(103, 149, 181);text-decoration:none;">http://en.wikipedia.org=
/wiki/Paxos_(computer_science)</a>&nbsp;=A1=A3</p><p style=3D"pad=
ding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79)=
;font-weight:400;text-align:justify;">=D3=C3QJM=B5=C4=B7=BD=CA=BD=
=C0=B4=CA=B5=CF=D6HA=B5=C4=D6=F7=D2=AA=BA=C3=B4=A6=D3=D0=A3=BA1=A3=
=A9=B2=BB=D0=E8=D2=AA=C5=E4=D6=C3=B6=EE=CD=E2=B5=C4=B8=DF=B9=B2=CF=
=ED=B4=E6=B4=A2=A3=AC=D5=E2=D1=F9=B6=D4=D3=DA=BB=F9=D3=DAcommodit=
y hardware=B5=C4=D4=C6=BC=C6=CB=E3=CA=FD=BE=DD=D6=D0=D0=C4=C0=B4=CB=
=B5=A3=AC=BD=B5=B5=CD=C1=CB=B8=B4=D4=D3=B6=C8=BA=CD=CE=AC=BB=A4=B3=
=C9=B1=BE=A3=BB2=A3=A9=B2=BB=D4=DA=D0=E8=D2=AA=B5=A5=B6=C0=C5=E4=D6=
=C3fencing=CA=B5=CF=D6=A3=AC=D2=F2=CE=AAQJM=B1=BE=C9=ED=C4=DA=D6=C3=
=C1=CBfencing=B5=C4=B9=A6=C4=DC=A3=BB3=A3=A9=B2=BB=B4=E6=D4=DASin=
gle Point Of Failure=A3=BB4=A3=A9=CF=B5=CD=B3=C2=B3=B0=F4=D0=D4=B5=
=C4=B3=CC=B6=C8=CA=C7=BF=C9=C5=E4=D6=C3=B5=C4=A3=A8QJM=BB=F9=D3=DA=
Paxos=CB=E3=B7=A8=A3=AC=CB=F9=D2=D4=C8=E7=B9=FB=C5=E4=D6=C32N+1=CC=
=A8JournalNode=D7=E9=B3=C9=B5=C4=BC=AF=C8=BA=A3=AC=C4=DC=C8=DD=C8=
=CC=D7=EE=B6=E0N=CC=A8=BB=FA=C6=F7=B9=D2=B5=F4=A3=A9=A3=BB5=A3=A9=
QJM=D6=D0=B4=E6=B4=A2=C8=D5=D6=BE=B5=C4JournalNode=B2=BB=BB=E1=D2=
=F2=CE=AA=C6=E4=D6=D0=D2=BB=CC=A8=B5=C4=D1=D3=B3=D9=B6=F8=D3=B0=CF=
=EC=D5=FB=CC=E5=B5=C4=D1=D3=B3=D9=A3=AC=B6=F8=C7=D2=D2=B2=B2=BB=BB=
=E1=D2=F2=CE=AAJournalNode=B5=C4=CA=FD=C1=BF=D4=F6=B6=E0=B6=F8=D3=
=B0=CF=EC=D0=D4=C4=DC=A3=A8=D2=F2=CE=AANN=CF=F2JournalNode=B7=A2=CB=
=CD=C8=D5=D6=BE=CA=C7=B2=A2=D0=D0=B5=C4=A3=A9=A1=A3</p><h3 style=3D=
"padding:0px;margin:8px 0px 16px;font-size:1.375rem;color:rgb(79,=
 79, 79);font-weight:700;"><a name=3D"t0" style=3D"color:rgb(78,=20=
161, 219);text-decoration:none;"></a>1, NameNode=B8=F1=CA=BD=BB=AF=
=BA=CD=C6=F4=B6=AF</h3><p style=3D"padding:0px;margin:0px 0px 16p=
x;font-size:1rem;color:rgb(79, 79, 79);font-weight:400;text-align=
:justify;">=B9=D8=D3=DAHDFS NN=B5=C4=D4=AA=CA=FD=BE=DD=B9=DC=C0=ED=
=C2=DF=BC=AD=A3=ACFSImage=BA=CDEditLog=CF=E0=B9=D8=B5=C4=D4=B4=B4=
=FA=C2=EB=B7=D6=CE=F6=C7=EB=B2=CE=BF=BC=A3=BA<span class=3D"Apple=
-converted-space">&nbsp;</span><a href=3D"http://yanbohappy.sinaa=
pp.com/?p=3D84" target=3D"_blank" style=3D"color:rgb(103, 149, 18=
1);text-decoration:none;">http://yanbohappy.sinaapp.com/?p=3D84</=
a><span class=3D"Apple-converted-space">&nbsp;</span>=BA=CD<a hre=
f=3D"http://yanbohappy.sinaapp.com/?p=3D101" target=3D"_blank" st=
yle=3D"color:rgb(103, 149, 181);text-decoration:none;">http://yan=
bohappy.sinaapp.com/?p=3D101</a><span class=3D"Apple-converted-sp=
ace">&nbsp;</span>=A3=ACNN=B5=C4=D5=E2=B2=BF=B7=D6=B4=FA=C2=EB=D4=
=DA=B2=BB=CD=AC=B5=C4HA=BD=E2=BE=F6=B7=BD=B0=B8=D6=D0=CA=C7=D2=BB=
=D1=F9=B5=C4=A1=A3=CF=C8=B8=F1=CA=BD=BB=AFHDFS=A3=AC=C9=FA=B3=C9=B4=
=E6=B7=C5FSImage=BA=CDEditLog=B5=C4=C4=BF=C2=BC=A3=AC=C4=BF=C2=BC=
=B3=F5=CA=BC=BB=AF=A3=AC=B0=D1=CE=C4=BC=FE=CF=B5=CD=B3=D4=AA=CA=FD=
=BE=DD=B3=D6=BE=C3=BB=AF=B5=BD=CE=C4=BC=FE=A1=A3=C8=BB=BA=F3=D4=DA=
=C6=F4=B6=AF=B5=C4=CA=B1=BA=F2=BC=D3=D4=D8=D7=EE=D0=C2=B5=C4FSIma=
ge=BA=CD=D4=DA=C4=C7=D6=AE=BA=F3=B5=C4EditLog=A1=A3</p><p style=3D=
"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79,=
 79);font-weight:400;text-align:justify;">NN=B4=E6=B7=C5FSImage=BA=
=CDEditLog=B5=C4=C4=BF=C2=BC=D3=C3NNStorage=D5=E2=B8=F6=C0=E0=C0=B4=
=B9=DC=C0=ED=A1=A3=BF=B4FSImage=B5=C4=B9=B9=D4=EC=BA=AF=CA=FD=A3=AC=
=B4=AB=BD=F8=C8=A5=C1=BD=B8=F6URI=B5=C4=BC=AF=BA=CF=A3=AC=B7=D6=B1=
=F0=CA=C7=B4=E6=B7=C5FSImage=BA=CDEditLog=B5=C4=B5=D8=B7=BD=A1=A3=
<span style=3D"color:rgb(255, 0, 0);">=CE=D2=C3=C7=D2=BB=D6=B1=D4=
=DA=CB=B5=B5=C4NN HA=BD=E2=BE=F6=B5=C4=CA=C7EditLog=B5=C4=B9=B2=CF=
=ED=B4=E6=B4=A2=CE=CA=CC=E2=A3=AC=B2=BB=B0=FC=C0=A8FSImage=A3=AC=B3=
=FD=B7=C7=CE=D2=C3=C7=C5=E4=D6=C3=B0=D1=D5=E2=C1=BD=B8=F6=B6=AB=CE=
=F7=B4=E6=B4=A2=B5=BD=D2=BB=B8=F6=B5=D8=B7=BD=A3=AC=B5=AB=CA=C7=D2=
=BB=B0=E3=CA=C7=B2=BB=BB=E1=D5=E2=C3=B4=D7=F6=B5=C4=A1=A3</span><=
/p><div style=3D"padding:0px;margin:0px;"><div id=3D"highlighter_=
631499" class=3D"syntaxhighlighter java" style=3D"padding:0px;mar=
gin:0px;"><div class=3D"dp-highlighter bg_java" style=3D"padding:=
1px 0px 0px;margin:0px 0px 24px;font-family:Consolas, 'Courier Ne=
w', Courier, mono, serif;font-size:0.75rem;width:843.469px;text-a=
lign:left;background-color:rgb(231, 229, 220);"><div class=3D"bar=
" style=3D"padding:0px 0px 0px 45px;margin:0px;"><div class=3D"to=
ols" style=3D"padding:3px 8px 10px 10px;margin:0px;font-style:nor=
mal;font-weight:normal;font-size:0.563rem;font-family:Verdana, Ge=
neva, Arial, Helvetica, sans-serif;color:silver;border-left-width=
:3px;border-left-style:solid;border-left-color:rgb(108, 226, 108)=
;border-right-width:1px;border-right-style:solid;border-right-col=
or:rgb(231, 229, 220);background-color:rgb(248, 248, 248);"><b st=
yle=3D"font-weight:bold;">[java]</b><span class=3D"Apple-converte=
d-space">&nbsp;</span><a href=3D"https://blog.csdn.net/knowledgea=
aa/article/details/23248999#" class=3D"ViewSource" title=3D"view=20=
plain" style=3D"color:rgb(103, 149, 181);text-decoration:none;bor=
der:none;padding:1px;margin:0px 10px 0px 0px;font-size:0.563rem;d=
isplay:inline-block;width:16px;text-indent:-2000px;background-ima=
ge:url(&quot;&quot;);background-position:0% 0%;background-repeat:=
no-repeat;">view plain</a><span data-mod=3D"popu_168"><span class=
=3D"Apple-converted-space">&nbsp;</span><a href=3D"https://blog.c=
sdn.net/knowledgeaaa/article/details/23248999#" class=3D"CopyToCl=
ipboard" title=3D"copy" style=3D"color:rgb(103, 149, 181);text-de=
coration:none;border:none;padding:1px;margin:0px 10px 0px 0px;fon=
t-size:0.563rem;display:inline-block;width:16px;text-indent:-2000=
px;background-image:url(&quot;&quot;);background-position:0% 0%;b=
ackground-repeat:no-repeat;">copy</a><div style=3D"padding:0px;ma=
rgin:0px;width:16px;"><embed id=3D"ZeroClipboardMovie_1" src=3D"h=
ttps://csdnimg.cn/public/highlighter/ZeroClipboard.swf" loop=3D"f=
alse" menu=3D"false" quality=3D"best" bgcolor=3D"#ffffff" width=3D=
"16" height=3D"16" name=3D"ZeroClipboardMovie_1" align=3D"middle"=
 allowscriptaccess=3D"always" allowfullscreen=3D"false" type=3D"a=
pplication/x-shockwave-flash" pluginspage=3D"http://www.macromedi=
a.com/go/getflashplayer" flashvars=3D"id=3D1&amp;width=3D16&amp;h=
eight=3D16" wmode=3D"transparent" style></div><div style=3D"paddi=
ng:0px;margin:0px;width:16px;"><embed id=3D"ZeroClipboardMovie_7"=
 src=3D"https://csdnimg.cn/public/highlighter/ZeroClipboard.swf"=20=
loop=3D"false" menu=3D"false" quality=3D"best" bgcolor=3D"#ffffff=
" width=3D"16" height=3D"16" name=3D"ZeroClipboardMovie_7" align=3D=
"middle" allowscriptaccess=3D"always" allowfullscreen=3D"false" t=
ype=3D"application/x-shockwave-flash" pluginspage=3D"http://www.m=
acromedia.com/go/getflashplayer" flashvars=3D"id=3D7&amp;width=3D=
16&amp;height=3D16" wmode=3D"transparent" style></div></span><spa=
n data-mod=3D"popu_169"></span></div></div><ol class=3D"dp-j wiz-=
list-level1" style=3D"padding:0px;margin:0px 0px 24px;list-style:=
decimal;border-style:none solid none none;border-right-width:1px;=
border-right-color:rgb(231, 229, 220);color:rgb(92, 92, 92);backg=
round-color:rgb(255, 255, 255);"><li class=3D"alt" style=3D"paddi=
ng:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !i=
mportant;margin-bottom:0px !important;margin-left:40px;border-sty=
le:none none none solid;border-left-width:3px;border-left-color:r=
gb(108, 226, 108);list-style:decimal outside;background-color:rgb=
(255, 255, 255);"><span style=3D"margin:0px;padding:0px;border:no=
ne;color:black;"><span style=3D"margin:0px;padding:0px;border:non=
e;color:black;">protectedFSImage(Configuration&nbsp;conf,&nbsp;&n=
bsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px !imp=
ortant;margin-top:8px;margin-right:0px !important;margin-bottom:0=
px !important;margin-left:40px;border-style:none none none solid;=
border-left-width:3px;border-left-color:rgb(108, 226, 108);list-s=
tyle:decimal outside;color:rgb(92, 92, 92);background-color:rgb(2=
48, 248, 248);"><span style=3D"margin:0px;padding:0px;border:none=
;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;Collection&lt;URI&gt;&nbsp;imageDirs,&nbsp;&nbsp;</span></li=
><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;m=
argin-top:8px;margin-right:0px !important;margin-bottom:0px !impo=
rtant;margin-left:40px;border-style:none none none solid;border-l=
eft-width:3px;border-left-color:rgb(108, 226, 108);list-style:dec=
imal outside;background-color:rgb(255, 255, 255);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;URI&gt;&nbsp;edit=
sDirs)&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10=
px !important;margin-top:8px;margin-right:0px !important;margin-b=
ottom:0px !important;margin-left:40px;border-style:none none none=
 solid;border-left-width:3px;border-left-color:rgb(108, 226, 108)=
;list-style:decimal outside;color:rgb(92, 92, 92);background-colo=
r:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;bord=
er:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throwsI=
OException&nbsp;{&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;background-col=
or:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"key=
word" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 10=
2, 153);font-weight:bold;">this</span><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">.conf&nbsp;=3D&nbsp;conf;&nb=
sp;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px=
 !important;margin-top:8px;margin-right:0px !important;margin-bot=
tom:0px !important;margin-left:40px;border-style:none none none s=
olid;border-left-width:3px;border-left-color:rgb(108, 226, 108);l=
ist-style:decimal outside;color:rgb(92, 92, 92);background-color:=
rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border=
:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"commen=
t" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130,=20=
0);">//=D7=A2=D2=E2=B4=CB=CA=B1=B5=C4storage=B6=D4=CF=F3=D6=D0sto=
rageDirs=B1=E4=C1=BF=D6=BB=B4=E6=B7=C5File=C4=BF=C2=BC=A3=AC=B2=BB=
=B4=E6=B7=C5bookkeeper,qjournal=C4=BF=C2=BC=A1=A3</span><span sty=
le=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbs=
p;</span></span></li><li class=3D"alt" style=3D"padding:0px 3px 0=
px 10px !important;margin-top:8px;margin-right:0px !important;mar=
gin-bottom:0px !important;margin-left:40px;border-style:none none=
 none solid;border-left-width:3px;border-left-color:rgb(108, 226,=
 108);list-style:decimal outside;background-color:rgb(255, 255, 2=
55);"><span style=3D"margin:0px;padding:0px;border:none;color:bla=
ck;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"mar=
gin:0px;padding:0px;border:none;color:rgb(0, 130, 0);">//bookkeep=
er,qjournal=C4=BF=C2=BC=CA=C7=BA=F3=C3=E6=CD=A8=B9=FD=B5=F7=D3=C3=
fsImage.getEditLog().initJournalsForWrite()=C0=B4=B3=F5=CA=BC=BB=AF=
bookeeper=BB=F2=D5=DFqjournal=C4=BF=C2=BC=B5=C4=A1=A3</span><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;=
&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px !i=
mportant;margin-top:8px;margin-right:0px !important;margin-bottom=
:0px !important;margin-left:40px;border-style:none none none soli=
d;border-left-width:3px;border-left-color:rgb(108, 226, 108);list=
-style:decimal outside;color:rgb(92, 92, 92);background-color:rgb=
(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border:no=
ne;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;storage&nbsp;=3D<span cl=
ass=3D"keyword" style=3D"margin:0px;padding:0px;border:none;color=
:rgb(0, 102, 153);font-weight:bold;">new</span><span style=3D"mar=
gin:0px;padding:0px;border:none;color:black;">&nbsp;NNStorage(con=
f,&nbsp;imageDirs,&nbsp;editsDirs);&nbsp;&nbsp;</span></span></li=
><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;m=
argin-top:8px;margin-right:0px !important;margin-bottom:0px !impo=
rtant;margin-left:40px;border-style:none none none solid;border-l=
eft-width:3px;border-left-color:rgb(108, 226, 108);list-style:dec=
imal outside;background-color:rgb(255, 255, 255);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;<span class=3D"keyword" style=3D"margin:0px;padding:0px;=
border:none;color:rgb(0, 102, 153);font-weight:bold;">if</span><s=
pan style=3D"margin:0px;padding:0px;border:none;color:black;">(co=
nf.getBoolean(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_RESTORE_KEY,&nb=
sp;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px=
 !important;margin-top:8px;margin-right:0px !important;margin-bot=
tom:0px !important;margin-left:40px;border-style:none none none s=
olid;border-left-width:3px;border-left-color:rgb(108, 226, 108);l=
ist-style:decimal outside;color:rgb(92, 92, 92);background-color:=
rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border=
:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;DFSConfigKeys.DFS_NAMENODE_NAME_DIR_R=
ESTORE_DEFAULT))&nbsp;{&nbsp;&nbsp;</span></li><li class=3D"alt"=20=
style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margi=
n-right:0px !important;margin-bottom:0px !important;margin-left:4=
0px;border-style:none none none solid;border-left-width:3px;borde=
r-left-color:rgb(108, 226, 108);list-style:decimal outside;backgr=
ound-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padding=
:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;storage.setRestoreFailedStorage(<span class=3D"keyword" style=3D=
"margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);font-w=
eight:bold;">true</span><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">);&nbsp;&nbsp;</span></span></li><li style=
=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-rig=
ht:0px !important;margin-bottom:0px !important;margin-left:40px;b=
order-style:none none none solid;border-left-width:3px;border-lef=
t-color:rgb(108, 226, 108);list-style:decimal outside;color:rgb(9=
2, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D"m=
argin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp=
;&nbsp;}&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"paddin=
g:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !im=
portant;margin-bottom:0px !important;margin-left:40px;border-styl=
e:none none none solid;border-left-width:3px;border-left-color:rg=
b(108, 226, 108);list-style:decimal outside;background-color:rgb(=
255, 255, 255);"><span style=3D"margin:0px;padding:0px;border:non=
e;color:black;">&nbsp;&nbsp;&nbsp;</span></li><li style=3D"paddin=
g:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !im=
portant;margin-bottom:0px !important;margin-left:40px;border-styl=
e:none none none solid;border-left-width:3px;border-left-color:rg=
b(108, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92)=
;background-color:rgb(248, 248, 248);"><span style=3D"margin:0px;=
padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<sp=
an class=3D"keyword" style=3D"margin:0px;padding:0px;border:none;=
color:rgb(0, 102, 153);font-weight:bold;">this</span><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">.editLog&nbsp;=3D=
</span><span class=3D"keyword" style=3D"margin:0px;padding:0px;bo=
rder:none;color:rgb(0, 102, 153);font-weight:bold;">new</span><sp=
an style=3D"margin:0px;padding:0px;border:none;color:black;">&nbs=
p;FSEditLog(conf,&nbsp;storage,&nbsp;editsDirs);&nbsp;&nbsp;</spa=
n></span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px=
 !important;margin-top:8px;margin-right:0px !important;margin-bot=
tom:0px !important;margin-left:40px;border-style:none none none s=
olid;border-left-width:3px;border-left-color:rgb(108, 226, 108);l=
ist-style:decimal outside;background-color:rgb(255, 255, 255);"><=
span style=3D"margin:0px;padding:0px;border:none;color:black;">&n=
bsp;&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px=
 !important;margin-top:8px;margin-right:0px !important;margin-bot=
tom:0px !important;margin-left:40px;border-style:none none none s=
olid;border-left-width:3px;border-left-color:rgb(108, 226, 108);l=
ist-style:decimal outside;color:rgb(92, 92, 92);background-color:=
rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border=
:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;archivalManager&nbsp;=
=3D<span class=3D"keyword" style=3D"margin:0px;padding:0px;border=
:none;color:rgb(0, 102, 153);font-weight:bold;">new</span><span s=
tyle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;NN=
StorageRetentionManager(conf,&nbsp;storage,&nbsp;editLog);&nbsp;&=
nbsp;</span></span></li><li class=3D"alt" style=3D"padding:0px 3p=
x 0px 10px !important;margin-top:8px;margin-right:0px !important;=
margin-bottom:0px !important;margin-left:40px;border-style:none n=
one none solid;border-left-width:3px;border-left-color:rgb(108, 2=
26, 108);list-style:decimal outside;background-color:rgb(255, 255=
, 255);"><span style=3D"margin:0px;padding:0px;border:none;color:=
black;">&nbsp;&nbsp;}&nbsp;&nbsp;</span></li></ol></div></div></d=
iv><p style=3D"padding:0px;margin:0px 0px 16px;font-size:1rem;col=
or:rgb(79, 79, 79);font-weight:400;text-align:justify;">=BE=CD=CF=
=F1=C7=B0=C3=E6=CB=B5=B5=C4=A3=ACEditLog=B5=C4=B9=DC=C0=ED=CF=E0=B6=
=D4FSImage=D2=AA=B8=B4=D4=D3=BA=DC=B6=E0=A1=A3=CB=F9=D2=D4=BD=D3=CF=
=C2=C0=B4=BE=CD=CA=C7fsImage.getEditLog().initJournalsForWrite()=C0=
=B4=B3=F5=CA=BC=BB=AF=B4=E6=B7=C5=C8=D5=D6=BE=B5=C4=B5=D8=B7=BD=A1=
=A3=D5=E2=B8=F6=D4=DAFSEditLog.initJournals()=D6=D0=CD=EA=B3=C9=A3=
=AC=B6=D4=D3=DA=BB=F9=D3=DAFile=B5=C4=B9=B2=CF=ED=B4=E6=B4=A2=A3=A8=
NFS=A3=A9=C0=B4=CB=B5=A3=AC=BE=CD=CA=C7=B4=B4=BD=A8=C1=CB=D2=BB=B8=
=F6=D3=C3=D3=DA=B9=DC=C0=ED=D5=E2=B8=F6=C9=E8=B1=B8=BA=CD=C6=E4=D6=
=D0EditLog=CE=C4=BC=FE=B5=C4FileJournaManger=A3=AC=C8=BB=BA=F3=BC=
=D3=C8=EBEditLog.journalSet=BC=AF=BA=CF=CD=B3=D2=BB=B9=DC=C0=ED=A3=
=BB=B6=F8=B6=D4=D3=DA=C6=E4=CB=FB=C0=E0=D0=CD=B5=C4=B9=B2=CF=ED=B4=
=E6=B4=A2(BookKeeper,QJM,BackupNode)=D4=F2=CA=C7=B4=B4=BD=A8=B6=D4=
=D3=A6=B5=C4JournalManager=B6=D4=CF=F3=A1=A3=B6=D4=D3=DA=CE=D2=C3=
=C7=B5=C4QJM=C0=B4=CB=B5=A3=AC=BE=CD=CA=C7=B4=B4=BD=A8=C1=CB=D2=BB=
=B8=F6QuorumJournalManager=B6=D4=CF=F3=A1=A3</p><h3 style=3D"padd=
ing:0px;margin:8px 0px 16px;font-size:1.375rem;color:rgb(79, 79,=20=
79);font-weight:700;"><a name=3D"t1" style=3D"color:rgb(78, 161,=20=
219);text-decoration:none;"></a>2=A3=AC=B9=B9=D4=ECQuroumJournalM=
anager</h3><p style=3D"padding:0px;margin:0px 0px 16px;font-size:=
1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justify;">Q=
uromJournalManager=B5=C4=B9=B9=D4=EC=BA=AF=CA=FD=B3=F5=CA=BC=BB=AF=
=C1=CB=D2=BB=D0=A9=B1=E4=C1=BF=A3=AC=B1=C8=C8=E7=D5=E2=B8=F6QJM=B5=
=C4uri,nsinfo=B5=C8=A1=A3=D7=A2=D2=E2=CE=D2=C3=C7=CA=B9=D3=C3URI=C0=
=B4=C7=F8=B7=D6=B2=BB=CD=AC=B5=C4JournalNode=BC=AF=C8=BA=A3=ACJou=
rnalNode=BC=AF=C8=BA=B5=C4URI=B1=ED=CA=BE=C0=E0=CB=C6=D3=DAZookee=
per=A3=AC=D5=E2=C0=EF=D3=D0=B8=F6=C0=FD=D7=D3=A3=AC=CE=D2=C3=C7=D4=
=DAhdfs-site.xml=D6=D0=BB=E1=CD=A8=B9=FD=D2=D4=CF=C2=B5=C4=D0=CE=CA=
=BD=C5=E4=D6=C3=CA=B9=D3=C3QJM=A3=BA</p><div style=3D"padding:0px=
;margin:0px;"><div id=3D"highlighter_361469" class=3D"syntaxhighl=
ighter bash" style=3D"padding:0px;margin:0px;"><div class=3D"dp-h=
ighlighter bg_html" style=3D"padding:1px 0px 0px;margin:0px 0px 2=
4px;font-family:Consolas, 'Courier New', Courier, mono, serif;fon=
t-size:0.75rem;width:843.469px;text-align:left;background-color:r=
gb(231, 229, 220);"><div class=3D"bar" style=3D"padding:0px 0px 0=
px 45px;margin:0px;"><div class=3D"tools" style=3D"padding:3px 8p=
x 10px 10px;margin:0px;font-style:normal;font-weight:normal;font-=
size:0.563rem;font-family:Verdana, Geneva, Arial, Helvetica, sans=
-serif;color:silver;border-left-width:3px;border-left-style:solid=
;border-left-color:rgb(108, 226, 108);border-right-width:1px;bord=
er-right-style:solid;border-right-color:rgb(231, 229, 220);backgr=
ound-color:rgb(248, 248, 248);"><b style=3D"font-weight:bold;">[h=
tml]</b><span class=3D"Apple-converted-space">&nbsp;</span><a hre=
f=3D"https://blog.csdn.net/knowledgeaaa/article/details/23248999#=
" class=3D"ViewSource" title=3D"view plain" style=3D"color:rgb(10=
3, 149, 181);text-decoration:none;border:none;padding:1px;margin:=
0px 10px 0px 0px;font-size:0.563rem;display:inline-block;width:16=
px;text-indent:-2000px;background-image:url(&quot;&quot;);backgro=
und-position:0% 0%;background-repeat:no-repeat;">view plain</a><s=
pan data-mod=3D"popu_168"><span class=3D"Apple-converted-space">&=
nbsp;</span><a href=3D"https://blog.csdn.net/knowledgeaaa/article=
/details/23248999#" class=3D"CopyToClipboard" title=3D"copy" styl=
e=3D"color:rgb(103, 149, 181);text-decoration:none;border:none;pa=
dding:1px;margin:0px 10px 0px 0px;font-size:0.563rem;display:inli=
ne-block;width:16px;text-indent:-2000px;background-image:url(&quo=
t;&quot;);background-position:0% 0%;background-repeat:no-repeat;"=
>copy</a><div style=3D"padding:0px;margin:0px;width:16px;"><embed=
 id=3D"ZeroClipboardMovie_2" src=3D"https://csdnimg.cn/public/hig=
hlighter/ZeroClipboard.swf" loop=3D"false" menu=3D"false" quality=
=3D"best" bgcolor=3D"#ffffff" width=3D"16" height=3D"16" name=3D"=
ZeroClipboardMovie_2" align=3D"middle" allowscriptaccess=3D"alway=
s" allowfullscreen=3D"false" type=3D"application/x-shockwave-flas=
h" pluginspage=3D"http://www.macromedia.com/go/getflashplayer" fl=
ashvars=3D"id=3D2&amp;width=3D16&amp;height=3D16" wmode=3D"transp=
arent" style></div><div style=3D"padding:0px;margin:0px;width:16p=
x;"><embed id=3D"ZeroClipboardMovie_8" src=3D"https://csdnimg.cn/=
public/highlighter/ZeroClipboard.swf" loop=3D"false" menu=3D"fals=
e" quality=3D"best" bgcolor=3D"#ffffff" width=3D"16" height=3D"16=
" name=3D"ZeroClipboardMovie_8" align=3D"middle" allowscriptacces=
s=3D"always" allowfullscreen=3D"false" type=3D"application/x-shoc=
kwave-flash" pluginspage=3D"http://www.macromedia.com/go/getflash=
player" flashvars=3D"id=3D8&amp;width=3D16&amp;height=3D16" wmode=
=3D"transparent" style></div></span><span data-mod=3D"popu_169"><=
/span></div></div><ol class=3D"dp-xml wiz-list-level1" style=3D"p=
adding:0px;margin:0px 0px 24px;list-style:decimal;border-style:no=
ne solid none none;border-right-width:1px;border-right-color:rgb(=
231, 229, 220);color:rgb(92, 92, 92);background-color:rgb(255, 25=
5, 255);"><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !im=
portant;margin-top:8px;margin-right:0px !important;margin-bottom:=
0px !important;margin-left:40px;border-style:none none none solid=
;border-left-width:3px;border-left-color:rgb(108, 226, 108);list-=
style:decimal outside;background-color:rgb(255, 255, 255);"><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;"><span=20=
class=3D"tag" style=3D"margin:0px;padding:0px;border:none;color:r=
gb(153, 51, 0);font-weight:bold;">&lt;</span><span class=3D"tag-n=
ame" style=3D"margin:0px;padding:0px;border:none;color:rgb(153, 5=
1, 0);font-weight:bold;">property</span><span class=3D"tag" style=
=3D"margin:0px;padding:0px;border:none;color:rgb(153, 51, 0);font=
-weight:bold;">&gt;</span><span style=3D"margin:0px;padding:0px;b=
order:none;color:black;">&nbsp;&nbsp;</span></span></li><li style=
=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-rig=
ht:0px !important;margin-bottom:0px !important;margin-left:40px;b=
order-style:none none none solid;border-left-width:3px;border-lef=
t-color:rgb(108, 226, 108);list-style:decimal outside;color:rgb(9=
2, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D"m=
argin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;<span=
 class=3D"tag" style=3D"margin:0px;padding:0px;border:none;color:=
rgb(153, 51, 0);font-weight:bold;">&lt;</span><span class=3D"tag-=
name" style=3D"margin:0px;padding:0px;border:none;color:rgb(153,=20=
51, 0);font-weight:bold;">name</span><span class=3D"tag" style=3D=
"margin:0px;padding:0px;border:none;color:rgb(153, 51, 0);font-we=
ight:bold;">&gt;</span><span style=3D"margin:0px;padding:0px;bord=
er:none;color:black;">dfs.namenode.shared.edits.dir</span><span c=
lass=3D"tag" style=3D"margin:0px;padding:0px;border:none;color:rg=
b(153, 51, 0);font-weight:bold;">&lt;/</span><span class=3D"tag-n=
ame" style=3D"margin:0px;padding:0px;border:none;color:rgb(153, 5=
1, 0);font-weight:bold;">name</span><span class=3D"tag" style=3D"=
margin:0px;padding:0px;border:none;color:rgb(153, 51, 0);font-wei=
ght:bold;">&gt;</span><span style=3D"margin:0px;padding:0px;borde=
r:none;color:black;">&nbsp;&nbsp;</span></span></li><li class=3D"=
alt" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;=
margin-right:0px !important;margin-bottom:0px !important;margin-l=
eft:40px;border-style:none none none solid;border-left-width:3px;=
border-left-color:rgb(108, 226, 108);list-style:decimal outside;b=
ackground-color:rgb(255, 255, 255);"><span style=3D"margin:0px;pa=
dding:0px;border:none;color:black;">&nbsp;&nbsp;<span class=3D"ta=
g" style=3D"margin:0px;padding:0px;border:none;color:rgb(153, 51,=
 0);font-weight:bold;">&lt;</span><span class=3D"tag-name" style=3D=
"margin:0px;padding:0px;border:none;color:rgb(153, 51, 0);font-we=
ight:bold;">value</span><span class=3D"tag" style=3D"margin:0px;p=
adding:0px;border:none;color:rgb(153, 51, 0);font-weight:bold;">&=
gt;</span><span style=3D"margin:0px;padding:0px;border:none;color=
:black;">qjournal://node1.example.com:8485;node2.example.com:8485=
;node3.example.com:8485/mycluster</span><span class=3D"tag" style=
=3D"margin:0px;padding:0px;border:none;color:rgb(153, 51, 0);font=
-weight:bold;">&lt;/</span><span class=3D"tag-name" style=3D"marg=
in:0px;padding:0px;border:none;color:rgb(153, 51, 0);font-weight:=
bold;">value</span><span class=3D"tag" style=3D"margin:0px;paddin=
g:0px;border:none;color:rgb(153, 51, 0);font-weight:bold;">&gt;</=
span><span style=3D"margin:0px;padding:0px;border:none;color:blac=
k;">&nbsp;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0=
px 10px !important;margin-top:8px;margin-right:0px !important;mar=
gin-bottom:0px !important;margin-left:40px;border-style:none none=
 none solid;border-left-width:3px;border-left-color:rgb(108, 226,=
 108);list-style:decimal outside;color:rgb(92, 92, 92);background=
-color:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px=
;border:none;color:black;"><span class=3D"tag" style=3D"margin:0p=
x;padding:0px;border:none;color:rgb(153, 51, 0);font-weight:bold;=
">&lt;/</span><span class=3D"tag-name" style=3D"margin:0px;paddin=
g:0px;border:none;color:rgb(153, 51, 0);font-weight:bold;">proper=
ty</span><span class=3D"tag" style=3D"margin:0px;padding:0px;bord=
er:none;color:rgb(153, 51, 0);font-weight:bold;">&gt;</span><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;=
&nbsp;</span></span></li></ol></div></div></div><p style=3D"paddi=
ng:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);f=
ont-weight:400;text-align:justify;">=C8=BB=BA=F3=B9=B9=D4=EC=D2=BB=
=B8=F6AsyncLoggerSet=B6=D4=CF=F3=D3=C3=D3=DA=B9=DC=C0=ED=B8=C3Qur=
omJournalManager=CF=F2=B6=E0=B8=F6JournalNode=B5=C4=C1=AC=BD=D3=A1=
=A3=D5=E2=B8=F6AsyncLoggerSet=B6=D4=CF=F3=C0=EF=C3=E6=D3=D0=B8=F6=
=B4=E6=B7=C5AsyncLogger=BD=D3=BF=DA=A3=A8=D5=E6=D5=FD=B5=C4=CA=B5=
=CF=D6=C0=E0=CA=C7IPCLoggerChannel=A3=AC=C3=BF=B8=F6IPCLoggerChan=
nel=B9=DC=C0=EDQJM=D3=EB=D2=BB=B8=F6JournalNode=B5=C4=C1=AC=BD=D3=
=BA=CD=D2=EC=B2=BD=CD=A8=D0=C5=A3=A9=B5=C4List=A1=A3</p><p style=3D=
"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79,=
 79);font-weight:400;text-align:justify;">this.loggers&nbsp;=3D&n=
bsp;new&nbsp;AsyncLoggerSet(createLoggers(loggerFactory));</p><p=20=
style=3D"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb=
(79, 79, 79);font-weight:400;text-align:justify;">=BD=F8=D2=BB=B2=
=BD=B5=F7=D3=C3</p><p style=3D"padding:0px;margin:0px 0px 16px;fo=
nt-size:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:jus=
tify;">static&nbsp;List&lt;AsyncLogger&gt;&nbsp;createLoggers&nbs=
p;(Configuration conf,</p><p style=3D"padding:0px;margin:0px 0px=20=
16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:400;text-al=
ign:justify;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URI uri, NamespaceIn=
fo nsInfo, AsyncLogger.Factory factory)</p><p style=3D"padding:0p=
x;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-w=
eight:400;text-align:justify;">=B4=B4=BD=A8=D2=BB=CF=B5=C1=D0=B5=C4=
AsyncLogger=D3=C3=D3=DA=D0=B4Log</p><div style=3D"padding:0px;mar=
gin:0px;"><div id=3D"highlighter_835413" class=3D"syntaxhighlight=
er java" style=3D"padding:0px;margin:0px;"><div class=3D"dp-highl=
ighter bg_java" style=3D"padding:1px 0px 0px;margin:0px 0px 24px;=
font-family:Consolas, 'Courier New', Courier, mono, serif;font-si=
ze:0.75rem;width:843.469px;text-align:left;background-color:rgb(2=
31, 229, 220);"><div class=3D"bar" style=3D"padding:0px 0px 0px 4=
5px;margin:0px;"><div class=3D"tools" style=3D"padding:3px 8px 10=
px 10px;margin:0px;font-style:normal;font-weight:normal;font-size=
:0.563rem;font-family:Verdana, Geneva, Arial, Helvetica, sans-ser=
if;color:silver;border-left-width:3px;border-left-style:solid;bor=
der-left-color:rgb(108, 226, 108);border-right-width:1px;border-r=
ight-style:solid;border-right-color:rgb(231, 229, 220);background=
-color:rgb(248, 248, 248);"><b style=3D"font-weight:bold;">[java]=
</b><span class=3D"Apple-converted-space">&nbsp;</span><a href=3D=
"https://blog.csdn.net/knowledgeaaa/article/details/23248999#" cl=
ass=3D"ViewSource" title=3D"view plain" style=3D"color:rgb(103, 1=
49, 181);text-decoration:none;border:none;padding:1px;margin:0px=20=
10px 0px 0px;font-size:0.563rem;display:inline-block;width:16px;t=
ext-indent:-2000px;background-image:url(&quot;&quot;);background-=
position:0% 0%;background-repeat:no-repeat;">view plain</a><span=20=
data-mod=3D"popu_168"><span class=3D"Apple-converted-space">&nbsp=
;</span><a href=3D"https://blog.csdn.net/knowledgeaaa/article/det=
ails/23248999#" class=3D"CopyToClipboard" title=3D"copy" style=3D=
"color:rgb(103, 149, 181);text-decoration:none;border:none;paddin=
g:1px;margin:0px 10px 0px 0px;font-size:0.563rem;display:inline-b=
lock;width:16px;text-indent:-2000px;background-image:url(&quot;&q=
uot;);background-position:0% 0%;background-repeat:no-repeat;">cop=
y</a><div style=3D"padding:0px;margin:0px;width:16px;"><embed id=3D=
"ZeroClipboardMovie_3" src=3D"https://csdnimg.cn/public/highlight=
er/ZeroClipboard.swf" loop=3D"false" menu=3D"false" quality=3D"be=
st" bgcolor=3D"#ffffff" width=3D"16" height=3D"16" name=3D"ZeroCl=
ipboardMovie_3" align=3D"middle" allowscriptaccess=3D"always" all=
owfullscreen=3D"false" type=3D"application/x-shockwave-flash" plu=
ginspage=3D"http://www.macromedia.com/go/getflashplayer" flashvar=
s=3D"id=3D3&amp;width=3D16&amp;height=3D16" wmode=3D"transparent"=
 style></div><div style=3D"padding:0px;margin:0px;width:16px;"><e=
mbed id=3D"ZeroClipboardMovie_9" src=3D"https://csdnimg.cn/public=
/highlighter/ZeroClipboard.swf" loop=3D"false" menu=3D"false" qua=
lity=3D"best" bgcolor=3D"#ffffff" width=3D"16" height=3D"16" name=
=3D"ZeroClipboardMovie_9" align=3D"middle" allowscriptaccess=3D"a=
lways" allowfullscreen=3D"false" type=3D"application/x-shockwave-=
flash" pluginspage=3D"http://www.macromedia.com/go/getflashplayer=
" flashvars=3D"id=3D9&amp;width=3D16&amp;height=3D16" wmode=3D"tr=
ansparent" style></div></span><span data-mod=3D"popu_169"></span>=
</div></div><ol class=3D"dp-j wiz-list-level1" style=3D"padding:0=
px;margin:0px 0px 24px;list-style:decimal;border-style:none solid=
 none none;border-right-width:1px;border-right-color:rgb(231, 229=
, 220);color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);=
"><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;=
margin-top:8px;margin-right:0px !important;margin-bottom:0px !imp=
ortant;margin-left:40px;border-style:none none none solid;border-=
left-width:3px;border-left-color:rgb(108, 226, 108);list-style:de=
cimal outside;background-color:rgb(255, 255, 255);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;"><span class=3D"=
keyword" style=3D"margin:0px;padding:0px;border:none;color:rgb(0,=
 102, 153);font-weight:bold;">static</span><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;List&lt;AsyncLogg=
er&gt;&nbsp;createLoggers(Configuration&nbsp;conf,&nbsp;&nbsp;</s=
pan></span></li><li style=3D"padding:0px 3px 0px 10px !important;=
margin-top:8px;margin-right:0px !important;margin-bottom:0px !imp=
ortant;margin-left:40px;border-style:none none none solid;border-=
left-width:3px;border-left-color:rgb(108, 226, 108);list-style:de=
cimal outside;color:rgb(92, 92, 92);background-color:rgb(248, 248=
, 248);"><span style=3D"margin:0px;padding:0px;border:none;color:=
black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URI&nbsp;uri,&nbsp;Na=
mespaceInfo&nbsp;nsInfo,&nbsp;AsyncLogger.Factory&nbsp;factory)&n=
bsp;&nbsp;</span></li><li class=3D"alt" style=3D"padding:0px 3px=20=
0px 10px !important;margin-top:8px;margin-right:0px !important;ma=
rgin-bottom:0px !important;margin-left:40px;border-style:none non=
e none solid;border-left-width:3px;border-left-color:rgb(108, 226=
, 108);list-style:decimal outside;background-color:rgb(255, 255,=20=
255);"><span style=3D"margin:0px;padding:0px;border:none;color:bl=
ack;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;throwsIOException&nbsp;{&nbsp;&nbsp;</span></li><li style=3D"pad=
ding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px=20=
!important;margin-bottom:0px !important;margin-left:40px;border-s=
tyle:none none none solid;border-left-width:3px;border-left-color=
:rgb(108, 226, 108);list-style:decimal outside;color:rgb(92, 92,=20=
92);background-color:rgb(248, 248, 248);"><span style=3D"margin:0=
px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;=
List&nbsp;&lt;AsyncLogger&gt;&nbsp;ret&nbsp;=3D&nbsp;Lists.newArr=
ayList();&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"paddi=
ng:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !i=
mportant;margin-bottom:0px !important;margin-left:40px;border-sty=
le:none none none solid;border-left-width:3px;border-left-color:r=
gb(108, 226, 108);list-style:decimal outside;background-color:rgb=
(255, 255, 255);"><span style=3D"margin:0px;padding:0px;border:no=
ne;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment"=20=
style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);=
">//=B4=D3uri=D6=D0=BD=E2=CE=F6=B3=F6=B6=D4=D3=A6=B5=C42N+1=CC=A8=
JournalNode=BD=DA=B5=E3=B5=C4ip+port</span><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span></sp=
an></li><li style=3D"padding:0px 3px 0px 10px !important;margin-t=
op:8px;margin-right:0px !important;margin-bottom:0px !important;m=
argin-left:40px;border-style:none none none solid;border-left-wid=
th:3px;border-left-color:rgb(108, 226, 108);list-style:decimal ou=
tside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"=
><span style=3D"margin:0px;padding:0px;border:none;color:black;">=
&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;&lt;InetSocketAddress&gt;&nbsp;=
addrs&nbsp;=3D&nbsp;getLoggerAddresses(uri);&nbsp;&nbsp;</span></=
li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important=
;margin-top:8px;margin-right:0px !important;margin-bottom:0px !im=
portant;margin-left:40px;border-style:none none none solid;border=
-left-width:3px;border-left-color:rgb(108, 226, 108);list-style:d=
ecimal outside;background-color:rgb(255, 255, 255);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;<span class=3D"comment" style=3D"margin:0px;padding:0px;=
border:none;color:rgb(0, 130, 0);">//=B4=D3uri=D6=D0=BD=E2=CE=F6=B3=
=F6JournalId=A3=AC=CE=D2=C3=C7=B5=C4=C0=FD=D7=D3=D6=D0=BD=E2=CE=F6=
=B3=F6=C0=B4=B5=C4=D3=A6=B8=C3=CA=C7mycluster</span><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</s=
pan></span></li><li style=3D"padding:0px 3px 0px 10px !important;=
margin-top:8px;margin-right:0px !important;margin-bottom:0px !imp=
ortant;margin-left:40px;border-style:none none none solid;border-=
left-width:3px;border-left-color:rgb(108, 226, 108);list-style:de=
cimal outside;color:rgb(92, 92, 92);background-color:rgb(248, 248=
, 248);"><span style=3D"margin:0px;padding:0px;border:none;color:=
black;">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;jid&nbsp;=3D&nbsp;par=
seJournalId(uri);&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;background-col=
or:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"key=
word" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 10=
2, 153);font-weight:bold;">for</span><span style=3D"margin:0px;pa=
dding:0px;border:none;color:black;">(InetSocketAddress&nbsp;addr&=
nbsp;:&nbsp;addrs)&nbsp;{&nbsp;&nbsp;</span></span></li><li style=
=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-rig=
ht:0px !important;margin-bottom:0px !important;margin-left:40px;b=
order-style:none none none solid;border-left-width:3px;border-lef=
t-color:rgb(108, 226, 108);list-style:decimal outside;color:rgb(9=
2, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D"m=
argin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margin:0px;pa=
dding:0px;border:none;color:rgb(0, 130, 0);">//=B7=B5=BB=D8=CE=AA=
=C3=BF=D2=BB=B8=F6JN=B4=B4=BD=A8=B5=C4IPCLoggerChannel=C0=E0=B6=D4=
=CF=F3=A3=ACIPCLoggerChannel=BC=CC=B3=D0=D7=D4AsyncLogger</span><=
span style=3D"margin:0px;padding:0px;border:none;color:black;">&n=
bsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"padding:0=
px 3px 0px 10px !important;margin-top:8px;margin-right:0px !impor=
tant;margin-bottom:0px !important;margin-left:40px;border-style:n=
one none none solid;border-left-width:3px;border-left-color:rgb(1=
08, 226, 108);list-style:decimal outside;background-color:rgb(255=
, 255, 255);"><span style=3D"margin:0px;padding:0px;border:none;c=
olor:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret.add(factory.=
createLogger(conf,&nbsp;nsInfo,&nbsp;jid,&nbsp;addr));&nbsp;&nbsp=
;</span></li><li style=3D"padding:0px 3px 0px 10px !important;mar=
gin-top:8px;margin-right:0px !important;margin-bottom:0px !import=
ant;margin-left:40px;border-style:none none none solid;border-lef=
t-width:3px;border-left-color:rgb(108, 226, 108);list-style:decim=
al outside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 2=
48);"><span style=3D"margin:0px;padding:0px;border:none;color:bla=
ck;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=3D=
"alt" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px=
;margin-right:0px !important;margin-bottom:0px !important;margin-=
left:40px;border-style:none none none solid;border-left-width:3px=
;border-left-color:rgb(108, 226, 108);list-style:decimal outside;=
background-color:rgb(255, 255, 255);"><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;retu=
rnret;&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10=
px !important;margin-top:8px;margin-right:0px !important;margin-b=
ottom:0px !important;margin-left:40px;border-style:none none none=
 solid;border-left-width:3px;border-left-color:rgb(108, 226, 108)=
;list-style:decimal outside;color:rgb(92, 92, 92);background-colo=
r:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;bord=
er:none;color:black;">&nbsp;&nbsp;}&nbsp;&nbsp;</span></li></ol><=
/div></div></div><h3 style=3D"padding:0px;margin:8px 0px 16px;fon=
t-size:1.375rem;color:rgb(79, 79, 79);font-weight:700;"><a name=3D=
"t2" style=3D"color:rgb(78, 161, 219);text-decoration:none;"></a>=
3=A3=AC=B8=F1=CA=BD=BB=AFqjournal</h3><p style=3D"padding:0px;mar=
gin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight=
:400;text-align:justify;">New=B3=F6=D5=E2=B8=F6FSImage=B6=D4=CF=F3=
=D6=AE=BA=F3=BE=CD=B8=C3=B3=F5=CA=BC=BB=AF=C1=CB=A3=ACFSImage.for=
mat()-&gt;editLog.formatNonFileJournals&nbsp;(ns) =B8=BA=D4=F0for=
mat=B7=C7File=B5=C4EditLog=B4=E6=B7=C5URI=A1=A3=BD=F8=D2=BB=B2=BD=
=BB=E1=B5=F7=D3=C3</p><p style=3D"padding:0px;margin:0px 0px 16px=
;font-size:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:=
justify;">QuorumJournalManager.format(NamespaceInfo nsInfo)=BB=E1=
=B8=F1=CA=BD=BB=AFqjournal=A1=A3</p><div style=3D"padding:0px;mar=
gin:0px;"><div id=3D"highlighter_374805" class=3D"syntaxhighlight=
er java" style=3D"padding:0px;margin:0px;"><div class=3D"dp-highl=
ighter bg_java" style=3D"padding:1px 0px 0px;margin:0px 0px 24px;=
font-family:Consolas, 'Courier New', Courier, mono, serif;font-si=
ze:0.75rem;width:843.469px;text-align:left;background-color:rgb(2=
31, 229, 220);"><div class=3D"bar" style=3D"padding:0px 0px 0px 4=
5px;margin:0px;"><div class=3D"tools" style=3D"padding:3px 8px 10=
px 10px;margin:0px;font-style:normal;font-weight:normal;font-size=
:0.563rem;font-family:Verdana, Geneva, Arial, Helvetica, sans-ser=
if;color:silver;border-left-width:3px;border-left-style:solid;bor=
der-left-color:rgb(108, 226, 108);border-right-width:1px;border-r=
ight-style:solid;border-right-color:rgb(231, 229, 220);background=
-color:rgb(248, 248, 248);"><b style=3D"font-weight:bold;">[java]=
</b><span class=3D"Apple-converted-space">&nbsp;</span><a href=3D=
"https://blog.csdn.net/knowledgeaaa/article/details/23248999#" cl=
ass=3D"ViewSource" title=3D"view plain" style=3D"color:rgb(103, 1=
49, 181);text-decoration:none;border:none;padding:1px;margin:0px=20=
10px 0px 0px;font-size:0.563rem;display:inline-block;width:16px;t=
ext-indent:-2000px;background-image:url(&quot;&quot;);background-=
position:0% 0%;background-repeat:no-repeat;">view plain</a><span=20=
data-mod=3D"popu_168"><span class=3D"Apple-converted-space">&nbsp=
;</span><a href=3D"https://blog.csdn.net/knowledgeaaa/article/det=
ails/23248999#" class=3D"CopyToClipboard" title=3D"copy" style=3D=
"color:rgb(103, 149, 181);text-decoration:none;border:none;paddin=
g:1px;margin:0px 10px 0px 0px;font-size:0.563rem;display:inline-b=
lock;width:16px;text-indent:-2000px;background-image:url(&quot;&q=
uot;);background-position:0% 0%;background-repeat:no-repeat;">cop=
y</a><div style=3D"padding:0px;margin:0px;width:16px;"><embed id=3D=
"ZeroClipboardMovie_4" src=3D"https://csdnimg.cn/public/highlight=
er/ZeroClipboard.swf" loop=3D"false" menu=3D"false" quality=3D"be=
st" bgcolor=3D"#ffffff" width=3D"16" height=3D"16" name=3D"ZeroCl=
ipboardMovie_4" align=3D"middle" allowscriptaccess=3D"always" all=
owfullscreen=3D"false" type=3D"application/x-shockwave-flash" plu=
ginspage=3D"http://www.macromedia.com/go/getflashplayer" flashvar=
s=3D"id=3D4&amp;width=3D16&amp;height=3D16" wmode=3D"transparent"=
 style></div><div style=3D"padding:0px;margin:0px;width:16px;"><e=
mbed id=3D"ZeroClipboardMovie_10" src=3D"https://csdnimg.cn/publi=
c/highlighter/ZeroClipboard.swf" loop=3D"false" menu=3D"false" qu=
ality=3D"best" bgcolor=3D"#ffffff" width=3D"16" height=3D"16" nam=
e=3D"ZeroClipboardMovie_10" align=3D"middle" allowscriptaccess=3D=
"always" allowfullscreen=3D"false" type=3D"application/x-shockwav=
e-flash" pluginspage=3D"http://www.macromedia.com/go/getflashplay=
er" flashvars=3D"id=3D10&amp;width=3D16&amp;height=3D16" wmode=3D=
"transparent" style></div></span><span data-mod=3D"popu_169"></sp=
an></div></div><ol class=3D"dp-j wiz-list-level1" style=3D"paddin=
g:0px;margin:0px 0px 24px;list-style:decimal;border-style:none so=
lid none none;border-right-width:1px;border-right-color:rgb(231,=20=
229, 220);color:rgb(92, 92, 92);background-color:rgb(255, 255, 25=
5);"><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !importa=
nt;margin-top:8px;margin-right:0px !important;margin-bottom:0px !=
important;margin-left:40px;border-style:none none none solid;bord=
er-left-width:3px;border-left-color:rgb(108, 226, 108);list-style=
:decimal outside;background-color:rgb(255, 255, 255);"><span styl=
e=3D"margin:0px;padding:0px;border:none;color:black;"><span class=
=3D"keyword" style=3D"margin:0px;padding:0px;border:none;color:rg=
b(0, 102, 153);font-weight:bold;">public</span><span style=3D"mar=
gin:0px;padding:0px;border:none;color:black;">&nbsp;</span><span=20=
class=3D"keyword" style=3D"margin:0px;padding:0px;border:none;col=
or:rgb(0, 102, 153);font-weight:bold;">void</span><span style=3D"=
margin:0px;padding:0px;border:none;color:black;">&nbsp;format(Nam=
espaceInfo&nbsp;nsInfo)&nbsp;throwsIOException&nbsp;{&nbsp;&nbsp;=
</span></span></li><li style=3D"padding:0px 3px 0px 10px !importa=
nt;margin-top:8px;margin-right:0px !important;margin-bottom:0px !=
important;margin-left:40px;border-style:none none none solid;bord=
er-left-width:3px;border-left-color:rgb(108, 226, 108);list-style=
:decimal outside;color:rgb(92, 92, 92);background-color:rgb(248,=20=
248, 248);"><span style=3D"margin:0px;padding:0px;border:none;col=
or:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D=
"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);">//&nbs=
p;AsyncLoggerSet=D5=E2=B8=F6wrapper=C0=E0=BB=E1=D2=C0=B4=CE=B5=F7=
=D3=C3=C6=E4=C4=DA=B2=BF=B5=C4AsyncLogger.format()=A3=AC=B7=A2=CB=
=CDformat&nbsp;RPC=A3=AC=C8=BB=BA=F3=D7=A2=B2=E1callback=BA=AF=CA=
=FD=A1=A3</span><span style=3D"margin:0px;padding:0px;border:none=
;color:black;">&nbsp;&nbsp;</span></span></li><li class=3D"alt" s=
tyle=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin=
-right:0px !important;margin-bottom:0px !important;margin-left:40=
px;border-style:none none none solid;border-left-width:3px;border=
-left-color:rgb(108, 226, 108);list-style:decimal outside;backgro=
und-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:=
0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;QuorumCall&=
lt;AsyncLogger,Void&gt;&nbsp;call&nbsp;=3D&nbsp;loggers.format(ns=
Info);&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10=
px !important;margin-top:8px;margin-right:0px !important;margin-b=
ottom:0px !important;margin-left:40px;border-style:none none none=
 solid;border-left-width:3px;border-left-color:rgb(108, 226, 108)=
;list-style:decimal outside;color:rgb(92, 92, 92);background-colo=
r:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;bord=
er:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyw=
ord" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 102=
, 153);font-weight:bold;">try</span><span style=3D"margin:0px;pad=
ding:0px;border:none;color:black;">{&nbsp;&nbsp;</span></span></l=
i><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;=
margin-top:8px;margin-right:0px !important;margin-bottom:0px !imp=
ortant;margin-left:40px;border-style:none none none solid;border-=
left-width:3px;border-left-color:rgb(108, 226, 108);list-style:de=
cimal outside;background-color:rgb(255, 255, 255);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margi=
n:0px;padding:0px;border:none;color:rgb(0, 130, 0);">//=D4=DA=D5=E2=
=B8=F6=BA=AF=CA=FD=C0=EF=D1=AD=BB=B7=B5=C8=B4=FD=D3=D0=D7=E3=B9=BB=
=B5=C4success&nbsp;response=BB=F2=D5=DFexception=BB=F2=D5=DFtime&=
nbsp;out=A1=A3=B6=D4=D3=DAformat=C7=EB=C7=F3=A3=AC=D2=AA=C7=F3=CB=
=F9=D3=D0JN=A3=A8=B2=BB=CA=C7=B4=F3=B6=E0=CA=FD=A3=A9=B7=B5=BB=D8=
=B3=C9=B9=A6=B2=C5=D0=D0=A1=A3</span><span style=3D"margin:0px;pa=
dding:0px;border:none;color:black;">&nbsp;&nbsp;</span></span></l=
i><li style=3D"padding:0px 3px 0px 10px !important;margin-top:8px=
;margin-right:0px !important;margin-bottom:0px !important;margin-=
left:40px;border-style:none none none solid;border-left-width:3px=
;border-left-color:rgb(108, 226, 108);list-style:decimal outside;=
color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call.waitFor(&nbsp;loggers.size(),&=
nbsp;loggers.size(),<span class=3D"number" style=3D"margin:0px;pa=
dding:0px;border:none;color:rgb(192, 0, 0);">0</span><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">,&nbsp;FORMAT_T=
IMEOUT_MS,&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;background-col=
or:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;<span class=3D"string" style=3D"margin:0px;padd=
ing:0px;border:none;color:blue;">"format"</span><span style=3D"ma=
rgin:0px;padding:0px;border:none;color:black;">);&nbsp;&nbsp;</sp=
an></span></li><li style=3D"padding:0px 3px 0px 10px !important;m=
argin-top:8px;margin-right:0px !important;margin-bottom:0px !impo=
rtant;margin-left:40px;border-style:none none none solid;border-l=
eft-width:3px;border-left-color:rgb(108, 226, 108);list-style:dec=
imal outside;color:rgb(92, 92, 92);background-color:rgb(248, 248,=
 248);"><span style=3D"margin:0px;padding:0px;border:none;color:b=
lack;">&nbsp;&nbsp;&nbsp;&nbsp;}<span class=3D"keyword" style=3D"=
margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);font-we=
ight:bold;">catch</span><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;(InterruptedException&nbsp;e)&nbsp;{=
&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"padding=
:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !imp=
ortant;margin-bottom:0px !important;margin-left:40px;border-style=
:none none none solid;border-left-width:3px;border-left-color:rgb=
(108, 226, 108);list-style:decimal outside;background-color:rgb(2=
55, 255, 255);"><span style=3D"margin:0px;padding:0px;border:none=
;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thrownew&nbsp;=
IOException(&nbsp;<span class=3D"string" style=3D"margin:0px;padd=
ing:0px;border:none;color:blue;">"Interrupted&nbsp;waiting&nbsp;f=
or&nbsp;format()&nbsp;response"</span><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">);&nbsp;&nbsp;</span></span>=
</li><li style=3D"padding:0px 3px 0px 10px !important;margin-top:=
8px;margin-right:0px !important;margin-bottom:0px !important;marg=
in-left:40px;border-style:none none none solid;border-left-width:=
3px;border-left-color:rgb(108, 226, 108);list-style:decimal outsi=
de;color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><s=
pan style=3D"margin:0px;padding:0px;border:none;color:black;">&nb=
sp;&nbsp;&nbsp;&nbsp;}<span class=3D"keyword" style=3D"margin:0px=
;padding:0px;border:none;color:rgb(0, 102, 153);font-weight:bold;=
">catch</span><span style=3D"margin:0px;padding:0px;border:none;c=
olor:black;">&nbsp;(TimeoutException&nbsp;e)&nbsp;{&nbsp;&nbsp;</=
span></span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 1=
0px !important;margin-top:8px;margin-right:0px !important;margin-=
bottom:0px !important;margin-left:40px;border-style:none none non=
e solid;border-left-width:3px;border-left-color:rgb(108, 226, 108=
);list-style:decimal outside;background-color:rgb(255, 255, 255);=
"><span style=3D"margin:0px;padding:0px;border:none;color:black;"=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thrownew&nbsp;IOException(&n=
bsp;<span class=3D"string" style=3D"margin:0px;padding:0px;border=
:none;color:blue;">"Timed&nbsp;out&nbsp;waiting&nbsp;for&nbsp;for=
mat()&nbsp;response"</span><span style=3D"margin:0px;padding:0px;=
border:none;color:black;">);&nbsp;&nbsp;</span></span></li><li st=
yle=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-=
right:0px !important;margin-bottom:0px !important;margin-left:40p=
x;border-style:none none none solid;border-left-width:3px;border-=
left-color:rgb(108, 226, 108);list-style:decimal outside;color:rg=
b(92, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;}&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"padd=
ing:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !=
important;margin-bottom:0px !important;margin-left:40px;border-st=
yle:none none none solid;border-left-width:3px;border-left-color:=
rgb(108, 226, 108);list-style:decimal outside;background-color:rg=
b(255, 255, 255);"><span style=3D"margin:0px;padding:0px;border:n=
one;color:black;">&nbsp;&nbsp;&nbsp;</span></li><li style=3D"padd=
ing:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !=
important;margin-bottom:0px !important;margin-left:40px;border-st=
yle:none none none solid;border-left-width:3px;border-left-color:=
rgb(108, 226, 108);list-style:decimal outside;color:rgb(92, 92, 9=
2);background-color:rgb(248, 248, 248);"><span style=3D"margin:0p=
x;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<=
span class=3D"keyword" style=3D"margin:0px;padding:0px;border:non=
e;color:rgb(0, 102, 153);font-weight:bold;">if</span><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">(call.countExce=
ptions()&nbsp;&gt;&nbsp;</span><span class=3D"number" style=3D"ma=
rgin:0px;padding:0px;border:none;color:rgb(192, 0, 0);">0</span><=
span style=3D"margin:0px;padding:0px;border:none;color:black;">)&=
nbsp;{&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"p=
adding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0p=
x !important;margin-bottom:0px !important;margin-left:40px;border=
-style:none none none solid;border-left-width:3px;border-left-col=
or:rgb(108, 226, 108);list-style:decimal outside;background-color=
:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;borde=
r:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call.ret=
hrowException(<span class=3D"string" style=3D"margin:0px;padding:=
0px;border:none;color:blue;">"Could&nbsp;not&nbsp;format&nbsp;one=
&nbsp;or&nbsp;more&nbsp;JournalNodes"</span><span style=3D"margin=
:0px;padding:0px;border:none;color:black;">);&nbsp;&nbsp;</span><=
/span></li><li style=3D"padding:0px 3px 0px 10px !important;margi=
n-top:8px;margin-right:0px !important;margin-bottom:0px !importan=
t;margin-left:40px;border-style:none none none solid;border-left-=
width:3px;border-left-color:rgb(108, 226, 108);list-style:decimal=
 outside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 248=
);"><span style=3D"margin:0px;padding:0px;border:none;color:black=
;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=3D"=
alt" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;=
margin-right:0px !important;margin-bottom:0px !important;margin-l=
eft:40px;border-style:none none none solid;border-left-width:3px;=
border-left-color:rgb(108, 226, 108);list-style:decimal outside;b=
ackground-color:rgb(255, 255, 255);"><span style=3D"margin:0px;pa=
dding:0px;border:none;color:black;">&nbsp;&nbsp;}&nbsp;&nbsp;</sp=
an></li></ol></div></div></div><p style=3D"padding:0px;margin:0px=
 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:400;te=
xt-align:justify;">=D5=E2=C0=EF=BE=CD=C9=E6=BC=B0=B5=BDQJM=B5=C4=BA=
=CB=D0=C4=D4=AD=C0=EDPaxos=CB=E3=B7=A8=C1=CB=A1=A3=B9=D8=D3=DA=D5=
=E2=B8=F6=CB=E3=B7=A8=B5=C4=D4=AD=C0=ED=B4=F3=BC=D2=BF=C9=B2=CE=BF=
=BCwikipedia=A3=AC=BC=F2=B5=A5=CB=B5=BE=CD=CA=C7<span style=3D"co=
lor:rgb(255, 0, 0);">Active NN=B0=D1=C8=D5=D6=BE=D0=B4=B5=BD2N+1=B8=
=F6JournalNode=C9=CF=A3=AC=C3=BF=B4=CE=D0=B4=C8=D5=D6=BE=B5=C4=B2=
=D9=D7=F7=D6=BB=D2=AA=C6=E4=D6=D0a quorum of JNs(=BC=B4=B4=F3=B6=E0=
=CA=FD=A3=AC=B4=F3=D3=DA=B5=C8=D3=DAN+1=CC=A8JN)=B7=B5=BB=D8=B3=C9=
=B9=A6=BC=B4=C8=CF=CE=AA=D5=E2=B4=CE=B2=D9=D7=F7=CA=C7=B3=C9=B9=A6=
=B5=C4</span>=A1=A3=B5=AB=CA=C7=D5=E2=B8=F6format=B2=D9=D7=F7=CA=C7=
=B1=C8=BD=CF=CC=D8=CA=E2=B5=C4=A3=AC=D2=AA=C7=F3=CB=F9=D3=D0=B5=C4=
JN=B7=B5=BB=D8=B6=BC=CA=C7=B3=C9=B9=A6=B5=C4=B2=C5=D0=D0=A3=AC=D2=
=F2=CE=AA=CB=FC=CF=E0=B5=B1=D3=DA=CA=C7=D7=F6=C1=CB=B8=F6=B3=F5=CA=
=BC=BB=AF=B5=C4=B9=A4=D7=F7=A1=A3=D4=DA=BA=F3=C3=E6=B5=C4=D0=B4=CA=
=FD=BE=DD=B5=C4=B9=FD=B3=CC=D6=D0=A3=AC=D6=BB=D2=AA=B4=F3=B6=E0=CA=
=FDsuccess response=BE=CD=C8=CF=CE=AA=D5=E2=B4=CE=D0=B4=B3=C9=B9=A6=
=C1=CB=A1=A3</p><p style=3D"padding:0px;margin:0px 0px 16px;font-=
size:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justif=
y;">QuorumCall=D5=E2=B8=F6=C0=E0=B0=FC=D7=B0=C1=CB=D5=FB=B8=F6=D2=
=EC=B2=BD=B5=F7=D3=C3=B5=C4=B9=FD=B3=CC=A3=BA=C3=BF=B4=CEQuorumJo=
urnalManager=B6=D4=CF=F3=CF=F22N+1=CC=A8JN=B7=A2=CB=CD=D0=B4=C8=D5=
=D6=BE=C7=EB=C7=F3=B6=BC=CA=C7=D2=EC=B2=BD=B5=C4=A3=AC=B7=A2=B3=F6=
=D6=AE=BA=F3=B2=BB=CA=C7=CD=AC=B2=BD=B5=C8=B4=FD=C3=BF=B8=F6JN=B5=
=C4=B7=B5=BB=D8=D6=B5=A3=AC=B6=F8=CA=C7=D7=A2=B2=E1=D2=BB=B8=F6ca=
llback=BA=AF=CA=FD=A3=AC=C3=BF=B5=B1=D3=D0=D2=BB=B8=F6=B7=B5=BB=D8=
=A3=AC=BE=CD=B0=D1response=BC=C6=CA=FD=BC=D31=A3=A8=C8=E7=B9=FB=B7=
=B5=BB=D8=CA=C7success=A3=AC=B0=D1success=BC=C6=CA=FD=BC=D31=A3=BB=
=C8=E7=B9=FB=B7=B5=BB=D8=CA=C7failure=A3=AC=B0=D1failure=BC=C6=CA=
=FD=BC=D31=A3=A9=A1=A3=D5=E2=D1=F9QuorumJournalManager=D5=E2=B6=CB=
=D6=BB=D0=E8=D2=AA=B7=A2=B3=F6=C8=A5=C7=EB=C7=F3=A3=AC=C8=BB=BA=F3=
=D1=AD=BB=B7=BC=EC=B2=E2=CA=B1=BA=F2=D3=D0=D7=E3=B9=BB=B5=C4succe=
ss response=BB=F2=D5=DF=D7=E3=B9=BB=B5=C4exception=BB=F2=D5=DF=CA=
=C7time out=A1=A3</p><p style=3D"padding:0px;margin:0px 0px 16px;=
font-size:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:j=
ustify;"><span style=3D"color:rgb(255, 0, 0);">=C9=CF=C3=E6=D4=DA=
=B4=FA=C2=EB=D6=D0=CC=E1=B5=BD=C1=CBRPC=A3=ACQJM=B5=C4RPC=D6=F7=D2=
=AA=BE=CD=D2=BB=B8=F6=D0=AD=D2=E9=C0=E0=A3=BAQuorumJournalManager=
=D3=EB=B6=E0=B8=F6JournalNode=CD=A8=D0=C5=B5=C4=D0=AD=D2=E9QJourn=
alProtocol=A1=A3=C4=C7=C3=B4RPC=B5=C4=CD=A8=D0=C5=CB=AB=B7=BD=B5=C4=
=CA=B5=CC=E5=C0=E0=B7=D6=B1=F0=CA=C7=C4=C4=B8=F6=C4=D8=A3=BF=BF=CD=
=BB=A7=B6=CB=A3=A8QuorumJournalManager=A3=A9=CA=C7QJournalProtoco=
lTranslatorPB=A3=BB=B7=FE=CE=F1=C6=F7=B6=CB(JournalNode)=CA=C7Jou=
rnalNodeRpcServer=A1=A3</span></p><p style=3D"padding:0px;margin:=
0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:400=
;text-align:justify;">=BF=B4=BF=B4=D5=E2=B8=F6format=C3=FC=C1=EE=B5=
=BD=C1=CBJN=B6=CB=D7=F6=C1=CB=C4=C4=D0=A9=CA=C2=C7=E9=A3=BF</p><p=
 style=3D"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rg=
b(79, 79, 79);font-weight:400;text-align:justify;">=CF=C8=CA=C7=B8=
=F9=BE=DDjournalId=B4=B4=BD=A8=C1=CBJournal=B6=D4=CF=F3=A3=AC=C8=BB=
=BA=F3=B5=F7=D3=C3Journal.format()=A1=A3=BD=D3=CF=C2=C0=B4=BE=CD=CA=
=C7=B4=B4=BD=A8=B1=BE=B5=D8=B4=E6=B4=A2=C4=BF=C2=BC=A3=AC=B4=B4=BD=
=A8Journal=D4=AA=CA=FD=BE=DD=A3=AC=D0=B4=D4=AA=CA=FD=BE=DD=B5=BD=C4=
=BF=C2=BC=B5=C8=A1=A3=D3=C9=D3=DAJournalNode=B9=DC=C0=ED=B1=BE=B5=
=D8=B5=C4=CA=FD=BE=DD=B2=C9=D3=C3=B5=C4=CA=C7FileJournalManager=B6=
=D4=CF=F3=A3=AC=CB=F9=D2=D4=BA=F3=C3=E6=B5=C4=C2=DF=BC=AD=B8=FA=CA=
=B9=D3=C3FileJournalManager=B5=C4NN=BA=DC=CF=F1=C1=CB=A1=A3</p><h=
3 style=3D"padding:0px;margin:8px 0px 16px;font-size:1.375rem;col=
or:rgb(79, 79, 79);font-weight:700;"><a name=3D"t3" style=3D"colo=
r:rgb(78, 161, 219);text-decoration:none;"></a>4=A3=ACNN=B7=A2=C9=
=FA=D6=F7=B4=D3=C7=D0=BB=BB</h3><p style=3D"padding:0px;margin:0p=
x 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:400;t=
ext-align:justify;">=BD=D3=CF=C2=C0=B4=BE=CD=B8=C3=BF=B4=BF=B4=D2=
=BB=B8=F6Standby NN=D3=C9Standby=B1=E4=B3=C9Active=CA=B1=A3=AC=D0=
=E8=D2=AA=D6=B4=D0=D0=C4=C4=D0=A9=B2=D9=D7=F7=A3=BA</p><p style=3D=
"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79,=
 79);font-weight:400;text-align:justify;">1) fencing=D4=AD=C0=B4A=
ctive NN=B5=C4=D0=B4=A1=A3</p><p style=3D"padding:0px;margin:0px=20=
0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:400;tex=
t-align:justify;">2) recover in-progress logs=A1=A3=D4=AD=C0=B4Ac=
tive NN=D0=B4EditLog=B9=FD=B3=CC=D6=D0=B7=A2=C9=FA=C1=CB=D6=F7=B4=
=D3=C7=D0=BB=BB=A3=AC=C4=C7=C3=B4=B4=A6=D4=DA=B2=BB=CD=ACJournalN=
ode=C9=CF=B5=C4EditLog=B5=C4=CA=FD=BE=DD=BF=C9=C4=DC=B2=BB=D2=BB=D6=
=C2=A3=AC=D0=E8=D2=AA=B0=D1=B2=BB=CD=ACJournalNode=C9=CF=B5=C4Edi=
tLog=CD=AC=B2=BD=D2=BB=D6=C2=A3=AC=B2=A2=C7=D2finalized=A1=A3=A3=A8=
=D5=E2=B8=F6=B9=FD=B3=CC=C0=E0=CB=C6=D3=DAHDFS append=D6=D0=B5=C4=
recover lease=B5=C4=B9=FD=B3=CC=A3=A9</p><p style=3D"padding:0px;=
margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-wei=
ght:400;text-align:justify;">3) startLogSegment=A1=A3=B2=BB=D2=BB=
=D6=C2=B5=C4EditLog=B6=BC=CD=AC=B2=BD=D2=BB=D6=C2=C7=D2finalized=A3=
=AC=C4=C7=C3=B4=D4=AD=C0=B4=B5=C4Standby NN=D5=FD=CA=BD=D0=D0=CA=BB=
=D5=FD=B3=A3=B5=C4Active NN=B5=C4=D0=B4=C8=D5=D6=BE=B9=A6=C4=DC=A1=
=A3</p><p style=3D"padding:0px;margin:0px 0px 16px;font-size:1rem=
;color:rgb(79, 79, 79);font-weight:400;text-align:justify;">4) wr=
ite edits</p><p style=3D"padding:0px;margin:0px 0px 16px;font-siz=
e:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justify;"=
>5) finalizeLogSegment</p><h4 style=3D"padding:0px;margin:8px 0px=
 16px;font-size:1.25rem;color:rgb(79, 79, 79);font-weight:700;">4=
.1=A3=ACfencing=D4=AD=C0=B4Active NN=B5=C4=D0=B4</h4><p style=3D"=
padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79, 79,=20=
79);font-weight:400;text-align:justify;">=C7=B0=C3=E6=CB=B5=B9=FD=
=A3=AC=BB=F9=D3=DAQJM=B5=C4HA=B2=BB=D0=E8=D2=AA=B4=A6=C0=EDfencin=
g=CE=CA=CC=E2=A1=A3=D5=E2=CA=C7=D4=F5=C3=B4=D7=F6=B5=BD=B5=C4=C4=D8=
=A3=BF=BD=E2=BE=F6=D5=E2=B8=F6=CE=CA=CC=E2=BF=BF=B5=C4=CA=C7epoch=
 number=A3=AC=D5=E2=B8=F6=BA=CDPaxos=CB=E3=B7=A8=D6=D0=D1=A1=D6=F7=
=A3=A8master election=A3=A9=CB=F9=D7=F6=B5=C4=B9=A4=D7=F7=C0=E0=CB=
=C6=A1=A3</p><p style=3D"padding:0px;margin:0px 0px 16px;font-siz=
e:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justify;"=
>=B5=B1Active =BA=CDStandby NN =B7=A2=C9=FA=D6=F7=B4=D3=C7=D0=BB=BB=
=CA=B1=A3=AC=D4=AD=C0=B4=B5=C4Standby NN=D0=E8=D2=AA=D6=B4=D0=D0=A3=
=BA</p><p style=3D"padding:0px;margin:0px 0px 16px;font-size:1rem=
;color:rgb(79, 79, 79);font-weight:400;text-align:justify;">NameN=
ode.startActiveServices()-&gt;FSNamesystem.startActiveServices()-=
&gt;FSEditLog.recoverUnclosedStreams()-&gt;JournalSet.recoverUnfi=
nalizedSegments()-&gt;QourumJournalManager.recoverUnfinalizedSegm=
ent()=A1=A3=D5=E2=B8=F6=B9=FD=B3=CC=CB=B5=B0=D7=C1=CB=BE=CD=CA=C7=
=B8=F8=D4=AD=C0=B4=B5=C4Active NN=B2=C1=C6=A8=B9=C9=A3=AC=D2=B2=BF=
=C9=D2=D4=CB=E3=D7=F7=CA=C7Standby=D2=AA=BD=D3=B9=DCqjournal=D0=B4=
=C8=A8=C0=FB=B5=C4=BF=AA=CA=BC=A1=A3=D5=E2=C0=EF=C3=E6=BE=CD=B3=F6=
=CF=D6=C1=CB=CE=D2=C3=C7=CB=F9=CB=B5=B5=C4brain-split=B5=C4=CE=CA=
=CC=E2=A3=ACStandby NN=D4=F5=C3=B4=B1=A3=D6=A4=D4=AD=C0=B4=B5=C4A=
ctive NN=D2=D1=BE=AD=B2=BB=D4=D9=CD=F9qjournal=C9=CF=D0=B4=CA=FD=BE=
=DD=C1=CB=A1=A3=BF=B4=BF=B4QourumJournalManager.recoverUnfinalize=
dSegment()=CA=C7=D4=F5=C3=B4=CA=B5=CF=D6=B5=C4=A3=BA</p><div styl=
e=3D"padding:0px;margin:0px;"><div id=3D"highlighter_769588" clas=
s=3D"syntaxhighlighter java" style=3D"padding:0px;margin:0px;"><d=
iv class=3D"dp-highlighter bg_java" style=3D"padding:1px 0px 0px;=
margin:0px 0px 24px;font-family:Consolas, 'Courier New', Courier,=
 mono, serif;font-size:0.75rem;width:843.469px;text-align:left;ba=
ckground-color:rgb(231, 229, 220);"><div class=3D"bar" style=3D"p=
adding:0px 0px 0px 45px;margin:0px;"><div class=3D"tools" style=3D=
"padding:3px 8px 10px 10px;margin:0px;font-style:normal;font-weig=
ht:normal;font-size:0.563rem;font-family:Verdana, Geneva, Arial,=20=
Helvetica, sans-serif;color:silver;border-left-width:3px;border-l=
eft-style:solid;border-left-color:rgb(108, 226, 108);border-right=
-width:1px;border-right-style:solid;border-right-color:rgb(231, 2=
29, 220);background-color:rgb(248, 248, 248);"><b style=3D"font-w=
eight:bold;">[java]</b><span class=3D"Apple-converted-space">&nbs=
p;</span><a href=3D"https://blog.csdn.net/knowledgeaaa/article/de=
tails/23248999#" class=3D"ViewSource" title=3D"view plain" style=3D=
"color:rgb(103, 149, 181);text-decoration:none;border:none;paddin=
g:1px;margin:0px 10px 0px 0px;font-size:0.563rem;display:inline-b=
lock;width:16px;text-indent:-2000px;background-image:url(&quot;&q=
uot;);background-position:0% 0%;background-repeat:no-repeat;">vie=
w plain</a><span data-mod=3D"popu_168"><span class=3D"Apple-conve=
rted-space">&nbsp;</span><a href=3D"https://blog.csdn.net/knowled=
geaaa/article/details/23248999#" class=3D"CopyToClipboard" title=3D=
"copy" style=3D"color:rgb(103, 149, 181);text-decoration:none;bor=
der:none;padding:1px;margin:0px 10px 0px 0px;font-size:0.563rem;d=
isplay:inline-block;width:16px;text-indent:-2000px;background-ima=
ge:url(&quot;&quot;);background-position:0% 0%;background-repeat:=
no-repeat;">copy</a><div style=3D"padding:0px;margin:0px;width:16=
px;"><embed id=3D"ZeroClipboardMovie_5" src=3D"https://csdnimg.cn=
/public/highlighter/ZeroClipboard.swf" loop=3D"false" menu=3D"fal=
se" quality=3D"best" bgcolor=3D"#ffffff" width=3D"16" height=3D"1=
6" name=3D"ZeroClipboardMovie_5" align=3D"middle" allowscriptacce=
ss=3D"always" allowfullscreen=3D"false" type=3D"application/x-sho=
ckwave-flash" pluginspage=3D"http://www.macromedia.com/go/getflas=
hplayer" flashvars=3D"id=3D5&amp;width=3D16&amp;height=3D16" wmod=
e=3D"transparent" style></div><div style=3D"padding:0px;margin:0p=
x;width:16px;"><embed id=3D"ZeroClipboardMovie_11" src=3D"https:/=
/csdnimg.cn/public/highlighter/ZeroClipboard.swf" loop=3D"false"=20=
menu=3D"false" quality=3D"best" bgcolor=3D"#ffffff" width=3D"16"=20=
height=3D"16" name=3D"ZeroClipboardMovie_11" align=3D"middle" all=
owscriptaccess=3D"always" allowfullscreen=3D"false" type=3D"appli=
cation/x-shockwave-flash" pluginspage=3D"http://www.macromedia.co=
m/go/getflashplayer" flashvars=3D"id=3D11&amp;width=3D16&amp;heig=
ht=3D16" wmode=3D"transparent" style></div></span><span data-mod=3D=
"popu_169"></span></div></div><ol class=3D"dp-j wiz-list-level1"=20=
style=3D"padding:0px;margin:0px 0px 24px;list-style:decimal;borde=
r-style:none solid none none;border-right-width:1px;border-right-=
color:rgb(231, 229, 220);color:rgb(92, 92, 92);background-color:r=
gb(255, 255, 255);"><li class=3D"alt" style=3D"padding:0px 3px 0p=
x 10px !important;margin-top:8px;margin-right:0px !important;marg=
in-bottom:0px !important;margin-left:40px;border-style:none none=20=
none solid;border-left-width:3px;border-left-color:rgb(108, 226,=20=
108);list-style:decimal outside;background-color:rgb(255, 255, 25=
5);"><span style=3D"margin:0px;padding:0px;border:none;color:blac=
k;"><span class=3D"keyword" style=3D"margin:0px;padding:0px;borde=
r:none;color:rgb(0, 102, 153);font-weight:bold;">public</span><sp=
an style=3D"margin:0px;padding:0px;border:none;color:black;">&nbs=
p;</span><span class=3D"keyword" style=3D"margin:0px;padding:0px;=
border:none;color:rgb(0, 102, 153);font-weight:bold;">void</span>=
<span style=3D"margin:0px;padding:0px;border:none;color:black;">&=
nbsp;recoverUnfinalizedSegments()&nbsp;throwsIOException&nbsp;{&n=
bsp;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10p=
x !important;margin-top:8px;margin-right:0px !important;margin-bo=
ttom:0px !important;margin-left:40px;border-style:none none none=20=
solid;border-left-width:3px;border-left-color:rgb(108, 226, 108);=
list-style:decimal outside;color:rgb(92, 92, 92);background-color=
:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;borde=
r:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;Preconditions.checkS=
tate(!isActiveWriter,<span class=3D"string" style=3D"margin:0px;p=
adding:0px;border:none;color:blue;">"already&nbsp;active&nbsp;wri=
ter"</span><span style=3D"margin:0px;padding:0px;border:none;colo=
r:black;">);&nbsp;&nbsp;</span></span></li><li class=3D"alt" styl=
e=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-ri=
ght:0px !important;margin-bottom:0px !important;margin-left:40px;=
border-style:none none none solid;border-left-width:3px;border-le=
ft-color:rgb(108, 226, 108);list-style:decimal outside;background=
-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px=
;border:none;color:black;">&nbsp;&nbsp;&nbsp;</span></li><li styl=
e=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-ri=
ght:0px !important;margin-bottom:0px !important;margin-left:40px;=
border-style:none none none solid;border-left-width:3px;border-le=
ft-color:rgb(108, 226, 108);list-style:decimal outside;color:rgb(=
92, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D"=
margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbs=
p;&nbsp;LOG.info(<span class=3D"string" style=3D"margin:0px;paddi=
ng:0px;border:none;color:blue;">"Starting&nbsp;recovery&nbsp;proc=
ess&nbsp;for&nbsp;unclosed&nbsp;journal&nbsp;segments..."</span><=
span style=3D"margin:0px;padding:0px;border:none;color:black;">);=
&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"padding=
:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !imp=
ortant;margin-bottom:0px !important;margin-left:40px;border-style=
:none none none solid;border-left-width:3px;border-left-color:rgb=
(108, 226, 108);list-style:decimal outside;background-color:rgb(2=
55, 255, 255);"><span style=3D"margin:0px;padding:0px;border:none=
;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" st=
yle=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);">=
//=D5=E2=BE=E4=BB=B0=BD=E2=BE=F6=C1=CBbrain-split=CE=CA=CC=E2=A3=AC=
=D2=B2=BE=CD=CA=C7fencing&nbsp;writer</span><span style=3D"margin=
:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span></s=
pan></li><li style=3D"padding:0px 3px 0px 10px !important;margin-=
top:8px;margin-right:0px !important;margin-bottom:0px !important;=
margin-left:40px;border-style:none none none solid;border-left-wi=
dth:3px;border-left-color:rgb(108, 226, 108);list-style:decimal o=
utside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);=
"><span style=3D"margin:0px;padding:0px;border:none;color:black;"=
>&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;AsyncLogger,&nbsp;NewEpochRespons=
eProto&gt;&nbsp;resps&nbsp;=3D&nbsp;createNewUniqueEpoch();&nbsp;=
&nbsp;</span></li><li class=3D"alt" style=3D"padding:0px 3px 0px=20=
10px !important;margin-top:8px;margin-right:0px !important;margin=
-bottom:0px !important;margin-left:40px;border-style:none none no=
ne solid;border-left-width:3px;border-left-color:rgb(108, 226, 10=
8);list-style:decimal outside;background-color:rgb(255, 255, 255)=
;"><span style=3D"margin:0px;padding:0px;border:none;color:black;=
">&nbsp;&nbsp;&nbsp;&nbsp;LOG.info(<span class=3D"string" style=3D=
"margin:0px;padding:0px;border:none;color:blue;">"Successfully&nb=
sp;started&nbsp;new&nbsp;epoch&nbsp;"</span><span style=3D"margin=
:0px;padding:0px;border:none;color:black;">+&nbsp;loggers.getEpoc=
h());&nbsp;&nbsp;</span></span></li><li style=3D"padding:0px 3px=20=
0px 10px !important;margin-top:8px;margin-right:0px !important;ma=
rgin-bottom:0px !important;margin-left:40px;border-style:none non=
e none solid;border-left-width:3px;border-left-color:rgb(108, 226=
, 108);list-style:decimal outside;color:rgb(92, 92, 92);backgroun=
d-color:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0p=
x;border:none;color:black;">&nbsp;&nbsp;&nbsp;</span></li><li cla=
ss=3D"alt" style=3D"padding:0px 3px 0px 10px !important;margin-to=
p:8px;margin-right:0px !important;margin-bottom:0px !important;ma=
rgin-left:40px;border-style:none none none solid;border-left-widt=
h:3px;border-left-color:rgb(108, 226, 108);list-style:decimal out=
side;background-color:rgb(255, 255, 255);"><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp=
;<span class=3D"keyword" style=3D"margin:0px;padding:0px;border:n=
one;color:rgb(0, 102, 153);font-weight:bold;">if</span><span styl=
e=3D"margin:0px;padding:0px;border:none;color:black;">(LOG.isDebu=
gEnabled())&nbsp;{&nbsp;&nbsp;</span></span></li><li style=3D"pad=
ding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px=20=
!important;margin-bottom:0px !important;margin-left:40px;border-s=
tyle:none none none solid;border-left-width:3px;border-left-color=
:rgb(108, 226, 108);list-style:decimal outside;color:rgb(92, 92,=20=
92);background-color:rgb(248, 248, 248);"><span style=3D"margin:0=
px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;LOG.debug(<span class=3D"string" style=3D"margin:0px;=
padding:0px;border:none;color:blue;">"newEpoch("</span><span styl=
e=3D"margin:0px;padding:0px;border:none;color:black;">+&nbsp;logg=
ers.getEpoch()&nbsp;+&nbsp;</span><span class=3D"string" style=3D=
"margin:0px;padding:0px;border:none;color:blue;">")&nbsp;response=
s:\n"</span><span style=3D"margin:0px;padding:0px;border:none;col=
or:black;">+&nbsp;&nbsp;</span></span></li><li class=3D"alt" styl=
e=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-ri=
ght:0px !important;margin-bottom:0px !important;margin-left:40px;=
border-style:none none none solid;border-left-width:3px;border-le=
ft-color:rgb(108, 226, 108);list-style:decimal outside;background=
-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px=
;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;QuorumCall.mapToString(resps));&nbsp;&nbsp;</span></li>=
<li style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;m=
argin-right:0px !important;margin-bottom:0px !important;margin-le=
ft:40px;border-style:none none none solid;border-left-width:3px;b=
order-left-color:rgb(108, 226, 108);list-style:decimal outside;co=
lor:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><span s=
tyle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&n=
bsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;background-col=
or:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"com=
ment" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 13=
0, 0);">//=D5=D2=B3=F6=D7=EE=BA=F3=D2=BB=BF=E9edit&nbsp;log&nbsp;=
segment=A3=AC=D2=F2=CE=AA=D6=BB=D3=D0=D7=EE=BA=F3=D2=BB=BF=E9=D3=D0=
=BF=C9=C4=DC=CA=C7=B2=BB=CD=EA=D5=FB=B5=C4=A1=A3</span><span styl=
e=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp=
;</span></span></li><li style=3D"padding:0px 3px 0px 10px !import=
ant;margin-top:8px;margin-right:0px !important;margin-bottom:0px=20=
!important;margin-left:40px;border-style:none none none solid;bor=
der-left-width:3px;border-left-color:rgb(108, 226, 108);list-styl=
e:decimal outside;color:rgb(92, 92, 92);background-color:rgb(248,=
 248, 248);"><span style=3D"margin:0px;padding:0px;border:none;co=
lor:black;">&nbsp;&nbsp;&nbsp;&nbsp;longmostRecentSegmentTxId&nbs=
p;=3D&nbsp;Long.MIN_VALUE;&nbsp;&nbsp;</span></li><li class=3D"al=
t" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;ma=
rgin-right:0px !important;margin-bottom:0px !important;margin-lef=
t:40px;border-style:none none none solid;border-left-width:3px;bo=
rder-left-color:rgb(108, 226, 108);list-style:decimal outside;bac=
kground-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padd=
ing:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span c=
lass=3D"keyword" style=3D"margin:0px;padding:0px;border:none;colo=
r:rgb(0, 102, 153);font-weight:bold;">for</span><span style=3D"ma=
rgin:0px;padding:0px;border:none;color:black;">(NewEpochResponseP=
roto&nbsp;r&nbsp;:&nbsp;resps.values())&nbsp;{&nbsp;&nbsp;</span>=
</span></li><li style=3D"padding:0px 3px 0px 10px !important;marg=
in-top:8px;margin-right:0px !important;margin-bottom:0px !importa=
nt;margin-left:40px;border-style:none none none solid;border-left=
-width:3px;border-left-color:rgb(108, 226, 108);list-style:decima=
l outside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 24=
8);"><span style=3D"margin:0px;padding:0px;border:none;color:blac=
k;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword" s=
tyle=3D"margin:0px;padding:0px;border:none;color:rgb(0, 102, 153)=
;font-weight:bold;">if</span><span style=3D"margin:0px;padding:0p=
x;border:none;color:black;">(r.hasLastSegmentTxId())&nbsp;{&nbsp;=
&nbsp;</span></span></li><li class=3D"alt" style=3D"padding:0px 3=
px 0px 10px !important;margin-top:8px;margin-right:0px !important=
;margin-bottom:0px !important;margin-left:40px;border-style:none=20=
none none solid;border-left-width:3px;border-left-color:rgb(108,=20=
226, 108);list-style:decimal outside;background-color:rgb(255, 25=
5, 255);"><span style=3D"margin:0px;padding:0px;border:none;color=
:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mostRece=
ntSegmentTxId&nbsp;=3D&nbsp;Math.max(mostRecentSegmentTxId,&nbsp;=
&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px !importan=
t;margin-top:8px;margin-right:0px !important;margin-bottom:0px !i=
mportant;margin-left:40px;border-style:none none none solid;borde=
r-left-width:3px;border-left-color:rgb(108, 226, 108);list-style:=
decimal outside;color:rgb(92, 92, 92);background-color:rgb(248, 2=
48, 248);"><span style=3D"margin:0px;padding:0px;border:none;colo=
r:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;r.getLastSegmentTxId());&nbsp;&nbsp;</span></li>=
<li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;ma=
rgin-top:8px;margin-right:0px !important;margin-bottom:0px !impor=
tant;margin-left:40px;border-style:none none none solid;border-le=
ft-width:3px;border-left-color:rgb(108, 226, 108);list-style:deci=
mal outside;background-color:rgb(255, 255, 255);"><span style=3D"=
margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=3D"padding=
:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !imp=
ortant;margin-bottom:0px !important;margin-left:40px;border-style=
:none none none solid;border-left-width:3px;border-left-color:rgb=
(108, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);=
background-color:rgb(248, 248, 248);"><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;}&nb=
sp;&nbsp;</span></li><li class=3D"alt" style=3D"padding:0px 3px 0=
px 10px !important;margin-top:8px;margin-right:0px !important;mar=
gin-bottom:0px !important;margin-left:40px;border-style:none none=
 none solid;border-left-width:3px;border-left-color:rgb(108, 226,=
 108);list-style:decimal outside;background-color:rgb(255, 255, 2=
55);"><span style=3D"margin:0px;padding:0px;border:none;color:bla=
ck;">&nbsp;&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0=
px 10px !important;margin-top:8px;margin-right:0px !important;mar=
gin-bottom:0px !important;margin-left:40px;border-style:none none=
 none solid;border-left-width:3px;border-left-color:rgb(108, 226,=
 108);list-style:decimal outside;color:rgb(92, 92, 92);background=
-color:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px=
;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"comment" style=3D"margin:0px;padding:0px;border:none;color:rgb(0=
, 130, 0);">//&nbsp;On&nbsp;a&nbsp;completely&nbsp;fresh&nbsp;sys=
tem,&nbsp;none&nbsp;of&nbsp;the&nbsp;journals&nbsp;have&nbsp;any<=
/span><span style=3D"margin:0px;padding:0px;border:none;color:bla=
ck;">&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"pa=
dding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px=
 !important;margin-bottom:0px !important;margin-left:40px;border-=
style:none none none solid;border-left-width:3px;border-left-colo=
r:rgb(108, 226, 108);list-style:decimal outside;background-color:=
rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;border=
:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"commen=
t" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130,=20=
0);">//&nbsp;segments,&nbsp;so&nbsp;there's&nbsp;nothing&nbsp;to&=
nbsp;recover.</span><span style=3D"margin:0px;padding:0px;border:=
none;color:black;">&nbsp;&nbsp;</span></span></li><li style=3D"pa=
dding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px=
 !important;margin-bottom:0px !important;margin-left:40px;border-=
style:none none none solid;border-left-width:3px;border-left-colo=
r:rgb(108, 226, 108);list-style:decimal outside;color:rgb(92, 92,=
 92);background-color:rgb(248, 248, 248);"><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp=
;<span class=3D"keyword" style=3D"margin:0px;padding:0px;border:n=
one;color:rgb(0, 102, 153);font-weight:bold;">if</span><span styl=
e=3D"margin:0px;padding:0px;border:none;color:black;">(mostRecent=
SegmentTxId&nbsp;!=3D&nbsp;Long.MIN_VALUE)&nbsp;{&nbsp;&nbsp;</sp=
an></span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10p=
x !important;margin-top:8px;margin-right:0px !important;margin-bo=
ttom:0px !important;margin-left:40px;border-style:none none none=20=
solid;border-left-width:3px;border-left-color:rgb(108, 226, 108);=
list-style:decimal outside;background-color:rgb(255, 255, 255);">=
<span style=3D"margin:0px;padding:0px;border:none;color:black;">&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D=
"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);">//=B0=D1=
=B2=BB=CD=EA=D5=FB=B5=C4log&nbsp;segment=BB=D6=B8=B4=CD=EA=D5=FB=A3=
=AC=D5=E2=B8=F6=B9=FD=B3=CC=D4=DA=BA=F3=C3=E6=BB=E1=BE=DF=CC=E5=BD=
=B2</span><span style=3D"margin:0px;padding:0px;border:none;color=
:black;">&nbsp;&nbsp;</span></span></li><li style=3D"padding:0px=20=
3px 0px 10px !important;margin-top:8px;margin-right:0px !importan=
t;margin-bottom:0px !important;margin-left:40px;border-style:none=
 none none solid;border-left-width:3px;border-left-color:rgb(108,=
 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);backg=
round-color:rgb(248, 248, 248);"><span style=3D"margin:0px;paddin=
g:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;recoverUnclosedSegment(mostRecentSegmentTxId);&nbsp;&nbsp;</sp=
an></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !impo=
rtant;margin-top:8px;margin-right:0px !important;margin-bottom:0p=
x !important;margin-left:40px;border-style:none none none solid;b=
order-left-width:3px;border-left-color:rgb(108, 226, 108);list-st=
yle:decimal outside;background-color:rgb(255, 255, 255);"><span s=
tyle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&n=
bsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=3D"padding:0px=
 3px 0px 10px !important;margin-top:8px;margin-right:0px !importa=
nt;margin-bottom:0px !important;margin-left:40px;border-style:non=
e none none solid;border-left-width:3px;border-left-color:rgb(108=
, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);back=
ground-color:rgb(248, 248, 248);"><span style=3D"margin:0px;paddi=
ng:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;isActive=
Writer&nbsp;=3D<span class=3D"keyword" style=3D"margin:0px;paddin=
g:0px;border:none;color:rgb(0, 102, 153);font-weight:bold;">true<=
/span><span style=3D"margin:0px;padding:0px;border:none;color:bla=
ck;">;&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"p=
adding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0p=
x !important;margin-bottom:0px !important;margin-left:40px;border=
-style:none none none solid;border-left-width:3px;border-left-col=
or:rgb(108, 226, 108);list-style:decimal outside;background-color=
:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;borde=
r:none;color:black;">&nbsp;&nbsp;}&nbsp;&nbsp;</span></li></ol></=
div></div></div><p style=3D"padding:0px;margin:0px 0px 16px;font-=
size:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justif=
y;">Epoch=BD=E2=BE=F6=C1=CB=CE=D2=C3=C7=CB=F9=CB=B5=B5=C4=CE=CA=CC=
=E2=A3=ACStandby NN=CF=F2=C3=BF=B8=F6JournalNode=B7=A2=CB=CDgetJo=
urnalState RPC=C7=EB=C7=F3=A3=ACJN=B7=B5=BB=D8=D7=D4=BC=BA=B5=C4l=
astPromisedEpoch=A1=A3QuorumJournalManager=CA=D5=B5=BD=B4=F3=B6=E0=
=CA=FDJN=B7=B5=BB=D8=B5=C4lastPromisedEpoch=A3=AC=D4=DA=C6=E4=D6=D0=
=D1=A1=D4=F1=D7=EE=B4=F3=B5=C4=D2=BB=B8=F6=A3=AC=C8=BB=BA=F3=BC=D3=
1=D7=F7=CE=AA=B5=B1=C7=B0QJM=B5=C4epoch=A3=AC=CD=AC=CA=B1=CD=A8=B9=
=FD=B7=A2=CB=CDnewEpoch RPC=B0=D1=D5=E2=B8=F6=D0=C2=B5=C4epoch=D0=
=B4=B5=BDqjournal=C9=CF=A1=A3=D2=F2=CE=AA=D4=DA=D5=E2=D6=AE=BA=F3=
=C3=BF=B4=CEQuorumJournalManager=D4=DA=CF=F2qjournal=D6=B4=D0=D0=D0=
=B4=CF=E0=B9=D8=B2=D9=D7=F7=A3=A8startLogSegment(),logEdits(),fin=
alizedLogSegment()=B5=C8=A3=A9=B5=C4=CA=B1=BA=F2=A3=AC=B6=BC=D2=AA=
=B0=D1=D7=D4=BC=BA=B5=C4epoch=D7=F7=CE=AA=B2=CE=CA=FD=B4=AB=B5=DD=
=B9=FD=C8=A5=A3=AC=D0=B4=CF=E0=B9=D8=B2=D9=D7=F7=B5=BD=B4=EF=C3=BF=
=B8=F6JournalNode=B6=CB=BB=E1=B1=C8=BD=CF=C8=E7=B9=FB=B4=AB=B9=FD=
=C0=B4=B5=C4epoch=C8=E7=B9=FB=D0=A1=D3=DAJournalNode=B6=CB=B4=E6=B4=
=A2=B5=C4lastPromisedEpoch=A3=AC=C4=C7=C3=B4=D5=E2=B4=CE=D0=B4=CF=
=E0=B9=D8=B2=D9=D7=F7=BB=E1=B1=BB=BE=DC=BE=F8=A1=A3=C8=E7=B9=FB=B4=
=F3=B6=E0=CA=FDJournalNode=B6=BC=BE=DC=BE=F8=C1=CB=D5=E2=B4=CE=D0=
=B4=CF=E0=B9=D8=B2=D9=D7=F7=A3=AC=D5=E2=B4=CE=B2=D9=D7=F7=BE=CD=CA=
=A7=B0=DC=C1=CB=A1=A3=BB=D8=B5=BD=CE=D2=C3=C7=C4=BF=C7=B0=B5=C4=C2=
=DF=BC=AD=D6=D0=A3=AC=D4=DA=D6=F7=B4=D3=C7=D0=BB=BB=CA=B1=A3=AC=D4=
=AD=C0=B4=B5=C4Standby NN=B0=D1epoch+1=C1=CB=D6=AE=BA=F3=A3=AC=D4=
=AD=C0=B4=B5=C4Active NN=B5=C4epoch=BE=CD=BF=CF=B6=A8=B1=C8=D5=E2=
=B8=F6=D0=A1=C1=CB=A3=AC=C4=C7=C3=B4=C8=E7=B9=FB=CB=FC=D4=D9=CF=F2=
qjournal=D0=B4=C8=D5=D6=BE=BE=CD=BB=E1=B1=BB=BE=DC=BE=F8=A1=A3=D2=
=F2=CE=AAqjournal=B2=BB=BD=D3=CA=D5=B1=C8lastPromisedEpoch=D0=A1=B5=
=C4QJM=D0=B4=C8=D5=D6=BE=A1=A3</p><p style=3D"padding:0px;margin:=
0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:400=
;text-align:justify;">=BF=B4=BF=B4JN=CA=D5=B5=BDnewEpoch RPC=D6=AE=
=BA=F3=D4=F5=C3=B4=B0=EC=A3=BAJN=BC=EC=B2=E9=C0=B4=D7=D4QJM=B5=C4=
=D5=E2=B8=F6epoch=BA=CD=D7=D4=BC=BA=B4=E6=B4=A2=B5=C4lastPromised=
Epoch=A3=BA=C8=E7=B9=FB=C0=B4=D7=D4writer=B5=C4epoch=D0=A1=D3=DAl=
astPromisedEpoch=A3=AC=C4=C7=C3=B4=CB=B5=C3=F7=B2=BB=D4=CA=D0=ED=D5=
=E2=B8=F6writer=CF=F2JNs=D0=B4=CA=FD=BE=DD=C1=CB=A3=AC=C5=D7=B3=F6=
=D2=EC=B3=A3=A3=ACwriter=B6=CB=CA=D5=B5=BD=D2=EC=B3=A3response=A3=
=AC=C4=C7=C3=B4=B4=EF=B2=BB=B5=BD=B4=F3=B6=E0=CA=FD=B5=C4success=20=
response=A3=AC=BE=CD=B2=BB=BB=E1=D3=D0=D0=B4qjournal=B5=C4=C8=A8=CF=
=DE=C1=CB=A1=A3=A3=A8=C6=E4=CA=B5=D5=E2=B8=F6=B9=FD=B3=CC=BE=CD=CA=
=C7Paxos=CB=E3=B7=A8=C0=EF=C3=E6=D1=A1=D6=F7=B5=C4=B9=FD=B3=CC=A3=
=A9</p><h4 style=3D"padding:0px;margin:8px 0px 16px;font-size:1.2=
5rem;color:rgb(79, 79, 79);font-weight:700;">4.2 recover in-progr=
ess logs</h4><p style=3D"padding:0px;margin:0px 0px 16px;font-siz=
e:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justify;"=
>=BD=D3=D7=C5=C9=CF=C3=E6=B5=C4=B4=FA=C2=EB=A3=ACStandby=D2=D1=BE=
=AD=CD=A8=B9=FDcreateNewUniqueEpoch()=C0=B4fencing=D4=AD=C0=B4=B5=
=C4Active=A3=AC=D5=E2=B8=F6RPC=C7=EB=C7=F3=B3=FD=C1=CB=BB=E1=B7=B5=
=BB=D8epoch=A3=AC=BB=B9=BB=E1=B7=B5=BB=D8=D7=EE=BA=F3=D2=BB=B8=F6=
log segment=B5=C4txid=A1=A3=D2=F2=CE=AA=D6=BB=D3=D0=D7=EE=BA=F3=D2=
=BB=B8=F6log segment=BF=C9=C4=DC=D0=E8=D2=AA=BB=D6=B8=B4=A1=A3=D5=
=E2=B8=F6recover=CB=E3=B7=A8=BE=CD=CA=C7Paxos=CB=E3=B7=A8=B5=C4=D2=
=BB=B8=F6=CA=B5=C0=FD(instance)=A3=AC=C4=BF=B5=C4=CA=C7=CA=B9=B5=C3=
=B7=D6=B2=BC=D4=DA=B2=BB=CD=ACJN=C9=CF=B5=C4log segment=B5=C4=CA=FD=
=BE=DD=B4=EF=B3=C9=D2=BB=D6=C2=A1=A3</p><p style=3D"padding:0px;m=
argin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weig=
ht:400;text-align:justify;">=BD=D3=CF=C2=C0=B4=BE=CD=BF=AA=CA=BCr=
ecoverUnclosedSegment()=BB=D6=B8=B4=CB=E3=B7=A8</p><div style=3D"=
padding:0px;margin:0px;"><div id=3D"highlighter_304766" class=3D"=
syntaxhighlighter java" style=3D"padding:0px;margin:0px;"><div cl=
ass=3D"dp-highlighter bg_java" style=3D"padding:1px 0px 0px;margi=
n:0px 0px 24px;font-family:Consolas, 'Courier New', Courier, mono=
, serif;font-size:0.75rem;width:843.469px;text-align:left;backgro=
und-color:rgb(231, 229, 220);"><div class=3D"bar" style=3D"paddin=
g:0px 0px 0px 45px;margin:0px;"><div class=3D"tools" style=3D"pad=
ding:3px 8px 10px 10px;margin:0px;font-style:normal;font-weight:n=
ormal;font-size:0.563rem;font-family:Verdana, Geneva, Arial, Helv=
etica, sans-serif;color:silver;border-left-width:3px;border-left-=
style:solid;border-left-color:rgb(108, 226, 108);border-right-wid=
th:1px;border-right-style:solid;border-right-color:rgb(231, 229,=20=
220);background-color:rgb(248, 248, 248);"><b style=3D"font-weigh=
t:bold;">[java]</b><span class=3D"Apple-converted-space">&nbsp;</=
span><a href=3D"https://blog.csdn.net/knowledgeaaa/article/detail=
s/23248999#" class=3D"ViewSource" title=3D"view plain" style=3D"c=
olor:rgb(103, 149, 181);text-decoration:none;border:none;padding:=
1px;margin:0px 10px 0px 0px;font-size:0.563rem;display:inline-blo=
ck;width:16px;text-indent:-2000px;background-image:url(&quot;&quo=
t;);background-position:0% 0%;background-repeat:no-repeat;">view=20=
plain</a><span data-mod=3D"popu_168"><span class=3D"Apple-convert=
ed-space">&nbsp;</span><a href=3D"https://blog.csdn.net/knowledge=
aaa/article/details/23248999#" class=3D"CopyToClipboard" title=3D=
"copy" style=3D"color:rgb(103, 149, 181);text-decoration:none;bor=
der:none;padding:1px;margin:0px 10px 0px 0px;font-size:0.563rem;d=
isplay:inline-block;width:16px;text-indent:-2000px;background-ima=
ge:url(&quot;&quot;);background-position:0% 0%;background-repeat:=
no-repeat;">copy</a><div style=3D"padding:0px;margin:0px;width:16=
px;"><embed id=3D"ZeroClipboardMovie_6" src=3D"https://csdnimg.cn=
/public/highlighter/ZeroClipboard.swf" loop=3D"false" menu=3D"fal=
se" quality=3D"best" bgcolor=3D"#ffffff" width=3D"16" height=3D"1=
6" name=3D"ZeroClipboardMovie_6" align=3D"middle" allowscriptacce=
ss=3D"always" allowfullscreen=3D"false" type=3D"application/x-sho=
ckwave-flash" pluginspage=3D"http://www.macromedia.com/go/getflas=
hplayer" flashvars=3D"id=3D6&amp;width=3D16&amp;height=3D16" wmod=
e=3D"transparent" style></div><div style=3D"padding:0px;margin:0p=
x;width:16px;"><embed id=3D"ZeroClipboardMovie_12" src=3D"https:/=
/csdnimg.cn/public/highlighter/ZeroClipboard.swf" loop=3D"false"=20=
menu=3D"false" quality=3D"best" bgcolor=3D"#ffffff" width=3D"16"=20=
height=3D"16" name=3D"ZeroClipboardMovie_12" align=3D"middle" all=
owscriptaccess=3D"always" allowfullscreen=3D"false" type=3D"appli=
cation/x-shockwave-flash" pluginspage=3D"http://www.macromedia.co=
m/go/getflashplayer" flashvars=3D"id=3D12&amp;width=3D16&amp;heig=
ht=3D16" wmode=3D"transparent" style></div></span><span data-mod=3D=
"popu_169"></span></div></div><ol class=3D"dp-j wiz-list-level1"=20=
style=3D"padding:0px;margin:0px 0px 24px;list-style:decimal;borde=
r-style:none solid none none;border-right-width:1px;border-right-=
color:rgb(231, 229, 220);color:rgb(92, 92, 92);background-color:r=
gb(255, 255, 255);"><li class=3D"alt" style=3D"padding:0px 3px 0p=
x 10px !important;margin-top:8px;margin-right:0px !important;marg=
in-bottom:0px !important;margin-left:40px;border-style:none none=20=
none solid;border-left-width:3px;border-left-color:rgb(108, 226,=20=
108);list-style:decimal outside;background-color:rgb(255, 255, 25=
5);"><span style=3D"margin:0px;padding:0px;border:none;color:blac=
k;"><span class=3D"keyword" style=3D"margin:0px;padding:0px;borde=
r:none;color:rgb(0, 102, 153);font-weight:bold;">private</span><s=
pan style=3D"margin:0px;padding:0px;border:none;color:black;">&nb=
sp;</span><span class=3D"keyword" style=3D"margin:0px;padding:0px=
;border:none;color:rgb(0, 102, 153);font-weight:bold;">void</span=
><span style=3D"margin:0px;padding:0px;border:none;color:black;">=
&nbsp;recoverUnclosedSegment(longsegmentTxId)&nbsp;throwsIOExcept=
ion&nbsp;{&nbsp;&nbsp;</span></span></li><li style=3D"padding:0px=
 3px 0px 10px !important;margin-top:8px;margin-right:0px !importa=
nt;margin-bottom:0px !important;margin-left:40px;border-style:non=
e none none solid;border-left-width:3px;border-left-color:rgb(108=
, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);back=
ground-color:rgb(248, 248, 248);"><span style=3D"margin:0px;paddi=
ng:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;Precondi=
tions.checkArgument(segmentTxId&nbsp;&gt;<span class=3D"number" s=
tyle=3D"margin:0px;padding:0px;border:none;color:rgb(192, 0, 0);"=
>0</span><span style=3D"margin:0px;padding:0px;border:none;color:=
black;">);&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;background-col=
or:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;LOG.info(<span cla=
ss=3D"string" style=3D"margin:0px;padding:0px;border:none;color:b=
lue;">"Beginning&nbsp;recovery&nbsp;of&nbsp;unclosed&nbsp;segment=
&nbsp;starting&nbsp;at&nbsp;txid&nbsp;"</span><span style=3D"marg=
in:0px;padding:0px;border:none;color:black;">+&nbsp;&nbsp;</span>=
</span></li><li style=3D"padding:0px 3px 0px 10px !important;marg=
in-top:8px;margin-right:0px !important;margin-bottom:0px !importa=
nt;margin-left:40px;border-style:none none none solid;border-left=
-width:3px;border-left-color:rgb(108, 226, 108);list-style:decima=
l outside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 24=
8);"><span style=3D"margin:0px;padding:0px;border:none;color:blac=
k;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;segmentTxId);=
&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"padding:0px 3p=
x 0px 10px !important;margin-top:8px;margin-right:0px !important;=
margin-bottom:0px !important;margin-left:40px;border-style:none n=
one none solid;border-left-width:3px;border-left-color:rgb(108, 2=
26, 108);list-style:decimal outside;background-color:rgb(255, 255=
, 255);"><span style=3D"margin:0px;padding:0px;border:none;color:=
black;">&nbsp;&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3p=
x 0px 10px !important;margin-top:8px;margin-right:0px !important;=
margin-bottom:0px !important;margin-left:40px;border-style:none n=
one none solid;border-left-width:3px;border-left-color:rgb(108, 2=
26, 108);list-style:decimal outside;color:rgb(92, 92, 92);backgro=
und-color:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:=
0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=
=3D"comment" style=3D"margin:0px;padding:0px;border:none;color:rg=
b(0, 130, 0);">//&nbsp;Step&nbsp;1.&nbsp;Prepare&nbsp;recovery</s=
pan><span style=3D"margin:0px;padding:0px;border:none;color:black=
;">&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"padd=
ing:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !=
important;margin-bottom:0px !important;margin-left:40px;border-st=
yle:none none none solid;border-left-width:3px;border-left-color:=
rgb(108, 226, 108);list-style:decimal outside;background-color:rg=
b(255, 255, 255);"><span style=3D"margin:0px;padding:0px;border:n=
one;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment"=
 style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0)=
;">//QJM=CF=F2JNs=CE=CAsegmentTxId=B6=D4=D3=A6=B5=C4segment=B5=C4=
=B3=A4=B6=C8=BA=CDfinalized/in-progress=D7=B4=BF=F6=A3=BBJNs=B7=B5=
=BB=D8=D5=E2=D0=A9=D0=C5=CF=A2=A1=A3=A3=A8=B6=D4=D3=A6Paxos=CB=E3=
=B7=A8=B5=C4Phase&nbsp;1a=BA=CDPhase&nbsp;1b=A3=A9</span><span st=
yle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nb=
sp;</span></span></li><li style=3D"padding:0px 3px 0px 10px !impo=
rtant;margin-top:8px;margin-right:0px !important;margin-bottom:0p=
x !important;margin-left:40px;border-style:none none none solid;b=
order-left-width:3px;border-left-color:rgb(108, 226, 108);list-st=
yle:decimal outside;color:rgb(92, 92, 92);background-color:rgb(24=
8, 248, 248);"><span style=3D"margin:0px;padding:0px;border:none;=
color:black;">&nbsp;&nbsp;&nbsp;&nbsp;QuorumCall&lt;AsyncLogger,P=
repareRecoveryResponseProto&gt;&nbsp;prepare&nbsp;=3D&nbsp;&nbsp;=
</span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !=
important;margin-top:8px;margin-right:0px !important;margin-botto=
m:0px !important;margin-left:40px;border-style:none none none sol=
id;border-left-width:3px;border-left-color:rgb(108, 226, 108);lis=
t-style:decimal outside;background-color:rgb(255, 255, 255);"><sp=
an style=3D"margin:0px;padding:0px;border:none;color:black;">&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loggers.prepareRecove=
ry(segmentTxId);&nbsp;&nbsp;</span></li><li style=3D"padding:0px=20=
3px 0px 10px !important;margin-top:8px;margin-right:0px !importan=
t;margin-bottom:0px !important;margin-left:40px;border-style:none=
 none none solid;border-left-width:3px;border-left-color:rgb(108,=
 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);backg=
round-color:rgb(248, 248, 248);"><span style=3D"margin:0px;paddin=
g:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;As=
yncLogger,&nbsp;PrepareRecoveryResponseProto&gt;&nbsp;prepareResp=
onses=3D&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"paddin=
g:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !im=
portant;margin-bottom:0px !important;margin-left:40px;border-styl=
e:none none none solid;border-left-width:3px;border-left-color:rg=
b(108, 226, 108);list-style:decimal outside;background-color:rgb(=
255, 255, 255);"><span style=3D"margin:0px;padding:0px;border:non=
e;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l=
oggers.waitForWriteQuorum(prepare,&nbsp;prepareRecoveryTimeoutMs,=
&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px !im=
portant;margin-top:8px;margin-right:0px !important;margin-bottom:=
0px !important;margin-left:40px;border-style:none none none solid=
;border-left-width:3px;border-left-color:rgb(108, 226, 108);list-=
style:decimal outside;color:rgb(92, 92, 92);background-color:rgb(=
248, 248, 248);"><span style=3D"margin:0px;padding:0px;border:non=
e;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"string" style=3D"margin:0px=
;padding:0px;border:none;color:blue;">"prepareRecovery("</span><s=
pan style=3D"margin:0px;padding:0px;border:none;color:black;">+&n=
bsp;segmentTxId&nbsp;+&nbsp;</span><span class=3D"string" style=3D=
"margin:0px;padding:0px;border:none;color:blue;">")"</span><span=20=
style=3D"margin:0px;padding:0px;border:none;color:black;">);&nbsp=
;&nbsp;</span></span></li><li class=3D"alt" style=3D"padding:0px=20=
3px 0px 10px !important;margin-top:8px;margin-right:0px !importan=
t;margin-bottom:0px !important;margin-left:40px;border-style:none=
 none none solid;border-left-width:3px;border-left-color:rgb(108,=
 226, 108);list-style:decimal outside;background-color:rgb(255, 2=
55, 255);"><span style=3D"margin:0px;padding:0px;border:none;colo=
r:black;">&nbsp;&nbsp;&nbsp;&nbsp;LOG.info(<span class=3D"string"=
 style=3D"margin:0px;padding:0px;border:none;color:blue;">"Recove=
ry&nbsp;prepare&nbsp;phase&nbsp;complete.&nbsp;Responses:\n"</spa=
n><span style=3D"margin:0px;padding:0px;border:none;color:black;"=
>+&nbsp;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px=
 10px !important;margin-top:8px;margin-right:0px !important;margi=
n-bottom:0px !important;margin-left:40px;border-style:none none n=
one solid;border-left-width:3px;border-left-color:rgb(108, 226, 1=
08);list-style:decimal outside;color:rgb(92, 92, 92);background-c=
olor:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;b=
order:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;QuorumCall.mapToString(prepareResponses));&nbsp;&nbsp;</s=
pan></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !imp=
ortant;margin-top:8px;margin-right:0px !important;margin-bottom:0=
px !important;margin-left:40px;border-style:none none none solid;=
border-left-width:3px;border-left-color:rgb(108, 226, 108);list-s=
tyle:decimal outside;background-color:rgb(255, 255, 255);"><span=20=
style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&=
nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margin:0px;padd=
ing:0px;border:none;color:rgb(0, 130, 0);">//=D4=DA=C3=BF=B8=F6JN=
=B5=C4=B7=B5=BB=D8=D0=C5=CF=A2=D6=D0=CD=A8=B9=FDSegmentRecoveryCo=
mparator=B1=C8=BD=CF=A3=AC=D1=A1=D4=F1=C6=E4=D6=D0=D7=EE=BA=C3=B5=
=C4=D2=BB=B8=F6log&nbsp;segment=D7=F7=CE=AA=BA=F3=C3=E6=CD=AC=B2=BD=
log=B5=C4=B1=EA=D7=BC=A1=A3</span><span style=3D"margin:0px;paddi=
ng:0px;border:none;color:black;">&nbsp;&nbsp;</span></span></li><=
li style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;ma=
rgin-right:0px !important;margin-bottom:0px !important;margin-lef=
t:40px;border-style:none none none solid;border-left-width:3px;bo=
rder-left-color:rgb(108, 226, 108);list-style:decimal outside;col=
or:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><span st=
yle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nb=
sp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margin:0px;paddin=
g:0px;border:none;color:rgb(0, 130, 0);">//=C8=E7=BA=CE=D1=A1=D4=F1=
=B8=FC=BA=C3=B5=C4Log&nbsp;segment=BA=F3=C3=E6=D3=D0=CF=EA=CF=B8=BD=
=E2=CA=CD=A1=A3</span><span style=3D"margin:0px;padding:0px;borde=
r:none;color:black;">&nbsp;&nbsp;</span></span></li><li class=3D"=
alt" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;=
margin-right:0px !important;margin-bottom:0px !important;margin-l=
eft:40px;border-style:none none none solid;border-left-width:3px;=
border-left-color:rgb(108, 226, 108);list-style:decimal outside;b=
ackground-color:rgb(255, 255, 255);"><span style=3D"margin:0px;pa=
dding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;Entry=
&lt;AsyncLogger,&nbsp;PrepareRecoveryResponseProto&gt;&nbsp;bestE=
ntry&nbsp;=3D&nbsp;Collections.max(&nbsp;&nbsp;</span></li><li st=
yle=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-=
right:0px !important;margin-bottom:0px !important;margin-left:40p=
x;border-style:none none none solid;border-left-width:3px;border-=
left-color:rgb(108, 226, 108);list-style:decimal outside;color:rg=
b(92, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prepareResponses.entrySet(),&nbs=
p;SegmentRecoveryComparator.INSTANCE);&nbsp;&nbsp;</span></li><li=
 class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;margi=
n-top:8px;margin-right:0px !important;margin-bottom:0px !importan=
t;margin-left:40px;border-style:none none none solid;border-left-=
width:3px;border-left-color:rgb(108, 226, 108);list-style:decimal=
 outside;background-color:rgb(255, 255, 255);"><span style=3D"mar=
gin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&=
nbsp;AsyncLogger&nbsp;bestLogger&nbsp;=3D&nbsp;bestEntry.getKey()=
;&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px !i=
mportant;margin-top:8px;margin-right:0px !important;margin-bottom=
:0px !important;margin-left:40px;border-style:none none none soli=
d;border-left-width:3px;border-left-color:rgb(108, 226, 108);list=
-style:decimal outside;color:rgb(92, 92, 92);background-color:rgb=
(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border:no=
ne;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;PrepareRecoveryResponseP=
roto&nbsp;bestResponse&nbsp;=3D&nbsp;bestEntry.getValue();&nbsp;&=
nbsp;</span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 1=
0px !important;margin-top:8px;margin-right:0px !important;margin-=
bottom:0px !important;margin-left:40px;border-style:none none non=
e solid;border-left-width:3px;border-left-color:rgb(108, 226, 108=
);list-style:decimal outside;background-color:rgb(255, 255, 255);=
"><span style=3D"margin:0px;padding:0px;border:none;color:black;"=
>&nbsp;&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 1=
0px !important;margin-top:8px;margin-right:0px !important;margin-=
bottom:0px !important;margin-left:40px;border-style:none none non=
e solid;border-left-width:3px;border-left-color:rgb(108, 226, 108=
);list-style:decimal outside;color:rgb(92, 92, 92);background-col=
or:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"com=
ment" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 13=
0, 0);">//&nbsp;Log&nbsp;the&nbsp;above&nbsp;decision,&nbsp;check=
&nbsp;invariants.</span><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;</span></span></li><li class=3D=
"alt" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px=
;margin-right:0px !important;margin-bottom:0px !important;margin-=
left:40px;border-style:none none none solid;border-left-width:3px=
;border-left-color:rgb(108, 226, 108);list-style:decimal outside;=
background-color:rgb(255, 255, 255);"><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<spa=
n class=3D"keyword" style=3D"margin:0px;padding:0px;border:none;c=
olor:rgb(0, 102, 153);font-weight:bold;">if</span><span style=3D"=
margin:0px;padding:0px;border:none;color:black;">(bestResponse.ha=
sAcceptedInEpoch())&nbsp;{&nbsp;&nbsp;</span></span></li><li styl=
e=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-ri=
ght:0px !important;margin-bottom:0px !important;margin-left:40px;=
border-style:none none none solid;border-left-width:3px;border-le=
ft-color:rgb(108, 226, 108);list-style:decimal outside;color:rgb(=
92, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D"=
margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;LOG.info(<span class=3D"string" style=3D"marg=
in:0px;padding:0px;border:none;color:blue;">"Using&nbsp;already-a=
ccepted&nbsp;recovery&nbsp;for&nbsp;segment&nbsp;"</span><span st=
yle=3D"margin:0px;padding:0px;border:none;color:black;">+&nbsp;&n=
bsp;</span></span></li><li class=3D"alt" style=3D"padding:0px 3px=
 0px 10px !important;margin-top:8px;margin-right:0px !important;m=
argin-bottom:0px !important;margin-left:40px;border-style:none no=
ne none solid;border-left-width:3px;border-left-color:rgb(108, 22=
6, 108);list-style:decimal outside;background-color:rgb(255, 255,=
 255);"><span style=3D"margin:0px;padding:0px;border:none;color:b=
lack;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;<span class=3D"string" style=3D"margin:0px;padding:0px;border:n=
one;color:blue;">"starting&nbsp;at&nbsp;txid&nbsp;"</span><span s=
tyle=3D"margin:0px;padding:0px;border:none;color:black;">+&nbsp;s=
egmentTxId&nbsp;+&nbsp;</span><span class=3D"string" style=3D"mar=
gin:0px;padding:0px;border:none;color:blue;">":&nbsp;"</span><spa=
n style=3D"margin:0px;padding:0px;border:none;color:black;">+&nbs=
p;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px=20=
!important;margin-top:8px;margin-right:0px !important;margin-bott=
om:0px !important;margin-left:40px;border-style:none none none so=
lid;border-left-width:3px;border-left-color:rgb(108, 226, 108);li=
st-style:decimal outside;color:rgb(92, 92, 92);background-color:r=
gb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border:=
none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;bestEntry);&nbsp;&nbsp;</span></li><li class=3D"alt=
" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;mar=
gin-right:0px !important;margin-bottom:0px !important;margin-left=
:40px;border-style:none none none solid;border-left-width:3px;bor=
der-left-color:rgb(108, 226, 108);list-style:decimal outside;back=
ground-color:rgb(255, 255, 255);"><span style=3D"margin:0px;paddi=
ng:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;}<span c=
lass=3D"keyword" style=3D"margin:0px;padding:0px;border:none;colo=
r:rgb(0, 102, 153);font-weight:bold;">else</span><span style=3D"m=
argin:0px;padding:0px;border:none;color:black;">&nbsp;</span><spa=
n class=3D"keyword" style=3D"margin:0px;padding:0px;border:none;c=
olor:rgb(0, 102, 153);font-weight:bold;">if</span><span style=3D"=
margin:0px;padding:0px;border:none;color:black;">(bestResponse.ha=
sSegmentState())&nbsp;{&nbsp;&nbsp;</span></span></li><li style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;color:rgb(92,=20=
92, 92);background-color:rgb(248, 248, 248);"><span style=3D"marg=
in:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;LOG.info(<span class=3D"string" style=3D"margin:0=
px;padding:0px;border:none;color:blue;">"Using&nbsp;longest&nbsp;=
log:&nbsp;"</span><span style=3D"margin:0px;padding:0px;border:no=
ne;color:black;">+&nbsp;bestEntry);&nbsp;&nbsp;</span></span></li=
><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;m=
argin-top:8px;margin-right:0px !important;margin-bottom:0px !impo=
rtant;margin-left:40px;border-style:none none none solid;border-l=
eft-width:3px;border-left-color:rgb(108, 226, 108);list-style:dec=
imal outside;background-color:rgb(255, 255, 255);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;}<span class=3D"keyword" style=3D"margin:0px;padding:0px=
;border:none;color:rgb(0, 102, 153);font-weight:bold;">else</span=
><span style=3D"margin:0px;padding:0px;border:none;color:black;">=
&nbsp;{&nbsp;&nbsp;</span></span></li><li style=3D"padding:0px 3p=
x 0px 10px !important;margin-top:8px;margin-right:0px !important;=
margin-bottom:0px !important;margin-left:40px;border-style:none n=
one none solid;border-left-width:3px;border-left-color:rgb(108, 2=
26, 108);list-style:decimal outside;color:rgb(92, 92, 92);backgro=
und-color:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:=
0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;<span class=3D"comment" style=3D"margin:0px;padding:0px;border:n=
one;color:rgb(0, 130, 0);">//prepareRecovery&nbsp;RPC=C3=BB=D3=D0=
=B7=B5=BB=D8=C8=CE=BA=CE=D6=B8=B6=A8txid=B5=C4segment=A3=AC=D4=AD=
=D2=F2=BF=C9=C4=DC=C8=E7=CF=C2=A3=BA</span><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span></sp=
an></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !impo=
rtant;margin-top:8px;margin-right:0px !important;margin-bottom:0p=
x !important;margin-left:40px;border-style:none none none solid;b=
order-left-width:3px;border-left-color:rgb(108, 226, 108);list-st=
yle:decimal outside;background-color:rgb(255, 255, 255);"><span s=
tyle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"marg=
in:0px;padding:0px;border:none;color:rgb(0, 130, 0);">//=D3=D03=B8=
=F6JNs:&nbsp;JN1,JN2,JN3=A1=A3=D4=AD=C0=B4=B5=C4Active&nbsp;NN&nb=
sp;=D4=DAJN1=C9=CF=BF=AA=CA=BC=D0=B4segment&nbsp;101=A3=AC</span>=
<span style=3D"margin:0px;padding:0px;border:none;color:black;">&=
nbsp;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10=
px !important;margin-top:8px;margin-right:0px !important;margin-b=
ottom:0px !important;margin-left:40px;border-style:none none none=
 solid;border-left-width:3px;border-left-color:rgb(108, 226, 108)=
;list-style:decimal outside;color:rgb(92, 92, 92);background-colo=
r:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;bord=
er:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span c=
lass=3D"comment" style=3D"margin:0px;padding:0px;border:none;colo=
r:rgb(0, 130, 0);">//=C8=BB=BA=F3=D4=AD=C0=B4Active&nbsp;NN=B9=D2=
=C1=CB=A3=AC=D6=F7=B4=D3=C7=D0=BB=BB=A3=AC=B4=CB=CA=B1segment&nbs=
p;101=D4=DAJN2=BA=CDJN3=C9=CF=B2=A2=B2=BB=B4=E6=D4=DA=A3=AC</span=
><span style=3D"margin:0px;padding:0px;border:none;color:black;">=
&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"padding=
:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !imp=
ortant;margin-bottom:0px !important;margin-left:40px;border-style=
:none none none solid;border-left-width:3px;border-left-color:rgb=
(108, 226, 108);list-style:decimal outside;background-color:rgb(2=
55, 255, 255);"><span style=3D"margin:0px;padding:0px;border:none=
;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"comment" style=3D"margin:0px;padding:0px;border:none;color:rgb(0=
, 130, 0);">//newEpoch&nbsp;RPC=A3=AC=D2=F2=CE=AA=CE=D2=C3=C7=BF=B4=
=B5=BD=C1=CBJN1=C9=CF=B5=C4segment&nbsp;101=A3=AC=CB=F9=D2=D4=BE=F6=
=B6=A8recover=B5=C4=CA=C7segment&nbsp;101</span><span style=3D"ma=
rgin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span=
></span></li><li style=3D"padding:0px 3px 0px 10px !important;mar=
gin-top:8px;margin-right:0px !important;margin-bottom:0px !import=
ant;margin-left:40px;border-style:none none none solid;border-lef=
t-width:3px;border-left-color:rgb(108, 226, 108);list-style:decim=
al outside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 2=
48);"><span style=3D"margin:0px;padding:0px;border:none;color:bla=
ck;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment"=20=
style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);=
">//=D4=DAprepareRecovery=D6=AE=C7=B0=A3=ACJN1=B9=D2=C1=CB=A3=AC=C4=
=C7=C3=B4prepareRecovery&nbsp;RPC=D6=BB=C4=DC=B7=A2=CF=F2JN2=BA=CD=
JN3=C1=CB=A3=ACRPC=B7=B5=BB=D8=B5=C4=BD=E1=B9=FB=CA=C7=C3=BB=D3=D0=
segment&nbsp;101</span><span style=3D"margin:0px;padding:0px;bord=
er:none;color:black;">&nbsp;&nbsp;</span></span></li><li class=3D=
"alt" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px=
;margin-right:0px !important;margin-bottom:0px !important;margin-=
left:40px;border-style:none none none solid;border-left-width:3px=
;border-left-color:rgb(108, 226, 108);list-style:decimal outside;=
background-color:rgb(255, 255, 255);"><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;<span class=3D"comment" style=3D"margin:0px;padding:0px;b=
order:none;color:rgb(0, 130, 0);">//=D5=E2=D6=D6=C7=E9=BF=F6=CF=C2=
=CA=C7=B2=BB=D0=E8=D2=AArecover=B5=C4=A3=AC=D2=F2=CE=AAsegment&nb=
sp;101=B2=A2=C3=BB=D3=D0=D0=B4=B3=C9=B9=A6=A3=A8=C3=BB=D3=D0=B4=EF=
=B5=BD=B4=F3=B6=E0=CA=FD=A3=A9</span><span style=3D"margin:0px;pa=
dding:0px;border:none;color:black;">&nbsp;&nbsp;</span></span></l=
i><li style=3D"padding:0px 3px 0px 10px !important;margin-top:8px=
;margin-right:0px !important;margin-bottom:0px !important;margin-=
left:40px;border-style:none none none solid;border-left-width:3px=
;border-left-color:rgb(108, 226, 108);list-style:decimal outside;=
color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword" style=3D"ma=
rgin:0px;padding:0px;border:none;color:rgb(0, 102, 153);font-weig=
ht:bold;">for</span><span style=3D"margin:0px;padding:0px;border:=
none;color:black;">(PrepareRecoveryResponseProto&nbsp;resp&nbsp;:=
&nbsp;prepareResponses.values())&nbsp;{&nbsp;&nbsp;</span></span>=
</li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !importa=
nt;margin-top:8px;margin-right:0px !important;margin-bottom:0px !=
important;margin-left:40px;border-style:none none none solid;bord=
er-left-width:3px;border-left-color:rgb(108, 226, 108);list-style=
:decimal outside;background-color:rgb(255, 255, 255);"><span styl=
e=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword" styl=
e=3D"margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);fo=
nt-weight:bold;">assert</span><span style=3D"margin:0px;padding:0=
px;border:none;color:black;">!resp.hasSegmentState()&nbsp;:&nbsp;=
&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px !i=
mportant;margin-top:8px;margin-right:0px !important;margin-bottom=
:0px !important;margin-left:40px;border-style:none none none soli=
d;border-left-width:3px;border-left-color:rgb(108, 226, 108);list=
-style:decimal outside;color:rgb(92, 92, 92);background-color:rgb=
(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border:no=
ne;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;<span class=3D"string" style=3D"margin:0px;padding:0p=
x;border:none;color:blue;">"One&nbsp;of&nbsp;the&nbsp;loggers&nbs=
p;had&nbsp;a&nbsp;response,&nbsp;but&nbsp;no&nbsp;best&nbsp;logge=
r&nbsp;"</span><span style=3D"margin:0px;padding:0px;border:none;=
color:black;">+&nbsp;&nbsp;</span></span></li><li class=3D"alt" s=
tyle=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin=
-right:0px !important;margin-bottom:0px !important;margin-left:40=
px;border-style:none none none solid;border-left-width:3px;border=
-left-color:rgb(108, 226, 108);list-style:decimal outside;backgro=
und-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:=
0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"string" style=3D"margin:0=
px;padding:0px;border:none;color:blue;">"was&nbsp;found."</span><=
span style=3D"margin:0px;padding:0px;border:none;color:black;">;&=
nbsp;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10=
px !important;margin-top:8px;margin-right:0px !important;margin-b=
ottom:0px !important;margin-left:40px;border-style:none none none=
 solid;border-left-width:3px;border-left-color:rgb(108, 226, 108)=
;list-style:decimal outside;color:rgb(92, 92, 92);background-colo=
r:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;bord=
er:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;=
&nbsp;</span></li><li class=3D"alt" style=3D"padding:0px 3px 0px=20=
10px !important;margin-top:8px;margin-right:0px !important;margin=
-bottom:0px !important;margin-left:40px;border-style:none none no=
ne solid;border-left-width:3px;border-left-color:rgb(108, 226, 10=
8);list-style:decimal outside;background-color:rgb(255, 255, 255)=
;"><span style=3D"margin:0px;padding:0px;border:none;color:black;=
">&nbsp;&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px=20=
10px !important;margin-top:8px;margin-right:0px !important;margin=
-bottom:0px !important;margin-left:40px;border-style:none none no=
ne solid;border-left-width:3px;border-left-color:rgb(108, 226, 10=
8);list-style:decimal outside;color:rgb(92, 92, 92);background-co=
lor:rgb(248, 248, 248);"><span style=3D"margin:0px;padding:0px;bo=
rder:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOG.i=
nfo(<span class=3D"string" style=3D"margin:0px;padding:0px;border=
:none;color:blue;">"None&nbsp;of&nbsp;the&nbsp;responders&nbsp;ha=
d&nbsp;a&nbsp;log&nbsp;to&nbsp;recover:&nbsp;"</span><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">+&nbsp;&nbsp;</=
span></span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 1=
0px !important;margin-top:8px;margin-right:0px !important;margin-=
bottom:0px !important;margin-left:40px;border-style:none none non=
e solid;border-left-width:3px;border-left-color:rgb(108, 226, 108=
);list-style:decimal outside;background-color:rgb(255, 255, 255);=
"><span style=3D"margin:0px;padding:0px;border:none;color:black;"=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quor=
umCall.mapToString(prepareResponses));&nbsp;&nbsp;</span></li><li=
 style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;marg=
in-right:0px !important;margin-bottom:0px !important;margin-left:=
40px;border-style:none none none solid;border-left-width:3px;bord=
er-left-color:rgb(108, 226, 108);list-style:decimal outside;color=
:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><span styl=
e=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"keyword" style=3D"margin:=
0px;padding:0px;border:none;color:rgb(0, 102, 153);font-weight:bo=
ld;">return</span><span style=3D"margin:0px;padding:0px;border:no=
ne;color:black;">;&nbsp;&nbsp;</span></span></li><li class=3D"alt=
" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;mar=
gin-right:0px !important;margin-bottom:0px !important;margin-left=
:40px;border-style:none none none solid;border-left-width:3px;bor=
der-left-color:rgb(108, 226, 108);list-style:decimal outside;back=
ground-color:rgb(255, 255, 255);"><span style=3D"margin:0px;paddi=
ng:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&=
nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px !important=
;margin-top:8px;margin-right:0px !important;margin-bottom:0px !im=
portant;margin-left:40px;border-style:none none none solid;border=
-left-width:3px;border-left-color:rgb(108, 226, 108);list-style:d=
ecimal outside;color:rgb(92, 92, 92);background-color:rgb(248, 24=
8, 248);"><span style=3D"margin:0px;padding:0px;border:none;color=
:black;">&nbsp;&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;background-col=
or:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;SegmentStateProto&=
nbsp;logToSync&nbsp;=3D&nbsp;bestResponse.getSegmentState();&nbsp=
;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px !importa=
nt;margin-top:8px;margin-right:0px !important;margin-bottom:0px !=
important;margin-left:40px;border-style:none none none solid;bord=
er-left-width:3px;border-left-color:rgb(108, 226, 108);list-style=
:decimal outside;color:rgb(92, 92, 92);background-color:rgb(248,=20=
248, 248);"><span style=3D"margin:0px;padding:0px;border:none;col=
or:black;">&nbsp;&nbsp;&nbsp;&nbsp;assertsegmentTxId&nbsp;=3D=3D&=
nbsp;logToSync.getStartTxId();&nbsp;&nbsp;</span></li><li class=3D=
"alt" style=3D"padding:0px 3px 0px 10px !important;margin-top:8px=
;margin-right:0px !important;margin-bottom:0px !important;margin-=
left:40px;border-style:none none none solid;border-left-width:3px=
;border-left-color:rgb(108, 226, 108);list-style:decimal outside;=
background-color:rgb(255, 255, 255);"><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;</span></l=
i><li style=3D"padding:0px 3px 0px 10px !important;margin-top:8px=
;margin-right:0px !important;margin-bottom:0px !important;margin-=
left:40px;border-style:none none none solid;border-left-width:3px=
;border-left-color:rgb(108, 226, 108);list-style:decimal outside;=
color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;=
&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margin:0px;pad=
ding:0px;border:none;color:rgb(0, 130, 0);">//&nbsp;Sanity&nbsp;c=
heck:&nbsp;none&nbsp;of&nbsp;the&nbsp;loggers&nbsp;should&nbsp;be=
&nbsp;aware&nbsp;of&nbsp;a&nbsp;higher</span><span style=3D"margi=
n:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span></=
span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !im=
portant;margin-top:8px;margin-right:0px !important;margin-bottom:=
0px !important;margin-left:40px;border-style:none none none solid=
;border-left-width:3px;border-left-color:rgb(108, 226, 108);list-=
style:decimal outside;background-color:rgb(255, 255, 255);"><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;=
&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margin:0px;pad=
ding:0px;border:none;color:rgb(0, 130, 0);">//&nbsp;txid&nbsp;tha=
n&nbsp;the&nbsp;txid&nbsp;we&nbsp;intend&nbsp;to&nbsp;truncate&nb=
sp;to</span><span style=3D"margin:0px;padding:0px;border:none;col=
or:black;">&nbsp;&nbsp;</span></span></li><li style=3D"padding:0p=
x 3px 0px 10px !important;margin-top:8px;margin-right:0px !import=
ant;margin-bottom:0px !important;margin-left:40px;border-style:no=
ne none none solid;border-left-width:3px;border-left-color:rgb(10=
8, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);bac=
kground-color:rgb(248, 248, 248);"><span style=3D"margin:0px;padd=
ing:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span c=
lass=3D"keyword" style=3D"margin:0px;padding:0px;border:none;colo=
r:rgb(0, 102, 153);font-weight:bold;">for</span><span style=3D"ma=
rgin:0px;padding:0px;border:none;color:black;">(Map.Entry&lt;Asyn=
cLogger,&nbsp;PrepareRecoveryResponseProto&gt;&nbsp;e&nbsp;:&nbsp=
;&nbsp;</span></span></li><li class=3D"alt" style=3D"padding:0px=20=
3px 0px 10px !important;margin-top:8px;margin-right:0px !importan=
t;margin-bottom:0px !important;margin-left:40px;border-style:none=
 none none solid;border-left-width:3px;border-left-color:rgb(108,=
 226, 108);list-style:decimal outside;background-color:rgb(255, 2=
55, 255);"><span style=3D"margin:0px;padding:0px;border:none;colo=
r:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p=
repareResponses.entrySet())&nbsp;{&nbsp;&nbsp;</span></li><li sty=
le=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-r=
ight:0px !important;margin-bottom:0px !important;margin-left:40px=
;border-style:none none none solid;border-left-width:3px;border-l=
eft-color:rgb(108, 226, 108);list-style:decimal outside;color:rgb=
(92, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;AsyncLogger&nbsp;logger&nbsp;=3D&nbsp;e.getK=
ey();&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"padding:0=
px 3px 0px 10px !important;margin-top:8px;margin-right:0px !impor=
tant;margin-bottom:0px !important;margin-left:40px;border-style:n=
one none none solid;border-left-width:3px;border-left-color:rgb(1=
08, 226, 108);list-style:decimal outside;background-color:rgb(255=
, 255, 255);"><span style=3D"margin:0px;padding:0px;border:none;c=
olor:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrepareRecoveryR=
esponseProto&nbsp;resp&nbsp;=3D&nbsp;e.getValue();&nbsp;&nbsp;</s=
pan></li><li style=3D"padding:0px 3px 0px 10px !important;margin-=
top:8px;margin-right:0px !important;margin-bottom:0px !important;=
margin-left:40px;border-style:none none none solid;border-left-wi=
dth:3px;border-left-color:rgb(108, 226, 108);list-style:decimal o=
utside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);=
"><span style=3D"margin:0px;padding:0px;border:none;color:black;"=
>&nbsp;&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"padding=
:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !imp=
ortant;margin-bottom:0px !important;margin-left:40px;border-style=
:none none none solid;border-left-width:3px;border-left-color:rgb=
(108, 226, 108);list-style:decimal outside;background-color:rgb(2=
55, 255, 255);"><span style=3D"margin:0px;padding:0px;border:none=
;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"keyword" style=3D"margin:0px;padding:0px;border:none;color:rgb(0=
, 102, 153);font-weight:bold;">if</span><span style=3D"margin:0px=
;padding:0px;border:none;color:black;">(resp.hasLastCommittedTxId=
()&nbsp;&amp;&amp;&nbsp;&nbsp;</span></span></li><li style=3D"pad=
ding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px=20=
!important;margin-bottom:0px !important;margin-left:40px;border-s=
tyle:none none none solid;border-left-width:3px;border-left-color=
:rgb(108, 226, 108);list-style:decimal outside;color:rgb(92, 92,=20=
92);background-color:rgb(248, 248, 248);"><span style=3D"margin:0=
px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resp.getLastCommittedTxId()&n=
bsp;&gt;&nbsp;logToSync.getEndTxId())&nbsp;{&nbsp;&nbsp;</span></=
li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !important=
;margin-top:8px;margin-right:0px !important;margin-bottom:0px !im=
portant;margin-left:40px;border-style:none none none solid;border=
-left-width:3px;border-left-color:rgb(108, 226, 108);list-style:d=
ecimal outside;background-color:rgb(255, 255, 255);"><span style=3D=
"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thrownew&nbsp;AssertionError(<sp=
an class=3D"string" style=3D"margin:0px;padding:0px;border:none;c=
olor:blue;">"Decided&nbsp;to&nbsp;synchronize&nbsp;log&nbsp;to&nb=
sp;"</span><span style=3D"margin:0px;padding:0px;border:none;colo=
r:black;">+&nbsp;logToSync&nbsp;+&nbsp;&nbsp;</span></span></li><=
li style=3D"padding:0px 3px 0px 10px !important;margin-top:8px;ma=
rgin-right:0px !important;margin-bottom:0px !important;margin-lef=
t:40px;border-style:none none none solid;border-left-width:3px;bo=
rder-left-color:rgb(108, 226, 108);list-style:decimal outside;col=
or:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><span st=
yle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<s=
pan class=3D"string" style=3D"margin:0px;padding:0px;border:none;=
color:blue;">"&nbsp;but&nbsp;logger&nbsp;"</span><span style=3D"m=
argin:0px;padding:0px;border:none;color:black;">+&nbsp;logger&nbs=
p;+&nbsp;</span><span class=3D"string" style=3D"margin:0px;paddin=
g:0px;border:none;color:blue;">"&nbsp;had&nbsp;seen&nbsp;txid&nbs=
p;"</span><span style=3D"margin:0px;padding:0px;border:none;color=
:black;">+&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;background-col=
or:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;bor=
der:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resp.getLastCommittedTxId()&nbsp;+<=
span class=3D"string" style=3D"margin:0px;padding:0px;border:none=
;color:blue;">"&nbsp;committed"</span><span style=3D"margin:0px;p=
adding:0px;border:none;color:black;">);&nbsp;&nbsp;</span></span>=
</li><li style=3D"padding:0px 3px 0px 10px !important;margin-top:=
8px;margin-right:0px !important;margin-bottom:0px !important;marg=
in-left:40px;border-style:none none none solid;border-left-width:=
3px;border-left-color:rgb(108, 226, 108);list-style:decimal outsi=
de;color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"><s=
pan style=3D"margin:0px;padding:0px;border:none;color:black;">&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li cla=
ss=3D"alt" style=3D"padding:0px 3px 0px 10px !important;margin-to=
p:8px;margin-right:0px !important;margin-bottom:0px !important;ma=
rgin-left:40px;border-style:none none none solid;border-left-widt=
h:3px;border-left-color:rgb(108, 226, 108);list-style:decimal out=
side;background-color:rgb(255, 255, 255);"><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp=
;}&nbsp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px !=
important;margin-top:8px;margin-right:0px !important;margin-botto=
m:0px !important;margin-left:40px;border-style:none none none sol=
id;border-left-width:3px;border-left-color:rgb(108, 226, 108);lis=
t-style:decimal outside;color:rgb(92, 92, 92);background-color:rg=
b(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border:n=
one;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment"=
 style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0)=
;">//=CD=AC=B2=BDlog=B5=C4=CA=FD=BE=DD=D4=B4JN=D5=D2=B5=BD=BA=F3=A3=
=AC=B9=B9=D4=ECURL=D3=C3=D3=DA=C6=E4=CB=FBJN=B6=C1=C8=A1EditLog=A3=
=A8JN=B6=CB=D3=D0HTTP&nbsp;server=CD=A8=B9=FDservlet=D0=CE=CA=BD=CC=
=E1=B9=A9HTTP=B6=C1=A3=A9</span><span style=3D"margin:0px;padding=
:0px;border:none;color:black;">&nbsp;&nbsp;</span></span></li><li=
 class=3D"alt" style=3D"padding:0px 3px 0px 10px !important;margi=
n-top:8px;margin-right:0px !important;margin-bottom:0px !importan=
t;margin-left:40px;border-style:none none none solid;border-left-=
width:3px;border-left-color:rgb(108, 226, 108);list-style:decimal=
 outside;background-color:rgb(255, 255, 255);"><span style=3D"mar=
gin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&=
nbsp;URL&nbsp;syncFromUrl&nbsp;=3D&nbsp;bestLogger.buildURLToFetc=
hLogs(segmentTxId);&nbsp;&nbsp;</span></li><li style=3D"padding:0=
px 3px 0px 10px !important;margin-top:8px;margin-right:0px !impor=
tant;margin-bottom:0px !important;margin-left:40px;border-style:n=
one none none solid;border-left-width:3px;border-left-color:rgb(1=
08, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);ba=
ckground-color:rgb(248, 248, 248);"><span style=3D"margin:0px;pad=
ding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span=20=
class=3D"comment" style=3D"margin:0px;padding:0px;border:none;col=
or:rgb(0, 130, 0);">//=CF=F2JNs=B7=A2=CB=CDacceptRecovery&nbsp;RP=
C=C7=EB=C7=F3=A3=A8=B6=D4=D3=A6Paxos=CB=E3=B7=A8=B5=C4Phase&nbsp;=
2a=A3=A9</span><span style=3D"margin:0px;padding:0px;border:none;=
color:black;">&nbsp;&nbsp;</span></span></li><li class=3D"alt" st=
yle=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-=
right:0px !important;margin-bottom:0px !important;margin-left:40p=
x;border-style:none none none solid;border-left-width:3px;border-=
left-color:rgb(108, 226, 108);list-style:decimal outside;backgrou=
nd-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:0=
px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D=
"comment" style=3D"margin:0px;padding:0px;border:none;color:rgb(0=
, 130, 0);">//JN=CA=D5=B5=BD=D5=E2=B8=F6acceptRecovery&nbsp;RPC=D6=
=AE=BA=F3=A3=AC=CA=B9=D7=D4=BC=BA=B5=C4log=D3=EBsyncFromUrl=CD=AC=
=B2=BD=A3=AC=B2=A2=B3=D6=BE=C3=BB=AF=D5=E2=B8=F6logsegment=BA=CDe=
poch</span><span style=3D"margin:0px;padding:0px;border:none;colo=
r:black;">&nbsp;&nbsp;</span></span></li><li style=3D"padding:0px=
 3px 0px 10px !important;margin-top:8px;margin-right:0px !importa=
nt;margin-bottom:0px !important;margin-left:40px;border-style:non=
e none none solid;border-left-width:3px;border-left-color:rgb(108=
, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);back=
ground-color:rgb(248, 248, 248);"><span style=3D"margin:0px;paddi=
ng:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span cl=
ass=3D"comment" style=3D"margin:0px;padding:0px;border:none;color=
:rgb(0, 130, 0);">//=C8=E7=B9=FB=CA=D5=B5=BD=B4=F3=B6=E0=CA=FD=B5=
=C4JNs=B5=C4success&nbsp;response=A3=AC=C4=C7=C3=B4=D5=E2=B8=F6=CD=
=AC=B2=BD=B2=D9=D7=F7=B3=C9=B9=A6=A1=A3=A3=A8=B6=D4=D3=A6Paxos=CB=
=E3=B7=A8=B5=C4Phase&nbsp;2b=A3=A9</span><span style=3D"margin:0p=
x;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span></span=
></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !import=
ant;margin-top:8px;margin-right:0px !important;margin-bottom:0px=20=
!important;margin-left:40px;border-style:none none none solid;bor=
der-left-width:3px;border-left-color:rgb(108, 226, 108);list-styl=
e:decimal outside;background-color:rgb(255, 255, 255);"><span sty=
le=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbs=
p;&nbsp;&nbsp;QuorumCall&lt;AsyncLogger,Void&gt;&nbsp;accept&nbsp=
;=3D&nbsp;loggers.acceptRecovery(logToSync,&nbsp;syncFromUrl);&nb=
sp;&nbsp;</span></li><li style=3D"padding:0px 3px 0px 10px !impor=
tant;margin-top:8px;margin-right:0px !important;margin-bottom:0px=
 !important;margin-left:40px;border-style:none none none solid;bo=
rder-left-width:3px;border-left-color:rgb(108, 226, 108);list-sty=
le:decimal outside;color:rgb(92, 92, 92);background-color:rgb(248=
, 248, 248);"><span style=3D"margin:0px;padding:0px;border:none;c=
olor:black;">&nbsp;&nbsp;&nbsp;&nbsp;loggers.waitForWriteQuorum(a=
ccept,&nbsp;acceptRecoveryTimeoutMs,&nbsp;&nbsp;</span></li><li c=
lass=3D"alt" style=3D"padding:0px 3px 0px 10px !important;margin-=
top:8px;margin-right:0px !important;margin-bottom:0px !important;=
margin-left:40px;border-style:none none none solid;border-left-wi=
dth:3px;border-left-color:rgb(108, 226, 108);list-style:decimal o=
utside;background-color:rgb(255, 255, 255);"><span style=3D"margi=
n:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"string" style=3D"margin=
:0px;padding:0px;border:none;color:blue;">"acceptRecovery("</span=
><span style=3D"margin:0px;padding:0px;border:none;color:black;">=
+&nbsp;TextFormat.shortDebugString(logToSync)&nbsp;+&nbsp;</span>=
<span class=3D"string" style=3D"margin:0px;padding:0px;border:non=
e;color:blue;">")"</span><span style=3D"margin:0px;padding:0px;bo=
rder:none;color:black;">);&nbsp;&nbsp;</span></span></li><li styl=
e=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin-ri=
ght:0px !important;margin-bottom:0px !important;margin-left:40px;=
border-style:none none none solid;border-left-width:3px;border-le=
ft-color:rgb(108, 226, 108);list-style:decimal outside;color:rgb(=
92, 92, 92);background-color:rgb(248, 248, 248);"><span style=3D"=
margin:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbs=
p;</span></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px=
 !important;margin-top:8px;margin-right:0px !important;margin-bot=
tom:0px !important;margin-left:40px;border-style:none none none s=
olid;border-left-width:3px;border-left-color:rgb(108, 226, 108);l=
ist-style:decimal outside;background-color:rgb(255, 255, 255);"><=
span style=3D"margin:0px;padding:0px;border:none;color:black;">&n=
bsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margin:0px=
;padding:0px;border:none;color:rgb(0, 130, 0);">//&nbsp;If&nbsp;o=
ne&nbsp;of&nbsp;the&nbsp;loggers&nbsp;above&nbsp;missed&nbsp;the&=
nbsp;synchronization&nbsp;step&nbsp;above,&nbsp;but</span><span s=
tyle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&n=
bsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px !imp=
ortant;margin-top:8px;margin-right:0px !important;margin-bottom:0=
px !important;margin-left:40px;border-style:none none none solid;=
border-left-width:3px;border-left-color:rgb(108, 226, 108);list-s=
tyle:decimal outside;color:rgb(92, 92, 92);background-color:rgb(2=
48, 248, 248);"><span style=3D"margin:0px;padding:0px;border:none=
;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment" st=
yle=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);">=
//&nbsp;we&nbsp;send&nbsp;a&nbsp;finalize()&nbsp;here,&nbsp;that'=
s&nbsp;OK.&nbsp;It&nbsp;validates&nbsp;the&nbsp;log&nbsp;before</=
span><span style=3D"margin:0px;padding:0px;border:none;color:blac=
k;">&nbsp;&nbsp;</span></span></li><li class=3D"alt" style=3D"pad=
ding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px=20=
!important;margin-bottom:0px !important;margin-left:40px;border-s=
tyle:none none none solid;border-left-width:3px;border-left-color=
:rgb(108, 226, 108);list-style:decimal outside;background-color:r=
gb(255, 255, 255);"><span style=3D"margin:0px;padding:0px;border:=
none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span class=3D"comment=
" style=3D"margin:0px;padding:0px;border:none;color:rgb(0, 130, 0=
);">//&nbsp;finalizing.&nbsp;Hence,&nbsp;even&nbsp;if&nbsp;it&nbs=
p;is&nbsp;not&nbsp;"in&nbsp;sync",&nbsp;it&nbsp;won't&nbsp;incorr=
ectly</span><span style=3D"margin:0px;padding:0px;border:none;col=
or:black;">&nbsp;&nbsp;</span></span></li><li style=3D"padding:0p=
x 3px 0px 10px !important;margin-top:8px;margin-right:0px !import=
ant;margin-bottom:0px !important;margin-left:40px;border-style:no=
ne none none solid;border-left-width:3px;border-left-color:rgb(10=
8, 226, 108);list-style:decimal outside;color:rgb(92, 92, 92);bac=
kground-color:rgb(248, 248, 248);"><span style=3D"margin:0px;padd=
ing:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;<span c=
lass=3D"comment" style=3D"margin:0px;padding:0px;border:none;colo=
r:rgb(0, 130, 0);">//&nbsp;finalize.</span><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span></sp=
an></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !impo=
rtant;margin-top:8px;margin-right:0px !important;margin-bottom:0p=
x !important;margin-left:40px;border-style:none none none solid;b=
order-left-width:3px;border-left-color:rgb(108, 226, 108);list-st=
yle:decimal outside;background-color:rgb(255, 255, 255);"><span s=
tyle=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&n=
bsp;&nbsp;&nbsp;<span class=3D"comment" style=3D"margin:0px;paddi=
ng:0px;border:none;color:rgb(0, 130, 0);">//EditLog=BC=C8=C8=BB=D2=
=D1=BE=AD=CD=AC=B2=BD=CD=EA=C1=CB=A3=AC=C4=C7=C3=B4=BE=CD=D3=A6=B8=
=C3=D5=FD=B3=A3finalized=C1=CB=A1=A3</span><span style=3D"margin:=
0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;</span></sp=
an></li><li style=3D"padding:0px 3px 0px 10px !important;margin-t=
op:8px;margin-right:0px !important;margin-bottom:0px !important;m=
argin-left:40px;border-style:none none none solid;border-left-wid=
th:3px;border-left-color:rgb(108, 226, 108);list-style:decimal ou=
tside;color:rgb(92, 92, 92);background-color:rgb(248, 248, 248);"=
><span style=3D"margin:0px;padding:0px;border:none;color:black;">=
&nbsp;&nbsp;&nbsp;&nbsp;QuorumCall&lt;AsyncLogger,&nbsp;Void&gt;&=
nbsp;finalize&nbsp;=3D&nbsp;&nbsp;</span></li><li class=3D"alt" s=
tyle=3D"padding:0px 3px 0px 10px !important;margin-top:8px;margin=
-right:0px !important;margin-bottom:0px !important;margin-left:40=
px;border-style:none none none solid;border-left-width:3px;border=
-left-color:rgb(108, 226, 108);list-style:decimal outside;backgro=
und-color:rgb(255, 255, 255);"><span style=3D"margin:0px;padding:=
0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;loggers.finalizeLogSegment(logToSync.getStartTxId(),=
&nbsp;logToSync.getEndTxId());&nbsp;&nbsp;</span></li><li style=3D=
"padding:0px 3px 0px 10px !important;margin-top:8px;margin-right:=
0px !important;margin-bottom:0px !important;margin-left:40px;bord=
er-style:none none none solid;border-left-width:3px;border-left-c=
olor:rgb(108, 226, 108);list-style:decimal outside;color:rgb(92,=20=
92, 92);background-color:rgb(248, 248, 248);"><span style=3D"marg=
in:0px;padding:0px;border:none;color:black;">&nbsp;&nbsp;&nbsp;&n=
bsp;loggers.waitForWriteQuorum(finalize,&nbsp;finalizeSegmentTime=
outMs,&nbsp;&nbsp;</span></li><li class=3D"alt" style=3D"padding:=
0px 3px 0px 10px !important;margin-top:8px;margin-right:0px !impo=
rtant;margin-bottom:0px !important;margin-left:40px;border-style:=
none none none solid;border-left-width:3px;border-left-color:rgb(=
108, 226, 108);list-style:decimal outside;background-color:rgb(25=
5, 255, 255);"><span style=3D"margin:0px;padding:0px;border:none;=
color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Str=
ing.format(<span class=3D"string" style=3D"margin:0px;padding:0px=
;border:none;color:blue;">"finalizeLogSegment(%s-%s)"</span><span=
 style=3D"margin:0px;padding:0px;border:none;color:black;">,&nbsp=
;&nbsp;</span></span></li><li style=3D"padding:0px 3px 0px 10px !=
important;margin-top:8px;margin-right:0px !important;margin-botto=
m:0px !important;margin-left:40px;border-style:none none none sol=
id;border-left-width:3px;border-left-color:rgb(108, 226, 108);lis=
t-style:decimal outside;color:rgb(92, 92, 92);background-color:rg=
b(248, 248, 248);"><span style=3D"margin:0px;padding:0px;border:n=
one;color:black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;logToSync.getStartTxId(),&nbsp;&nbsp;</s=
pan></li><li class=3D"alt" style=3D"padding:0px 3px 0px 10px !imp=
ortant;margin-top:8px;margin-right:0px !important;margin-bottom:0=
px !important;margin-left:40px;border-style:none none none solid;=
border-left-width:3px;border-left-color:rgb(108, 226, 108);list-s=
tyle:decimal outside;background-color:rgb(255, 255, 255);"><span=20=
style=3D"margin:0px;padding:0px;border:none;color:black;">&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
logToSync.getEndTxId()));&nbsp;&nbsp;</span></li><li style=3D"pad=
ding:0px 3px 0px 10px !important;margin-top:8px;margin-right:0px=20=
!important;margin-bottom:0px !important;margin-left:40px;border-s=
tyle:none none none solid;border-left-width:3px;border-left-color=
:rgb(108, 226, 108);list-style:decimal outside;color:rgb(92, 92,=20=
92);background-color:rgb(248, 248, 248);"><span style=3D"margin:0=
px;padding:0px;border:none;color:black;">&nbsp;&nbsp;}&nbsp;&nbsp=
;</span></li></ol></div></div></div><p style=3D"padding:0px;margi=
n:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:4=
00;text-align:justify;">=B4=FA=C2=EB=D6=D0=C1=F4=B8=F8=CE=D2=C3=C7=
=D2=BB=B8=F6=CE=CA=CC=E2=A3=AC=BE=CD=CA=C7=CA=B2=C3=B4=D1=F9=B5=C4=
log segment=CA=C7=B8=FC=BA=C3=B5=C4=A3=AC=D4=DArecover=B5=C4=B9=FD=
=B3=CC=D6=D0=B1=BB=D1=A1=CE=AA=CD=AC=B2=BD=D4=B4=C4=D8=A1=A3=CF=EA=
=CF=B8=B5=C4=C9=E8=BC=C6=BF=C9=D2=D4=B2=CE=BF=BCTodd=D0=B4=B5=C4&=
lt;&lt;Quorum-Journal Design&gt;&gt;<a href=3D"https://issues.apa=
che.org/jira/secure/attachment/12547598/qjournal-design.pdf%20%E7=
%9A%842.9%E5%92%8C2.10%E3%80%82%E5%9C%A8%E4%BB%A3%E7%A0%81%E4%B8%=
AD%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%98%AFSegmentRecoveryComparator"=20=
target=3D"_blank" style=3D"color:rgb(103, 149, 181);text-decorati=
on:none;">https://issues.apache.org/jira/secure/attachment/125475=
98/qjournal-design.pdf<span class=3D"Apple-converted-space">&nbsp=
;</span></a>=B5=C42.9=BA=CD2.10=A1=A3=D4=DA=B4=FA=C2=EB=D6=D0=B5=C4=
=CA=B5=CF=D6=CA=C7SegmentRecoveryComparator=C0=E0=A1=A3</p><p sty=
le=3D"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79=
, 79, 79);font-weight:400;text-align:justify;">=BC=F2=B5=A5=C3=E8=
=CA=F6=CF=C2=D4=AD=C0=ED=BE=CD=CA=C7=A3=BA=D3=D0finalized=B5=C4=B2=
=BB=D3=C3in-progress=B5=C4=A3=BB=C8=E7=B9=FB=D3=D0=B6=E0=B8=F6fin=
alized=B1=D8=D0=EBlength=D2=BB=D6=C2=A3=BB=C3=BB=D3=D0finalized=B5=
=C4=BF=B4=CB=AD=B5=C4epoch=B8=FC=B4=F3=A3=BB=C8=E7=B9=FB=C7=B0=C3=
=E6=B5=C4=B6=BC=D2=BB=D1=F9=BE=CD=BF=B4=CB=AD=B5=C4=D7=EE=BA=F3=D2=
=BB=B8=F6txid=B8=FC=B4=F3=A1=A3</p><p style=3D"padding:0px;margin=
:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:40=
0;text-align:justify;">=D4=DA&lt;&lt;Quorum-Journal Design&gt;&gt=
;=D6=D0=D3=D0=BE=DF=CC=E5=B5=C4=C0=FD=D7=D3=A1=A3=CE=D2=BF=B4=CD=EA=
=D5=E2=BF=E9=D6=AE=BA=F3=B8=D0=BE=F5=BA=CDHDFS append=B5=C4block=20=
recover=B9=FD=B3=CC=D6=D0=D1=A1=D4=F1=CD=AC=B2=BD=D4=B4=B5=C4=CB=BC=
=C2=B7=D3=D0=D2=EC=C7=FA=CD=AC=B9=A4=D6=AE=C3=EE=A1=A3</p><p styl=
e=3D"padding:0px;margin:0px 0px 16px;font-size:1rem;color:rgb(79,=
 79, 79);font-weight:400;text-align:justify;">=BE=AD=C0=FA=C1=CB=C9=
=CF=C3=E6=B5=C4QourumJournalManager.recoverUnfinalizedSegment()=B9=
=FD=B3=CC=A3=AC=B2=BB=CD=EA=D5=FB=B5=C4log segment=B6=BC=CA=C7=CD=
=EA=D5=FB=B5=C4=C1=CB=A3=AC=BD=D3=CF=C2=C0=B4=BE=CD=CA=C7=B5=F7=D3=
=C3NameNode.startActiveServices()-&gt;FSNamesystem.startActiveSer=
vices()-&gt;EditLogTailer.catchupDuringFailover()-&gt;EditLogTail=
er.doTailEdits()=A3=AC=D4=AD=C0=B4Standby NN=CF=C8=C8=A5=BA=CD=D4=
=AD=C0=B4Active NN=CD=AC=B2=BDEditLog=A3=AC=C8=BB=BA=F3=B0=D1Edit=
Log=D6=B4=D0=D0=A3=AC=D5=E2=CA=B1=C1=BD=CC=A8NN=C4=DA=B4=E6=CA=FD=
=BE=DD=B2=C5=D5=E6=D5=FD=D2=BB=D6=C2=A1=A3=D5=E2=C0=EF=BB=E1=B5=F7=
=D3=C3QuorumJournalManager.selectInputStreams()=B4=D3JNs=D6=D0=B6=
=C1=C8=A1EditLog=A1=A3=B6=F8=C7=D2=C4=BF=C7=B0HDFS=D6=D0=D6=BB=D3=
=D0finalized edit log=B2=C5=C4=DC=B1=BBStandby NN=B6=C1=C8=A1=B2=A2=
=D6=B4=D0=D0=A1=A3=D4=DAStandby NN=B4=D3JNs=B6=C1=C8=A1EditLog=CA=
=B1=A3=AC=CA=D7=CF=C8=CF=F2=CB=F9=D3=D0=B5=C4JN=BD=DA=B5=E3=B7=A2=
=CB=CDgetEditLogManifest() RPC=C8=A5=B6=C1=C8=A1=B4=F3=D3=DA=C4=B3=
=D2=BBtxid=B2=A2=C7=D2=D2=D1=BE=ADfinalized edit log segment=A3=AC=
=CA=D5=B5=BD=B4=F3=B6=E0=CA=FD=B7=B5=BB=D8success=A3=AC=D4=F2=B0=D1=
=D5=E2=D0=A9log segment=D5=FB=BA=CF=B3=C9=D2=BB=B8=F6RedundantEdi=
tLogInputStream=A3=AC=C8=BB=BA=F3Standby NN=D6=BB=D2=AA=CF=F2=C6=E4=
=D6=D0=B5=C4=D2=BB=CC=A8JN=B6=C1=C8=A1=CA=FD=BE=DD=BE=CD=D0=D0=C1=
=CB=A1=A3</p><p style=3D"padding:0px;margin:0px 0px 16px;font-siz=
e:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justify;"=
>=D6=C1=B4=CB=D4=AD=C0=B4=B5=C4Standby NN=CB=F9=D7=F6=B5=C4=B2=C1=
=C6=A8=B9=C9=B5=C4=B9=A4=D7=F7=BE=CD=BD=E1=CA=F8=C1=CB=A3=AC=C4=C7=
=C3=B4=CB=FC=BE=CD=D5=FD=CA=BD=B1=E4=B3=C9=C1=CBActive NN=A3=AC=BD=
=D3=CF=C2=C0=B4=BE=CD=CA=C7=D5=FD=B3=A3=B5=C4=BC=C7=C2=BC=C8=D5=D6=
=BE=B5=C4=B9=A4=D7=F7=C1=CB=A1=A3</p><h4 style=3D"padding:0px;mar=
gin:8px 0px 16px;font-size:1.25rem;color:rgb(79, 79, 79);font-wei=
ght:700;">4.3 startLogSegment</h4><p style=3D"padding:0px;margin:=
0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:400=
;text-align:justify;">NameNode.startActiveServices()-&gt;FSNamesy=
stem.startActiveServices()-&gt;FSEditLog.openForWrite()-&gt;FSEdi=
tLog.startLogSegmentAndWriteHeaderTxn()-&gt;FSEditLog.startLogSeg=
ment()-&gt;JournalSet.startLogSegment()-&gt;JournalSet.startLogSe=
gment()-&gt;QuorumJournalManager.startLogSegment()=A1=A3QJM=CF=F2=
JNs=B7=A2=CB=CDstartLogSegment RPC=B5=F7=D3=C3=A3=AC=C8=E7=B9=FB=CA=
=D5=B5=BD=B6=E0=CA=FDsuccess response=D4=F2=B3=C9=B9=A6=A3=AC=D3=C3=
=D5=E2=B8=F6AsynaLogSet=B9=B9=D4=ECQuorumOutputStream=D3=C3=D3=DA=
=D0=B4log=A1=A3</p><h4 style=3D"padding:0px;margin:8px 0px 16px;f=
ont-size:1.25rem;color:rgb(79, 79, 79);font-weight:700;">4.4 writ=
e edits</h4><p style=3D"padding:0px;margin:0px 0px 16px;font-size=
:1rem;color:rgb(79, 79, 79);font-weight:400;text-align:justify;">=
=D0=B4EditLog=B5=C4=B9=FD=B3=CC=A3=BAFSEditLog.logEdit()-&gt;Quor=
umOutputStream.write()=B0=D1Log=D0=B4=B5=BDQuorumOutputStream=B5=C4=
double buffer=C0=EF=C3=E6=A1=A3</p><p style=3D"padding:0px;margin=
:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight:40=
0;text-align:justify;">Log=B3=D6=BE=C3=BB=AF=B5=C4=B9=FD=B3=CC=A3=
=BAFSEditLog.logSync()-&gt;EditLogOutputStream.flush()-&gt;Quorum=
OutputStream.flushAndSync()=A3=AC=D4=DA=D5=E2=B8=F6=BA=AF=CA=FD=C0=
=EF=CD=A8=B9=FDAsyncLoggerSet.sendEdits()=B5=F7=D3=C3Journal RPC=B0=
=D1=B6=D4=D3=A6=B5=C4=C8=D5=D6=BE=D0=B4=B5=BDJNs=A3=AC=CD=AC=D1=F9=
=CA=C7=B4=F3=B6=E0=CA=FDsuccess response=BC=B4=C8=CF=CE=AA=B3=C9=B9=
=A6=A1=A3=C8=E7=B9=FB=B4=F3=B6=E0=CA=FD=B7=B5=BB=D8=CA=A7=B0=DC=B5=
=C4=BB=B0=A3=AC=D5=E2=B4=CElogSync=B2=D9=D7=F7=CA=A7=B0=DC=A3=AC=C4=
=C7=C3=B4NameNode=BB=E1abort=A3=AC=D2=F2=CE=AA=C3=BB=B7=A8=D5=FD=B3=
=A3=D0=B4=C8=D5=D6=BE=C1=CB=A1=A3</p><h4 style=3D"padding:0px;mar=
gin:8px 0px 16px;font-size:1.25rem;color:rgb(79, 79, 79);font-wei=
ght:700;">4.5 finalizedLogSegment</h4><p style=3D"padding:0px;mar=
gin:0px 0px 16px;font-size:1rem;color:rgb(79, 79, 79);font-weight=
:400;text-align:justify;">=C1=F7=B3=CC=BA=CDstartLogSegment=BB=F9=
=B1=BE=D2=BB=D1=F9=A1=A3</p></div></div><br><div style=3D"color:g=
ray;"><small>=C0=B4=D4=B4=A3=BA&nbsp;<a href=3D"https://blog.csdn=
.net/knowledgeaaa/article/details/23248999">https://blog.csdn.net=
/knowledgeaaa/article/details/23248999</a></small></div></article=
></div><br></div></body></html>=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A

------=_Next_Part_0000482359.101--

------=_Next_Part_0001447077.951--

