From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?tdo01cIgVGFza01hbmFnZXI=?=
Date: Date: Fri, 23 Jul 2021 05:55:33 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0001441263.642"

This is a multi-part message in MIME format.

------=_Next_Part_0001441263.642
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0000480421.002"


------=_Next_Part_0000480421.002
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0000480421.002
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A=0A=0A=0A=0A<titl=
e>=B5=DA4=D5=C2 TaskManager</title>=0A    =0A<style id=3D"wiz_cus=
tom_css">html, .wiz-editor-body {font-size: 12pt;}.wiz-editor-bod=
y {font-family: Helvetica, 'Hiragino Sans GB', '=E5=BE=AE=E8=BD=AF=
=E9=9B=85=E9=BB=91', 'Microsoft YaHei UI', SimSun, SimHei, arial,=
 sans-serif;line-height: 1.7;margin: 0 auto;padding: 20px 16px;pa=
dding: 1.25rem 1rem;}.wiz-editor-body h1,.wiz-editor-body h2,.wiz=
-editor-body h3,.wiz-editor-body h4,.wiz-editor-body h5,.wiz-edit=
or-body h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding:=
 0;font-weight: bold;}.wiz-editor-body h1 {font-size:20pt;font-si=
ze:1.67rem;}.wiz-editor-body h2 {font-size:18pt;font-size:1.5rem;=
}.wiz-editor-body h3 {font-size:15pt;font-size:1.25rem;}.wiz-edit=
or-body h4 {font-size:14pt;font-size:1.17rem;}.wiz-editor-body h5=
 {font-size:12pt;font-size:1rem;}.wiz-editor-body h6 {font-size:1=
2pt;font-size:1rem;color: #777777;margin: 1rem 0;}.wiz-editor-bod=
y div,.wiz-editor-body p,.wiz-editor-body ul,.wiz-editor-body ol,=
.wiz-editor-body dl,.wiz-editor-body li {margin:8px 0;}.wiz-edito=
r-body blockquote,.wiz-editor-body table,.wiz-editor-body pre,.wi=
z-editor-body code {margin:8px 0;}.wiz-editor-body .CodeMirror pr=
e {margin:0;}.wiz-editor-body ul,.wiz-editor-body ol {padding-lef=
t:32px;padding-left:2rem;}.wiz-editor-body ol.wiz-list-level1 > l=
i {list-style-type:decimal;}.wiz-editor-body ol.wiz-list-level2 >=
 li {list-style-type:lower-latin;}.wiz-editor-body ol.wiz-list-le=
vel3 > li {list-style-type:lower-roman;}.wiz-editor-body blockquo=
te {padding: 0 12px;}.wiz-editor-body blockquote > :first-child {=
margin-top:0;}.wiz-editor-body blockquote > :last-child {margin-b=
ottom:0;}.wiz-editor-body img {border:0;max-width:100%;height:aut=
o !important;margin:2px 0;}.wiz-editor-body table {border-collaps=
e:collapse;border:1px solid #bbbbbb;}.wiz-editor-body td,.wiz-edi=
tor-body th {padding:4px 8px;border-collapse:collapse;border:1px=20=
solid #bbbbbb;min-height:28px;word-break:break-word;box-sizing: b=
order-box;}.wiz-hide {display:none !important;}</style></head>=0A=
=0A<body class=3D"wiz-editor-body" spellcheck=3D"false" ><div></d=
iv><h2 class=3D"rich_media_title" id=3D"activity-name" style=3D"f=
ont-size: 1.375rem; color: rgb(51, 51, 51);"></h2><div id=3D"img-=
content" class=3D"rich_media_wrp" style=3D"color: rgb(51, 51, 51)=
;"><h2 class=3D"rich_media_title" id=3D"activity-name" style=3D"f=
ont-size:1.375rem;">=B5=DA4=D5=C2 TaskManager</h2></div><div id=3D=
"meta_content" class=3D"rich_media_meta_list" style=3D"color:rgb(=
51, 51, 51);font-size:0rem"><span id=3D"copyright_logo" class=3D"=
rich_media_meta icon_appmsg_tag appmsg_title_tag" style=3D"font-s=
ize: 0.75rem; color: rgba(0, 0, 0, 0.298039); background: rgb(242=
, 242, 242);">=D4=AD=B4=B4</span><span>&nbsp;</span><span class=3D=
"rich_media_meta rich_media_meta_text" style=3D"font-size:0.938re=
m;color:rgba(0, 0, 0, 0.3);">=B4=F3=CA=FD=BE=DD=BC=BC=CA=F5=D3=EB=
=BC=DC=B9=B9</span><span>&nbsp;</span><span class=3D"rich_media_m=
eta rich_media_meta_nickname" id=3D"profileBt" style=3D"font-size=
:0.938rem;"><a href=3D"" id=3D"js_name" style=3D"color:rgb(87, 10=
7, 149);text-decoration:none;">=B4=F3=CA=FD=BE=DD=BC=BC=CA=F5=D3=EB=
=BC=DC=B9=B9</a></span><span>&nbsp;</span><em id=3D"publish_time"=
 class=3D"rich_media_meta rich_media_meta_text" style=3D"font-siz=
e:0.938rem;color:rgba(0, 0, 0, 0.3);">2019-02-09</em></div><p sty=
le=3D"color:rgb(51, 51, 51);font-size:1.063rem;text-align:justify=
"><span style=3D"font-size: 1rem; color: rgb(36, 41, 46);">TaskMa=
nager =D4=DA Flink =D6=D0=D2=B2=B1=BB=BD=D0=D7=F6=D2=BB=B8=F6 Ins=
tance=A3=AC=CD=B3=D2=BB=B9=DC=C0=ED=B8=C3=CE=EF=C0=ED=BD=DA=B5=E3=
=C9=CF=B5=C4=CB=F9=D3=D0 Flink job =B5=C4 task =B5=C4=D4=CB=D0=D0=
=A3=AC=CB=FC=B5=C4=B9=A6=C4=DC=B0=FC=C0=A8=C1=CB task =B5=C4=C6=F4=
=B6=AF=CF=FA=BB=D9=A1=A2=C4=DA=B4=E6=B9=DC=C0=ED=A1=A2=B4=C5=C5=CC=
IO=A1=A2=CD=F8=C2=E7=B4=AB=CA=E4=B9=DC=C0=ED=B5=C8=A3=AC=B1=BE=D5=
=C2=BD=AB=D2=BB=D2=BB=BD=E9=C9=DC=D5=E2=D0=A9=B9=A6=C4=DC=A3=AC=B7=
=BD=C3=E6=BA=F3=D0=F8=D5=C2=BD=DA=B5=C4=BF=AA=D5=B9</span></p><p=20=
style=3D"color:rgb(51, 51, 51);font-size:1.063rem;text-align:just=
ify"><span style=3D"font-size: 1rem; color: rgb(36, 41, 46);"><sp=
an style=3D"font-size: 1.5rem;">MemoryManager&nbsp;</span></span>=
</p><p style=3D"color:rgb(51, 51, 51);font-size:1.063rem;text-ali=
gn:justify"><span style=3D"color: rgb(36, 41, 46);">MemoryManager=
 =CD=B3=D2=BB=B9=DC=C0=ED=C1=CB flink =B5=C4=C4=DA=B4=E6=CA=B9=D3=
=C3=A3=AC=C4=DA=B4=E6=B1=BB=BB=AE=B7=D6=CE=AA=CF=E0=CD=AC=B4=F3=D0=
=A1=B5=C4 segment=A3=AC=CD=A8=B9=FD=C9=EA=C7=EB=B2=BB=CD=AC=CA=FD=
=C1=BF=B5=C4 segment =C0=B4=B7=D6=C5=E4=B2=BB=CD=AC=B4=F3=D0=A1=B5=
=C4=C4=DA=B4=E6</span></p><p style=3D"color:rgb(51, 51, 51);font-=
size:1.063rem;text-align:justify"><span style=3D"color: rgb(36, 4=
1, 46);">=D5=E2=C0=EF=D6=A7=B3=D6=C1=BD=D6=D6=C4=DA=B4=E6=A3=BAon=
-heap =C4=DA=B4=E6=BA=CD off-heap =C4=DA=B4=E6=A3=AC=CD=A8=B9=FD=B2=
=CE=CA=FD=BF=C9=D2=D4=BF=D8=D6=C6=B7=D6=C5=E4=C4=DA=B4=E6=B5=C4=D6=
=D6=C0=E0</span></p><p style=3D"color:rgb(51, 51, 51);font-size:1=
.063rem;text-align:justify"><span style=3D"color: rgb(36, 41, 46)=
;">MemoryManager =B9=DC=C0=ED=C4=DA=B4=E6=D2=B2=B7=D6=C1=BD=D6=D6=
=C4=A3=CA=BD=A3=BA=D4=A4=B7=D6=C5=E4=BA=CD=B0=B4=D0=E8=B7=D6=C5=E4=
=A1=A3=D4=A4=B7=D6=C5=E4=C4=A3=CA=BD=CF=C2=A3=AC=C4=DA=B4=E6=D4=DA=
=C6=F4=B6=AF=CA=B1=BE=CD=BB=E1=B7=D6=BA=C3=A3=AC=D5=E2=BE=CD=BB=E1=
=D2=E2=CE=B6=D7=C5=B2=BB=BB=E1=B7=A2=C9=FA OOM =D2=EC=B3=A3=A3=AC=
=CA=CD=B7=C5=B5=C4=C4=DA=B4=E6=BB=E1=D6=D8=D0=C2=B9=E9=BB=B9 Memo=
ryManager =B5=C4=C4=DA=B4=E6=B3=D8=A3=BB=B0=B4=D0=E8=C4=A3=CA=BD=CF=
=C2=A3=ACMemoryManager =BD=F6=BD=F6=D7=B7=D7=D9=C4=DA=B4=E6=B5=C4=
=CA=B9=D3=C3=A1=BE=D7=F6=BC=C7=C2=BC=A1=BF=A3=AC=CA=CD=B7=C5=C4=DA=
=B4=E6=B2=BB=BB=E1=B9=E9=BB=B9 MemoryManager =B5=C4=C4=DA=B4=E6=B3=
=D8=A3=AC=B6=F8=CA=C7=CD=A8=B9=FD=CD=D0=B9=DC=B8=F8 JVM =B5=C4=C0=
=AC=BB=F8=BB=D8=CA=D5=C0=B4=D7=EE=D6=D5=CA=CD=B7=C5=A3=AC=D5=E2=D1=
=F9=B1=E3=BF=C9=C4=DC=BB=E1=B7=A2=C9=FA OOM</span></p><p style=3D=
"color:rgb(51, 51, 51);font-size:1.063rem;text-align:justify"><sp=
an style=3D"color:rgb(36, 41, 46);">=CF=C2=C3=E6=CE=D2=C3=C7=BE=CD=
=C0=B4=B7=D6=CE=F6=CF=C2 MemoryManager =B5=C4=CA=B5=CF=D6=CF=B8=BD=
=DA</span></p><div class=3D"rich_media_content" id=3D"js_content"=
 style=3D"color:rgb(51, 51, 51);font-size:1.063rem;text-align:jus=
tify"><h3 style=3D"font-size:1.25rem;"><span style=3D"color: rgb(=
36, 41, 46);">MemorySegment</span></h3><p><span style=3D"color: r=
gb(36, 41, 46);">=C9=CF=C3=E6=D2=D1=BE=AD=CC=E1=B5=BD=A3=ACMemory=
Manager =D2=D4 segment =CE=AA=B5=A5=CE=BB=C0=B4=CA=B5=CF=D6=C4=DA=
=B4=E6=B5=C4=B7=D6=C5=E4=BA=CD=B9=DC=C0=ED=A3=AC=D4=DA flink =D6=D0=
=D2=BB=B8=F6 segment =B1=BB=B3=E9=CF=F3=CE=AA MemorySegment=A3=AC=
MemorySegment =CE=AA=B3=E9=CF=F3=C0=E0=A3=AC=B6=A8=D2=E5=C1=CB=BB=
=F9=B1=BE=B5=C4 put/get =B7=BD=B7=A8=A3=AC=D2=D4=BC=B0 swap=A1=A2=
compare =B5=C8=B9=A4=BE=DF=B7=BD=B7=A8=A3=AC=CD=AC=CA=B1=CE=AC=BB=
=A4=C1=CB=D2=BB=B8=F6=C6=AB=D2=C6=C1=BF=A3=BABYTE_ARRAY_BASE_OFFS=
ET=A3=AC=D5=E2=B8=F6=C6=AB=D2=C6=C1=BF=CE=AA byte[] =B6=D4=CF=F3=D4=
=DA=C4=DA=B4=E6=D6=D0=B5=C4=BB=F9=B1=BE=C6=AB=D2=C6=C1=BF=A3=AC=BA=
=F3=D0=F8=CD=A8=B9=FD&nbsp;</span><span style=3D"font-size: 0.85r=
em; color: rgb(36, 41, 46); background-color: rgba(27, 31, 35, 0.=
0470588);">sun.misc.Unsafe</span><span style=3D"color: rgb(36, 41=
, 46);">&nbsp;=D6=B1=BD=D3=B2=D9=D7=DD=C4=DA=B4=E6=BE=CD=CA=C7=BB=
=F9=D3=DA=D5=E2=B8=F6=C6=AB=D2=C6=C1=BF=C0=B4=CD=EA=B3=C9=A3=AC=D5=
=E2=B8=F6=C0=E0=B6=A8=D2=E5=B5=C4=CA=B5=CF=D6=B7=BD=B7=A8=C6=C1=B1=
=CE=C1=CB=C4=DA=B4=E6=B5=C4=D6=D6=C0=E0=A1=BE=B6=D1=BA=CD=B7=C7=B6=
=D1=A1=BF=A3=AC=B5=B1=C6=E4=B3=C9=D4=B1=B1=E4=C1=BF heapMemory =B2=
=BB=CE=AA=BF=D5=CA=B1=BE=CD=CA=C7=B6=D1=C4=DA=B4=E6=A3=AC=B4=CB=CA=
=B1=B5=C4 address =BE=CD=CA=C7 BYTE_ARRAY_BASE_OFFSET=A3=BB=B6=F8=
 heapMemory =CE=AA null =CA=B1=B4=FA=B1=ED=B7=C7=B6=D1=C4=DA=B4=E6=
=A3=AC=B4=CB=CA=B1=B5=C4 address =CA=C7=C4=DA=B4=E6=D6=D0=B5=C4=BE=
=F8=B6=D4=B5=D8=D6=B7=A1=A3</span></p><p><span style=3D"color: rg=
b(36, 41, 46);">MemorySegment =D3=D0=C1=BD=B8=F6=CA=B5=CF=D6=C0=E0=
=A3=BAHeapMemorySegment =BA=CD HibridMemorySegment=A3=AC=B7=D6=B1=
=F0=B4=FA=B1=ED=B6=D1=C4=DA=B4=E6 segment =BA=CD =B7=C7=B6=D1=C4=DA=
=B4=E6 segment=A3=AC=BE=DF=CC=E5=B5=C4=BC=CC=B3=D0=B9=D8=CF=B5=C8=
=E7=CF=C2=A3=BA</span></p><p><span style=3D"color: rgb(36, 41, 46=
);"><span style=3D"font-size: 1rem;"><img data-ratio=3D"0.5804066=
543438078"  data-type=3D"png" data-w=3D"2164" width=3D"993" src=3D=
"640_49.jpg" data-fail=3D"0"></span></span></p><p><span style=3D"=
color: rgb(36, 41, 46);"><span style=3D"font-size: 1rem;"><span>H=
eapMemorySegment =BA=CD HibridMemorySegment =D6=D0=B6=BC=B7=D6=B1=
=F0=B6=A8=D2=E5=C1=CB=B9=A4=B3=A7=C0=E0=C0=B4=CA=B5=C0=FD=BB=AF=B6=
=D4=CF=F3=CA=B5=C0=FD=A1=A3</span></span></span></p><h3 style=3D"=
font-size:1.25rem;"><span style=3D"color: rgb(36, 41, 46);">Memor=
yPool</span></h3><p><span style=3D"color: rgb(36, 41, 46);">Memor=
yPool =CA=C7 MemoryManager =D3=C3=C0=B4=CD=B3=D2=BB=B9=DC=C0=ED=D7=
=CA=D4=B4=B5=C4=D7=E9=BC=FE=A3=AC=BE=DF=CC=E5=D3=D6=B7=D6=CE=AA H=
eapMemoryPool =BA=CD HybridOffHeapMemoryPool=A3=AC=C7=B0=D5=DF=B9=
=DC=C0=ED=B6=D1=C4=DA=B4=E6=A3=AC=BA=F3=D5=DF=B9=DC=C0=ED=B7=C7=B6=
=D1=C4=DA=B4=E6=A1=A3</span></p><p><span style=3D"color:rgb(36, 4=
1, 46);">=CF=C8=C0=B4=BF=B4HeapMemoryPool</span></p><blockquote s=
tyle=3D"color:rgba(0, 0, 0, 0.5);font-size:0.938rem;"><p><span st=
yle=3D"font-size: 0.85rem; color: rgb(106, 115, 125);">//</span><=
span style=3D"font-size: 0.85rem; color: rgb(106, 115, 125);">Mem=
oryManager line 677</span></p><p><span style=3D"font-size:0.75rem=
;color:rgb(128, 128, 0);font-family:Menlo;">@Override</span></p><=
p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family=
:Menlo;">MemorySegment allocateNewSegment(Object owner) {</span><=
/p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fa=
mily:Menlo;">&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">retur=
n</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color=
:rgb(0, 0, 0);font-family:Menlo;">MemorySegmentFactory.</span><sp=
an style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menl=
o;font-style:italic;">allocateUnpooledOffHeapMemory</span><span s=
tyle=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">=
(</span><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);=
font-family:Menlo;">segmentSize</span><span style=3D"font-size:0.=
75rem;color:rgb(0, 0, 0);font-family:Menlo;">, owner);</span></p>=
<p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-famil=
y:Menlo;">}</span></p><p><span style=3D"font-size:0.75rem;color:r=
gb(128, 128, 0);font-family:Menlo;">@Override</span></p><p><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;"=
>MemorySegment requestSegmentFromPool(Object owner) {</span></p><=
p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family=
:Menlo;">&nbsp;&nbsp; ByteBuffer buf =3D</span><span>&nbsp;</span=
><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-fa=
mily:Menlo;">availableMemory</span><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 0);font-family:Menlo;">.remove();</span></p><p=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font=
-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">return</sp=
an><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(=
0, 0, 0);font-family:Menlo;">MemorySegmentFactory.</span><span st=
yle=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;fon=
t-style:italic;">wrapPooledOffHeapMemory</span><span style=3D"fon=
t-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(buf, owner=
);</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0,=20=
0);font-family:Menlo;">}</span></p><p><span style=3D"font-size:0.=
75rem;color:rgb(128, 128, 0);font-family:Menlo;">@Override</span>=
</p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font=
-family:Menlo;">void</span><span>&nbsp;</span><span style=3D"font=
-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">returnSegmen=
tToPool(MemorySegment segment) {</span></p><p><span style=3D"font=
-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;=
</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:=
rgb(0, 0, 128);font-family:Menlo;">if</span><span>&nbsp;</span><s=
pan style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Men=
lo;">(segment.getClass() =3D=3D HybridMemorySegment.</span><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo=
;">class</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0=
);font-family:Menlo;">) {</span></p><p><span style=3D"font-size:0=
.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; HybridMemorySegment hybridSegment =3D (HybridMemorySe=
gment) segment;</span></p><p><span style=3D"font-size:0.75rem;col=
or:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
; ByteBuffer buf =3D hybridSegment.getOffHeapBuffer();</span></p>=
<p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-famil=
y:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span=
><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-fa=
mily:Menlo;">availableMemory</span><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 0);font-family:Menlo;">.add(buf);</span></p><p=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hybridSegment.free();</spa=
n></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font=
-family:Menlo;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-s=
ize:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</=
span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 128);font-family:Menlo;">else</span><span>&nbsp;</span><s=
pan style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Men=
lo;">{</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0,=
 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><=
span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0=
, 128);font-family:Menlo;">throw new</span><span>&nbsp;</span><sp=
an style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menl=
o;">IllegalArgumentException(</span><span style=3D"font-size:0.75=
rem;color:rgb(0, 128, 0);font-family:Menlo;">"Memory segment is n=
ot a "</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;=
color:rgb(0, 0, 0);font-family:Menlo;">+ HybridMemorySegment.</sp=
an><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-fam=
ily:Menlo;">class</span><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 0);font-family:Menlo;">.getSimpleName());</span></p><p><s=
pan style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Men=
lo;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-size:0.75rem=
;color:rgb(0, 0, 0);font-family:Menlo;">}</span></p></blockquote>=
<p><span style=3D"color: rgb(36, 41, 46);">=BC=F2=B5=A5=D7=DC=BD=E1=
=A3=BA</span></p><ul class=3D"list-paddingleft-2"><li><p><span st=
yle=3D"color: rgb(36, 41, 46);">allocateNewSegment =D7=DF=B5=C4=CA=
=C7 on demand =C4=A3=CA=BD=A3=AC=CD=A8=B9=FD new byte[] =B4=D3=B6=
=D1=C9=CF=B7=D6=C5=E4=C4=DA=B4=E6</span></p></li><li><p><span sty=
le=3D"color: rgb(36, 41, 46);">requestSegmentFromPool =D7=DF=B5=C4=
=CA=C7 pre allocate =C4=A3=CA=BD=A3=AC=CD=A8=B9=FD=B8=B4=D3=C3=D2=
=D1=D3=D0=B5=C4=B6=D1=B6=D4=CF=F3</span></p></li></ul><p><span st=
yle=3D"color: rgb(36, 41, 46);">HybridOffHeapMemoryPool =B5=C4=BD=
=D3=BF=DA=D3=EB=C6=E4=C0=E0=CB=C6=A3=AC=B2=BB=B9=FD=B7=D6=C5=E4=C4=
=DA=B4=E6=D7=DF=B5=C4=CA=C7&nbsp;</span><span style=3D"font-size:=
 0.85rem; color: rgb(36, 41, 46); background-color: rgba(27, 31,=20=
35, 0.0470588);">ByteBuffer.allocateDirect(segmentSize);</span><s=
pan style=3D"color: rgb(36, 41, 46);">&nbsp;=D6=B1=BD=D3=B7=D6=C5=
=E4=C1=CB=CE=EF=C0=ED=C4=DA=B4=E6=A3=AC=D2=B2=BE=CD=CA=C7=B7=C7=B6=
=D1=C4=DA=B4=E6</span></p><h2 style=3D"font-size:1.5rem;"><span s=
tyle=3D"color: rgb(36, 41, 46);">IOManager</span></h2><p><span st=
yle=3D"color: rgb(36, 41, 46);">flink =CD=A8=B9=FD IOManager =C0=B4=
=BF=D8=D6=C6=B4=C5=C5=CC IO =B5=C4=B9=FD=B3=CC=A3=AC=CC=E1=B9=A9=CD=
=AC=B2=BD=BA=CD=D2=EC=B2=BD=C1=BD=D6=D6=D0=B4=C4=A3=CA=BD=A1=BE=C6=
=E4=CA=B5=D6=BB=D3=D0=D2=EC=B2=BD=A1=BF=A3=AC=BE=DF=CC=E5=B5=C4=B6=
=C1=D0=B4=B7=BD=CA=BD=D3=D6=B7=D6=CE=AA block=A1=A2buffer=A1=A2bu=
lk =C8=FD=D6=D6=B7=BD=CA=BD=A3=BB=D3=C3=BB=A7=BF=C9=D2=D4=D6=B8=B6=
=A8 IO =B5=C4=CE=C4=BC=FE=C4=BF=C2=BC=BC=AF=BA=CF=A3=ACIOManager=20=
=BB=E1=D2=D4 round-robin =B5=C4=B7=BD=CA=BD=D0=B4=B2=BB=CD=AC=C4=BF=
=C2=BC=B5=C4=B2=BB=CD=AC=CE=C4=BC=FE=A1=A3</span></p><p><span sty=
le=3D"color: rgb(36, 41, 46);">IOManager =CC=E1=B9=A9=C1=BD=D6=D6=
=B7=BD=CA=BD=C3=B6=BE=D9=D0=C2=B5=C4 IO =CE=C4=BC=FE=A3=BA</span>=
</p><ul class=3D"list-paddingleft-2"><li><p><span style=3D"color:=
 rgb(36, 41, 46);">=D6=B1=BD=D3 round-robin =CE=C4=BC=FE=BC=D0=B2=
=A2=C9=FA=B3=C9=CE=C4=BC=FE=A3=AC=C3=BF=B8=F6=D0=C2=CE=C4=BC=FE=B5=
=C4=C3=FC=C3=FB pattern =CE=AA random_hex_string.channel=A3=AC=D7=
=EE=D6=D5=B6=D4=D3=A6=B5=C4=C4=BF=C2=BC=BD=E1=B9=B9=CA=C7=A3=BA</=
span></p><p><span style=3D"color: rgb(36, 41, 46);">path1/random_=
hex_string1.channel</span></p><p><span style=3D"color: rgb(36, 41=
, 46);">path2/random_hex_string2.channel</span></p><p><span style=
=3D"color: rgb(36, 41, 46);">path3/random_hex_string3.channel</sp=
an></p></li><li><p><span style=3D"color: rgb(36, 41, 46);">=B2=C9=
=C8=A1 Enumerator =B5=C4=C4=A3=CA=BD=A3=AC=C3=BF=B8=F6 Enumerator=
 =D2=B2=CA=C7=C0=E0=CB=C6=C8=E7=C9=CF=D2=BB=D6=D6=B7=BD=CA=BD=BD=F8=
=D0=D0 round-robin=A3=AC=B2=BB=B9=FD Enumerator =BB=E1=CE=AC=BB=A4=
=D2=BB=B8=F6=B9=CC=B6=A8=B5=C4=B1=BE=B5=D8=C3=FC=C3=FB=C7=B0=D7=BA=
=A1=A2=D2=BB=B8=F6=B1=BE=B5=D8=BC=C6=CA=FD=C6=F7=A1=A2=D2=BB=B8=F6=
=C8=AB=BE=D6=BC=C6=CA=FD=C6=F7=A3=AC=C3=FC=C3=FB=C7=B0=D7=BA=D3=C3=
=D3=DA=C7=F8=B7=D6=B2=BB=CD=AC=B5=C4 Enumerator =D0=B4=B5=C4=CE=C4=
=BC=FE=A3=AC=B1=BE=B5=D8=BC=C6=CA=FD=C6=F7=D3=C3=D3=DA Enumerator=
 =D7=D4=C9=ED=B5=C4=CE=C4=BC=FE=C3=FC=C3=FB=B5=DD=D4=F6=A3=AC=C8=AB=
=BE=D6=BC=C6=CA=FD=C6=F7=D3=C3=D3=DA round-robin =CE=C4=BC=FE=BC=D0=
=A3=AC=D7=EE=D6=D5=B5=C4=C4=BF=C2=BC=BD=E1=B9=B9=CA=C7=A3=BA</spa=
n></p><p><span style=3D"color: rgb(36, 41, 46);">path1/prefix.loc=
al_counter1.channel</span></p><p><span style=3D"color: rgb(36, 41=
, 46);">path2/prefix.local_counter2.channel</span></p><p><span st=
yle=3D"color: rgb(36, 41, 46);">path3/prefix.local_counter3.chann=
el</span></p></li></ul><p><span style=3D"color: rgb(36, 41, 46);"=
>flink =D3=D6=BD=F8=D2=BB=B2=BD=BD=AB=D2=BB=B8=F6=CE=C4=BC=FE=B5=C4=
 IO =B3=E9=CF=F3=B3=C9=C1=CB FileIOChannel=A3=AC=CD=A8=B9=FD File=
IOChannel =B7=E2=D7=B0=C1=CB=B5=D7=B2=E3=B5=C4=CE=C4=BC=FE=B6=C1=D0=
=B4=A3=AC=BE=DF=CC=E5=B5=C4=BC=CC=B3=D0=B9=D8=CF=B5=C8=E7=CF=C2=A3=
=BA</span></p><p><span style=3D"font-size: 1rem; color: rgb(36, 4=
1, 46);"><img data-ratio=3D"0.8067331670822943"  data-type=3D"png=
" data-w=3D"1604" width=3D"978" src=3D"640_50.jpg" data-fail=3D"0=
"></span></p><p><span style=3D"font-size: 1rem; color: rgb(36, 41=
, 46);"><span>IOManager =B5=C4=CE=A8=D2=BB=CA=B5=CF=D6=C0=E0=A3=BA=
IOManagerAsync =CE=AA=C3=BF=B8=F6=C8=CB=C1=D9=CA=B1=CE=C4=BC=FE=BC=
=D3=A1=BE=D3=C3=BB=A7=B3=F5=CA=BC=BB=AF=B5=C4=CA=B1=BA=F2=D6=B8=B6=
=A8=A1=BF=CE=AC=BB=A4=C1=CB=D2=BB=B8=F6=B6=C1=CF=DF=B3=CC=BA=CD=D0=
=B4=CF=DF=B3=CC=A3=AC=B2=A2=C7=D2=C3=BF=B8=F6=B6=C1=D0=B4=CF=DF=B3=
=CC=C4=DA=B2=BF=BB=E1=CE=AC=BB=A4=D2=BB=B8=F6=C7=EB=C7=F3=B6=D3=C1=
=D0: RequestQueue=A3=AC=C9=CF=C3=E6=B5=C4 FileIOChannel =CD=A8=B9=
=FD=BD=AB =B6=C1=D0=B4=C7=EB=C7=F3=BC=D3=C8=EB=B5=BD=B6=D4=D3=A6=B5=
=C4 RequestQueue =D6=D0=C0=B4=CA=B5=CF=D6=CE=C4=BC=FE=B6=C1=D0=B4=
=A3=AC=BE=DF=CC=E5=B5=C4=CF=DF=B3=CC=C4=A3=D0=CD=C8=E7=CF=C2=A3=BA=
</span></span></p><p><span style=3D"font-size: 1rem; color: rgb(3=
6, 41, 46);"><span><span><img data-ratio=3D"0.5571955719557196" =20=
data-type=3D"png" data-w=3D"1626" width=3D"828" src=3D"640_51.jpg=
" data-fail=3D"0"></span></span></span></p><p><span style=3D"colo=
r: rgb(36, 41, 46);">ps: =C4=AC=C8=CF=B5=C4=C1=D9=CA=B1=CE=C4=BC=FE=
=BC=D0=C4=BF=C2=BC=CA=C7 java.io.tmpDir</span></p><h2 style=3D"fo=
nt-size:1.5rem;"><span style=3D"color: rgb(36, 41, 46);">NetworkE=
nvironment</span></h2><p><span style=3D"color: rgb(36, 41, 46);">=
NetworkEnvironment =CA=C7=C3=BF=B8=F6 Instance =B5=C4=CD=F8=C2=E7=
 IO =D7=E9=BC=FE=A3=AC=B0=FC=BA=AC=C1=CB=D7=B7=D7=D9=D6=D0=BC=E4=BD=
=E1=B9=FB=BA=CD=CA=FD=BE=DD=BD=BB=BB=BB=B5=C4=CA=FD=BE=DD=BD=E1=B9=
=B9=A1=A3=CB=FC=B5=C4=B9=B9=D4=EC=C6=F7=BB=E1=CD=B3=D2=BB=BD=AB=C5=
=E4=D6=C3=B5=C4=C4=DA=B4=E6=CF=C8=B7=D6=C5=E4=B3=F6=C0=B4=A3=AC=B3=
=E9=CF=F3=B3=C9 NetworkBufferPool =CD=B3=D2=BB=B9=DC=C0=ED=C4=DA=B4=
=E6=B5=C4=C9=EA=C7=EB=BA=CD=CA=CD=B7=C5=A1=A3</span></p><h3 style=
=3D"font-size:1.25rem;"><span style=3D"color: rgb(36, 41, 46);">B=
ufferPool</span></h3><p><span style=3D"color: rgb(36, 41, 46);">=B4=
=D3 MemoryManager =B5=C4=BD=E9=C9=DC=D6=D0=CE=D2=C3=C7=BD=B2=B5=BD=
 flink =CA=C7=D2=D4 MemorySegment =CE=AA=B5=A5=CE=BB=C0=B4=B9=DC=C0=
=ED=C4=DA=B4=E6=B5=C4=A3=AC=B6=F8=D2=BB=B8=F6 MemorySegment =D3=D6=
=B1=BB=BD=D0=D7=F6=D2=BB=B8=F6 Buffer=A1=A3BufferPool =CA=C7=B9=DC=
=C0=ED Buffer =B5=C4=B9=A4=BE=DF=A1=A3Buffer =B5=C4=C9=EA=C7=EB=CD=
=B3=D2=BB=BD=BB=B8=F8 NetworkBufferPool=A3=AC=BE=DF=CC=E5=B5=C4=B9=
=DC=C0=ED=BD=BB=B8=F8 LocalBufferPool=A1=A3</span></p><h4 style=3D=
"font-size:1rem;"><span style=3D"color:rgb(36, 41, 46);">LocalBuf=
ferPool</span></h4><p><span style=3D"color: rgb(36, 41, 46);">=CE=
=D2=C3=C7=C0=B4=BF=B4 LocalBufferPool =B5=C4=B9=D8=BC=FC=BD=D3=BF=
=DA=A3=AC=D2=D4=C1=CB=BD=E2=BE=DF=CC=E5=B6=BC=D3=D0=C4=C4=D0=A9=B7=
=BD=CA=BD=C0=B4=B9=DC=C0=ED Buffer =A1=A3</span></p><p><span styl=
e=3D"color: rgb(36, 41, 46);">=C9=EA=C7=EBbuffer</span></p><block=
quote style=3D"color:rgba(0, 0, 0, 0.5);font-size:0.938rem;"><p><=
span style=3D"font-size: 0.85rem; color: rgb(106, 115, 125);">//<=
/span><span style=3D"font-size: 0.85rem; color: rgb(106, 115, 125=
);">LocalBufferPool line201</span></p><p><span style=3D"font-size=
:0.75rem;color:rgb(128, 128, 0);font-family:Menlo;">@Override</sp=
an></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);f=
ont-family:Menlo;">public</span><span>&nbsp;</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">Buffer=20=
requestBuffer()</span><span>&nbsp;</span><span style=3D"font-size=
:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">throws</span><s=
pan>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0,=
 0);font-family:Menlo;">IOException {</span></p><p><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&=
nbsp;</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;c=
olor:rgb(0, 0, 128);font-family:Menlo;">try</span><span>&nbsp;</s=
pan><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fami=
ly:Menlo;">{</span></p><p><span style=3D"font-size:0.75rem;color:=
rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</=
span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 128);font-family:Menlo;">return</span><span>&nbsp;</span>=
<span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:M=
enlo;">toBuffer(requestMemorySegment(</span><span style=3D"font-s=
ize:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">false</span>=
<span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:M=
enlo;">));</span></p><p><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp; }</span></p><p><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;"=
>&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font-size:0=
.75rem;color:rgb(0, 0, 128);font-family:Menlo;">catch</span><span=
>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0)=
;font-family:Menlo;">(InterruptedException e) {</span></p><p><spa=
n style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo=
;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo=
;">throw new</span><span>&nbsp;</span><span style=3D"font-size:0.=
75rem;color:rgb(0, 0, 0);font-family:Menlo;">IOException(e);</spa=
n></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font=
-family:Menlo;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-s=
ize:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">}</span></p><p=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">//</span><span style=3D"font-size: 0.85rem; color: rgb(10=
6, 115, 125);">LocalBufferPool line221</span></p><p><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">priva=
te</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 0);font-family:Menlo;">Buffer toBuffer(MemorySegment=20=
memorySegment) {</span></p><p><span style=3D"font-size:0.75rem;co=
lor:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</span><span>&nb=
sp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);f=
ont-family:Menlo;">if</span><span>&nbsp;</span><span style=3D"fon=
t-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(memorySegm=
ent =3D=3D</span><span>&nbsp;</span><span style=3D"font-size:0.75=
rem;color:rgb(0, 0, 128);font-family:Menlo;">null</span><span sty=
le=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">)=20=
{</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0=
);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>=
&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128=
);font-family:Menlo;">return null</span><span style=3D"font-size:=
0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">;</span></p><p><sp=
an style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menl=
o;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-size:0.75rem;=
color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</span><span>&=
nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128)=
;font-family:Menlo;">return new</span><span>&nbsp;</span><span st=
yle=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">N=
etworkBuffer(memorySegment,</span><span>&nbsp;</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">this<=
/span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fa=
mily:Menlo;">);</span></p><p><span style=3D"font-size:0.75rem;col=
or:rgb(0, 0, 0);font-family:Menlo;">}</span></p></blockquote><p><=
span style=3D"color: rgb(36, 41, 46);">=D7=DC=BD=E1=C6=E4=C2=DF=BC=
=AD=A3=BA</span></p><ul class=3D"list-paddingleft-2"><li><p><span=
 style=3D"color: rgb(36, 41, 46);">=C9=EA=C7=EB Buffer</span></p>=
</li><li><p><span style=3D"color: rgb(36, 41, 46);">=CA=CD=B7=C5=B3=
=AC=C1=BF=C9=EA=C7=EB=B5=C4 Buffer</span></p></li><li><p><span st=
yle=3D"color: rgb(36, 41, 46);">=CF=F1 NetworkBufferPool =C9=EA=C7=
=EB Buffer</span></p></li><li><p><span style=3D"color: rgb(36, 41=
, 46);">=C8=E7=B9=FB=B4=CB LocalBufferPool =D3=D0 owner=A1=BEResu=
ltPartition=A1=BF=A3=AC=CF=F1 ResultPartition =CA=CD=B7=C5=C4=DA=B4=
=E6=A3=AC=D5=E2=C0=EF=D3=D6=BB=E1=CF=C2=B7=A2=B5=BD ResultPartiti=
on =B5=C4 subPartition=A3=AC=CA=CD=B7=C5=CA=C7=D2=D4 subPartition=
 =B5=C4=C8=AB=B2=BF=C4=DA=B4=E6=CE=AA=B5=A5=CE=BB=A3=AC=BB=E1=BD=AB=
=C4=DA=B4=E6=D6=D0=B5=C4=CA=FD=BE=DD=CD=C2=B5=BD=B4=C5=C5=CC=C9=CF=
=BB=F2=D5=DF=B2=BB=CA=CD=B7=C5=A1=BE=D2=C0=BE=DD=C5=E4=D6=C3=B5=C4=
=B2=BB=CD=AC=A1=BF</span></p></li></ul><h5 style=3D"font-size:0.8=
75rem;"><span style=3D"color: rgb(36, 41, 46);">=BB=D8=CA=D5 Buff=
er</span></h5><blockquote style=3D"color:rgba(0, 0, 0, 0.5);font-=
size:0.938rem;"><p><span style=3D"font-size: 0.85rem; color: rgb(=
106, 115, 125);">//</span><span style=3D"font-size: 0.85rem; colo=
r: rgb(106, 115, 125);">LocalBufferPool line273</span></p><p><spa=
n style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Men=
lo;">public void</span><span>&nbsp;</span><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">recycle(MemorySe=
gment segment) {</span></p><p><span style=3D"font-size:0.75rem;co=
lor:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp; BufferListener=20=
listener;</span></p><p><span style=3D"font-size:0.75rem;color:rgb=
(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp; NotificationResult not=
ificationResult =3D NotificationResult.</span><span style=3D"font=
-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;font-styl=
e:italic;">BUFFER_NOT_USED</span><span style=3D"font-size:0.75rem=
;color:rgb(0, 0, 0);font-family:Menlo;">;</span></p><p><span styl=
e=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nb=
sp;&nbsp;</span><span>&nbsp;</span><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 128);font-family:Menlo;">while</span><span>&nb=
sp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);fon=
t-family:Menlo;">(!notificationResult.isBufferUsed()) {</span></p=
><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fami=
ly:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</spa=
n><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-fami=
ly:Menlo;">synchronized</span><span>&nbsp;</span><span style=3D"f=
ont-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(</span><=
span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-fami=
ly:Menlo;">availableMemorySegments</span><span style=3D"font-size=
:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">) {</span></p><p>=
<span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:M=
enlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><sp=
an>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0,=20=
128);font-family:Menlo;">if</span><span>&nbsp;</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(</span=
><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-fa=
mily:Menlo;">isDestroyed</span><span>&nbsp;</span><span style=3D"=
font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">||</span=
><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(10=
2, 14, 122);font-family:Menlo;">numberOfRequestedMemorySegments</=
span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 0);font-family:Menlo;">&gt;</span><span>&nbsp;</span><spa=
n style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-family:=
Menlo;">currentPoolSize</span><span style=3D"font-size:0.75rem;co=
lor:rgb(0, 0, 0);font-family:Menlo;">) {</span></p><p><span style=
=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; re=
turnMemorySegment(segment);</span></p><p><span style=3D"font-size=
:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nb=
sp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);f=
ont-family:Menlo;">return</span><span style=3D"font-size:0.75rem;=
color:rgb(0, 0, 0);font-family:Menlo;">;</span></p><p><span style=
=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><span>&nbsp;=
</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font=
-family:Menlo;">else</span><span>&nbsp;</span><span style=3D"font=
-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">{</span></p>=
<p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-famil=
y:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; listener =3D</span><span>&nbsp;</span><span style=3D"=
font-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;">reg=
isteredListeners</span><span style=3D"font-size:0.75rem;color:rgb=
(0, 0, 0);font-family:Menlo;">.poll();</span></p><p><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span=
><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0,=
 0, 128);font-family:Menlo;">if</span><span>&nbsp;</span><span st=
yle=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(=
listener =3D=3D</span><span>&nbsp;</span><span style=3D"font-size=
:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">null</span><spa=
n style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo=
;">) {</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0,=
 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;=
</span><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);f=
ont-family:Menlo;">availableMemorySegments</span><span style=3D"f=
ont-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">.add(segm=
ent);</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0,=20=
0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;<=
/span><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);fo=
nt-family:Menlo;">availableMemorySegments</span><span style=3D"fo=
nt-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">.notify();=
</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0)=
;font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-famil=
y:Menlo;">return</span><span style=3D"font-size:0.75rem;color:rgb=
(0, 0, 0);font-family:Menlo;">;</span></p><p><span style=3D"font-=
size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p=
><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fami=
ly:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</sp=
an></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);fon=
t-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p><s=
pan style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Men=
lo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notificationResult =3D fireBu=
fferAvailableNotification(listener, segment);</span></p><p><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;"=
>&nbsp;&nbsp; }</span></p><p><span style=3D"font-size:0.75rem;col=
or:rgb(0, 0, 0);font-family:Menlo;">}</span></p></blockquote><p><=
span style=3D"color: rgb(36, 41, 46);">=BC=F2=B5=A5=B5=C4=D7=DC=BD=
=E1=A3=BA</span></p><ul class=3D"list-paddingleft-2"><li><p><span=
 style=3D"color: rgb(36, 41, 46);">=C8=E7=B9=FB=B4=CB LocalBuffer=
 =D2=D1=CF=FA=BB=D9=BB=F2=B3=AC=C1=BF=CA=B9=D3=C3=A3=AC=BD=AB Buf=
fer =B9=E9=BB=B9=B8=F8 NetworkBufferPool</span></p></li><li><p><s=
pan style=3D"color: rgb(36, 41, 46);">=B7=F1=D4=F2=C8=E7=B9=FB=D7=
=A2=B2=E1=C1=CB EventListener =A3=AC=CD=A8=D6=AA=C3=BF=B8=F6 list=
ener =D5=E2=B8=F6 Buffer =B1=BB=BB=D8=CA=D5</span></p></li><li><p=
><span style=3D"color: rgb(36, 41, 46);">=C8=E7=B9=FB=C3=BB=D3=D0=
=D7=A2=B2=E1=A3=AC=BD=AB=D5=E2=B8=F6 Buffer =D6=D8=D0=C2=B1=EA=BC=
=C7=CE=AA=BF=C9=CA=B9=D3=C3=A1=BE=BC=D3=C8=EB=B5=BD=B4=FD=C9=EA=C7=
=EB=B6=D3=C1=D0=A1=BF</span></p></li></ul><h5 style=3D"font-size:=
0.875rem;"><span style=3D"color: rgb(36, 41, 46);">=B5=F7=D5=FB B=
uffer =B4=F3=D0=A1</span></h5><blockquote style=3D"color:rgba(0,=20=
0, 0, 0.5);font-size:0.938rem;"><p><span style=3D"font-size: 0.85=
rem; color: rgb(106, 115, 125);">//</span><span style=3D"font-siz=
e: 0.85rem; color: rgb(106, 115, 125);">LocalBufferPool line237</=
span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128)=
;font-family:Menlo;">public void</span><span>&nbsp;</span><span s=
tyle=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">=
setNumBuffers(</span><span style=3D"font-size:0.75rem;color:rgb(0=
, 0, 128);font-family:Menlo;">int</span><span>&nbsp;</span><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;"=
>numBuffers)</span><span>&nbsp;</span><span style=3D"font-size:0.=
75rem;color:rgb(0, 0, 128);font-family:Menlo;">throws</span><span=
>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0)=
;font-family:Menlo;">IOException {</span></p><p><span style=3D"fo=
nt-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbs=
p;</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 128);font-family:Menlo;">int</span><span>&nbsp;</span=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">numExcessBuffers;</span></p><p><span style=3D"font-size:0=
.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</span>=
<span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0,=20=
0, 128);font-family:Menlo;">synchronized</span><span>&nbsp;</span=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">(</span><span style=3D"font-size:0.75rem;color:rgb(102, 1=
4, 122);font-family:Menlo;">availableMemorySegments</span><span s=
tyle=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">=
) {</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0,=
 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spa=
n>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0=
);font-family:Menlo;font-style:italic;">checkArgument</span><span=
 style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;=
">(numBuffers &gt;=3D</span><span>&nbsp;</span><span style=3D"fon=
t-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;">number=
OfRequiredMemorySegments</span><span style=3D"font-size:0.75rem;c=
olor:rgb(0, 0, 0);font-family:Menlo;">,</span></p><p><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span=
><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0,=
 128, 0);font-family:Menlo;">"Buffer pool needs at least %s buffe=
rs, but tried to set to %s"</span><span style=3D"font-size:0.75re=
m;color:rgb(0, 0, 0);font-family:Menlo;">,</span></p><p><span sty=
le=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<=
/span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:r=
gb(102, 14, 122);font-family:Menlo;">numberOfRequiredMemorySegmen=
ts</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font=
-family:Menlo;">, numBuffers);</span></p><p><span style=3D"font-s=
ize:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">if</span><span=
>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0)=
;font-family:Menlo;">(numBuffers &gt;</span><span>&nbsp;</span><s=
pan style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-famil=
y:Menlo;">maxNumberOfMemorySegments</span><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">) {</span></p><p=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><s=
pan>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(102,=20=
14, 122);font-family:Menlo;">currentPoolSize</span><span>&nbsp;</=
span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fam=
ily:Menlo;">=3D</span><span>&nbsp;</span><span style=3D"font-size=
:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;">maxNumberOfM=
emorySegments</span><span style=3D"font-size:0.75rem;color:rgb(0,=
 0, 0);font-family:Menlo;">;</span></p><p><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; }</span><span>&nbsp;</span><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">else</span><sp=
an>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0,=20=
0);font-family:Menlo;">{</span></p><p><span style=3D"font-size:0.=
75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=
=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;"=
>currentPoolSize</span><span>&nbsp;</span><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">=3D numBuffers;<=
/span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);=
font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; returnExcessMemorySegments=
();</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0,=
 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; numExcessB=
uffers =3D</span><span>&nbsp;</span><span style=3D"font-size:0.75=
rem;color:rgb(102, 14, 122);font-family:Menlo;">numberOfRequested=
MemorySegments</span><span>&nbsp;</span><span style=3D"font-size:=
0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">-</span><span>&nbs=
p;</span><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122)=
;font-family:Menlo;">currentPoolSize</span><span style=3D"font-si=
ze:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">;</span></p><p>=
<span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:M=
enlo;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</span><spa=
n>&nbsp;</span><span style=3D"font-size: 0.75rem; font-family: Me=
nlo; font-style: italic;">// If there is a registered owner and w=
e have still requested more buffers than our</span></p><p><span s=
tyle=3D"font-size: 0.75rem; font-family: Menlo; font-style: itali=
c;">&nbsp;&nbsp; // size, trigger a recycle via the owner.</span>=
</p><p><span style=3D"font-size: 0.75rem; font-family: Menlo; fon=
t-style: italic;">&nbsp;&nbsp;</span><span>&nbsp;</span><span sty=
le=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">=
if</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 0);font-family:Menlo;">(</span><span style=3D"font-si=
ze:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;">owner</spa=
n><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family=
:Menlo;">.isPresent() &amp;&amp; numExcessBuffers &gt;</span><spa=
n>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 2=
55);font-family:Menlo;">0</span><span style=3D"font-size:0.75rem;=
color:rgb(0, 0, 0);font-family:Menlo;">) {</span></p><p><span sty=
le=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=
=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;"=
>owner</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);=
font-family:Menlo;">.get().releaseMemory(numExcessBuffers);</span=
></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-=
family:Menlo;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-si=
ze:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">}</span></p></b=
lockquote><p><span style=3D"color: rgb(36, 41, 46);">=BC=F2=B5=A5=
=D7=DC=BD=E1=A3=BA</span></p><ul class=3D"list-paddingleft-2"><li=
><p><span style=3D"color: rgb(36, 41, 46);">=B9=E9=BB=B9=B3=AC=C1=
=BF=CA=B9=D3=C3=B5=C4=C4=DA=B4=E6=B8=F8 NetworkBufferPool</span><=
/p></li><li><p><span style=3D"color: rgb(36, 41, 46);">=C8=E7=B9=FB=
=BB=B9=CA=C7=B3=AC=C1=BF=CA=B9=D3=C3=A3=AC=B5=F7=D3=C3 owner =B5=C4=
=CA=CD=B7=C5=BD=D3=BF=DA=A1=BE=D2=D4 ResultSubPartiton =CE=AA=B5=A5=
=CE=BB=CA=CD=B7=C5=A1=BF</span></p></li></ul><h4 style=3D"font-si=
ze:1rem;"><span style=3D"color:rgb(36, 41, 46);">NetworkBufferPoo=
l</span></h4><p><span style=3D"color: rgb(36, 41, 46);">=C9=CF=C3=
=E6=D2=D1=BE=AD=CC=E1=B5=BD=A3=ACNetworkbufferPool =CD=B3=D2=BB=B9=
=DC=C0=ED=C1=CB=CD=F8=C2=E7=D5=BB=B5=C4=C4=DA=B4=E6=A3=ACLocalBuf=
ferPool =D6=BB=CA=C7=B9=DC=C0=ED Buffer =B5=C4=B7=BD=CA=BD=A3=AC=BE=
=DF=CC=E5=B5=C4=C9=EA=C7=EB=BA=CD=CA=CD=B7=C5=BB=B9=CA=C7=D2=AA=D7=
=DF NetworkBufferPool =B5=C4=BD=D3=BF=DA=A1=A3=D6=B5=B5=C3=D7=A2=D2=
=E2=B5=C4=CA=C7=A3=ACNetworkBufferPool =D4=DA=CA=B5=C0=FD=BB=AF=B5=
=C4=CA=B1=BA=F2=BE=CD=BD=AB=B3=F5=CA=BC=B5=C4=B9=CC=B6=A8=B4=F3=D0=
=A1=B5=C4=C4=DA=B4=E6=B7=D6=C5=E4=B3=F6=C0=B4=C1=CB=A1=BE=B2=BB=B9=
=DC=CA=C7=B6=D1=BB=B9=CA=C7=B7=C7=B6=D1=A1=BF=A1=A3=CE=D2=C3=C7=C0=
=B4=BF=B4=CB=FC=B5=C4=B9=D8=BC=FC=BD=D3=BF=DA=A3=BA</span></p><h5=
 style=3D"font-size:0.875rem;"><span style=3D"color: rgb(36, 41,=20=
46);">=B4=B4=BD=A8 LocalBufferPool</span></h5><blockquote style=3D=
"color:rgba(0, 0, 0, 0.5);font-size:0.938rem;"><p><span style=3D"=
font-size: 0.85rem; color: rgb(106, 115, 125);">//</span><span st=
yle=3D"font-size: 0.85rem; color: rgb(106, 115, 125);">NetworkBuf=
ferPool line256</span></p><p><span style=3D"font-size:0.75rem;col=
or:rgb(0, 0, 128);font-family:Menlo;">public</span><span>&nbsp;</=
span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fam=
ily:Menlo;">BufferPool createBufferPool(</span><span style=3D"fon=
t-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">int</span=
><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0,=
 0, 0);font-family:Menlo;">numRequiredBuffers,</span><span>&nbsp;=
</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font=
-family:Menlo;">int</span><span>&nbsp;</span><span style=3D"font-=
size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">maxUsedBuffer=
s)</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 128);font-family:Menlo;">throws</span><span>&nbsp;</s=
pan><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fami=
ly:Menlo;">IOException {</span></p><p><span style=3D"font-size:0.=
75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</span><=
span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0=
, 128);font-family:Menlo;">return</span><span>&nbsp;</span><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;"=
>createBufferPool(numRequiredBuffers, maxUsedBuffers, Optional.</=
span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fam=
ily:Menlo;font-style:italic;">empty</span><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">());</span></p><=
p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family=
:Menlo;">}</span></p><p><span style=3D"font-size:0.75rem;color:rg=
b(128, 128, 0);font-family:Menlo;">@Override</span></p><p><span s=
tyle=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;=
">public</span><span>&nbsp;</span><span style=3D"font-size:0.75re=
m;color:rgb(0, 0, 0);font-family:Menlo;">BufferPool createBufferP=
ool(</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);=
font-family:Menlo;">int</span><span>&nbsp;</span><span style=3D"f=
ont-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">numRequir=
edBuffers,</span><span>&nbsp;</span><span style=3D"font-size:0.75=
rem;color:rgb(0, 0, 128);font-family:Menlo;">int</span><span>&nbs=
p;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font=
-family:Menlo;">maxUsedBuffers, Optional&lt;BufferPoolOwner&gt; o=
wner)</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;c=
olor:rgb(0, 0, 128);font-family:Menlo;">throws</span><span>&nbsp;=
</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-f=
amily:Menlo;">IOException {</span></p><p><span style=3D"font-size=
:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</spa=
n><span>&nbsp;</span><span style=3D"font-size: 0.75rem; font-fami=
ly: Menlo; font-style: italic;">// It is necessary to use a separ=
ate lock from the one used for buffer</span></p><p><span style=3D=
"font-size: 0.75rem; font-family: Menlo; font-style: italic;">&nb=
sp;&nbsp; // requests to ensure deadlock freedom for failure case=
s.</span></p><p><span style=3D"font-size: 0.75rem; font-family: M=
enlo; font-style: italic;">&nbsp;&nbsp;</span><span>&nbsp;</span>=
<span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family=
:Menlo;">synchronized</span><span>&nbsp;</span><span style=3D"fon=
t-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(</span><sp=
an style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-family=
:Menlo;">factoryLock</span><span style=3D"font-size:0.75rem;color=
:rgb(0, 0, 0);font-family:Menlo;">) {</span></p><p><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"f=
ont-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">if</spa=
n><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0=
, 0, 0);font-family:Menlo;">(</span><span style=3D"font-size:0.75=
rem;color:rgb(102, 14, 122);font-family:Menlo;">isDestroyed</span=
><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:=
Menlo;">) {</span></p><p><span style=3D"font-size:0.75rem;color:r=
gb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font-size=
:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">throw new</span=
><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0,=
 0, 0);font-family:Menlo;">IllegalStateException(</span><span sty=
le=3D"font-size:0.75rem;color:rgb(0, 128, 0);font-family:Menlo;">=
"Network buffer pool has already been destroyed."</span><span sty=
le=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">);=
</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0)=
;font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><=
p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family=
:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span>=
<span style=3D"font-size: 0.75rem; font-family: Menlo; font-style=
: italic;">// Ensure that the number of required buffers can be s=
atisfied.</span></p><p><span style=3D"font-size: 0.75rem; font-fa=
mily: Menlo; font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20=
// With dynamic memory management this should become obsolete.</s=
pan></p><p><span style=3D"font-size: 0.75rem; font-family: Menlo;=
 font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>=
&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128=
);font-family:Menlo;">if</span><span>&nbsp;</span><span style=3D"=
font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(</span>=
<span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-fam=
ily:Menlo;">numTotalRequiredBuffers</span><span>&nbsp;</span><spa=
n style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo=
;">+ numRequiredBuffers &gt;</span><span>&nbsp;</span><span style=
=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;"=
>totalNumberOfMemorySegments</span><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 0);font-family:Menlo;">) {</span></p><p><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;"=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nb=
sp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);f=
ont-family:Menlo;">throw new</span><span>&nbsp;</span><span style=
=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">IOEx=
ception(String.</span><span style=3D"font-size:0.75rem;color:rgb(=
0, 0, 0);font-family:Menlo;font-style:italic;">format</span><span=
 style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;=
">(</span><span style=3D"font-size:0.75rem;color:rgb(0, 128, 0);f=
ont-family:Menlo;">"Insufficient number of network buffers: "</sp=
an><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(=
0, 0, 0);font-family:Menlo;">+</span></p><p><span style=3D"font-s=
ize:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</spa=
n><span style=3D"font-size:0.75rem;color:rgb(0, 128, 0);font-fami=
ly:Menlo;">"required %d, but only %d available. The total number=20=
of network "</span><span>&nbsp;</span><span style=3D"font-size:0.=
75rem;color:rgb(0, 0, 0);font-family:Menlo;">+</span></p><p><span=
 style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;=
">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><=
span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 1=
28, 0);font-family:Menlo;">"buffers is currently set to %d of %d=20=
bytes each. You can increase this "</span><span>&nbsp;</span><spa=
n style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo=
;">+</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0=
, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font-size=
:0.75rem;color:rgb(0, 128, 0);font-family:Menlo;">"number by sett=
ing the configuration keys '%s', '%s', and '%s'."</span><span sty=
le=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">,<=
/span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);=
font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; numRequiredBuffers,</span=
></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-=
family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span=
 style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-family:M=
enlo;">totalNumberOfMemorySegments</span><span>&nbsp;</span><span=
 style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;=
">-</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;col=
or:rgb(102, 14, 122);font-family:Menlo;">numTotalRequiredBuffers<=
/span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fa=
mily:Menlo;">,</span></p><p><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spa=
n>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(102, 14=
, 122);font-family:Menlo;">totalNumberOfMemorySegments</span><spa=
n style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo=
;">,</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0=
, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</=
span><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);fon=
t-family:Menlo;">memorySegmentSize</span><span style=3D"font-size=
:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">,</span></p><p><s=
pan style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Men=
lo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; TaskManagerOptions.</span><span style=3D=
"font-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;font=
-style:italic;">NETWORK_BUFFERS_MEMORY_FRACTION</span><span style=
=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">.key=
(),</span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0,=
 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TaskManagerOptions.</=
span><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);fon=
t-family:Menlo;font-style:italic;">NETWORK_BUFFERS_MEMORY_MIN</sp=
an><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-famil=
y:Menlo;">.key(),</span></p><p><span style=3D"font-size:0.75rem;c=
olor:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TaskMan=
agerOptions.</span><span style=3D"font-size:0.75rem;color:rgb(102=
, 14, 122);font-family:Menlo;font-style:italic;">NETWORK_BUFFERS_=
MEMORY_MAX</span><span style=3D"font-size:0.75rem;color:rgb(0, 0,=
 0);font-family:Menlo;">.key()));</span></p><p><span style=3D"fon=
t-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; }</span></p><p><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;</span><span>&nbsp;</span><span style=3D"font-size:0.75rem=
;color:rgb(0, 0, 128);font-family:Menlo;">this</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">.</span=
><span style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-fa=
mily:Menlo;">numTotalRequiredBuffers</span><span>&nbsp;</span><sp=
an style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menl=
o;">+=3D numRequiredBuffers;</span></p><p><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font-size:=
 0.75rem; font-family: Menlo; font-style: italic;">// We are good=
 to go, create a new buffer pool and redistribute</span></p><p><s=
pan style=3D"font-size: 0.75rem; font-family: Menlo; font-style:=20=
italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // non-fixed size buffers=
.</span></p><p><span style=3D"font-size: 0.75rem; font-family: Me=
nlo; font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><s=
pan>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0,=
 0);font-family:Menlo;">LocalBufferPool localBufferPool =3D</span=
></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-=
family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</=
span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 128);font-family:Menlo;">new</span><span>&nbsp;</span><sp=
an style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menl=
o;">LocalBufferPool(</span><span style=3D"font-size:0.75rem;color=
:rgb(0, 0, 128);font-family:Menlo;">this</span><span style=3D"fon=
t-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">, numRequir=
edBuffers, maxUsedBuffers, owner);</span></p><p><span style=3D"fo=
nt-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font=
-size:0.75rem;color:rgb(102, 14, 122);font-family:Menlo;">allBuff=
erPools</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0)=
;font-family:Menlo;">.add(localBufferPool);</span></p><p><span st=
yle=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span styl=
e=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">t=
ry</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 0);font-family:Menlo;">{</span></p><p><span style=3D"=
font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redistributeBuffers();</=
span></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);f=
ont-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><span>&=
nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128)=
;font-family:Menlo;">catch</span><span>&nbsp;</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(IOExce=
ption e) {</span></p><p><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"font-size:=
0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">try</span><span>=
&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);=
font-family:Menlo;">{</span></p><p><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; destroyBufferPool(loc=
alBufferPool);</span></p><p><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp; }</span><span>&nbsp;</span><span style=3D"font=
-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">catch</spa=
n><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0=
, 0, 0);font-family:Menlo;">(IOException inner) {</span></p><p><s=
pan style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Men=
lo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; e.addSuppressed(inner);</span></p><p><span style=3D"font-s=
ize:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p><span style=3D"=
font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ExceptionUtils.</span><s=
pan style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Men=
lo;font-style:italic;">rethrowIOException</span><span style=3D"fo=
nt-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(e);</span=
></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-=
family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p><spa=
n style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo=
;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span=20=
style=3D"font-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo=
;">return</span><span>&nbsp;</span><span style=3D"font-size:0.75r=
em;color:rgb(0, 0, 0);font-family:Menlo;">localBufferPool;</span>=
</p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-f=
amily:Menlo;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-siz=
e:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">}</span></p></bl=
ockquote><p><span style=3D"color: rgb(36, 41, 46);">=BC=F2=B5=A5=D7=
=DC=BD=E1=A3=BA</span></p><ul class=3D"list-paddingleft-2"><li><p=
><span style=3D"color: rgb(36, 41, 46);">=D7=F6=D2=BB=D0=A9=D7=B4=
=CC=AC=B1=B8=B7=DD=A3=AC=B0=FC=C0=A8=D5=FB=CC=E5=CA=B9=D3=C3=B5=C4=
 Buffer =CA=FD=A1=A2=BF=C9=B6=AF=CC=AC=B5=F7=D5=FB=B4=F3=D0=A1=B5=
=C4 BufferPool =B5=C8</span></p></li><li><p><span style=3D"color:=
 rgb(36, 41, 46);">=B6=D4=D3=DA=BF=C9=B6=AF=CC=AC=B5=F7=D5=FB=B5=C4=
 BufferPool=A3=AC=D6=D8=D0=C2=B5=F7=D5=FB=BF=C9=D3=C3=C4=DA=B4=E6=
=A3=AC=B5=F7=D5=FB=B7=BD=CA=BD=CE=AA round-robin</span></p></li><=
/ul><h5 style=3D"font-size:0.875rem;"><span style=3D"color: rgb(3=
6, 41, 46);">=CF=FA=BB=D9 LocalBufferPool</span></h5><blockquote=20=
style=3D"color:rgba(0, 0, 0, 0.5);font-size:0.938rem;"><p><span s=
tyle=3D"font-size: 0.85rem; color: rgb(106, 115, 125);">//</span>=
<span style=3D"font-size: 0.85rem; color: rgb(106, 115, 125);">Ne=
tworkBufferPool line310</span></p><p><span style=3D"font-size:0.7=
5rem;color:rgb(0, 0, 128);font-family:Menlo;">public void</span><=
span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0=
, 0);font-family:Menlo;">destroyBufferPool(BufferPool bufferPool)=
</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:=
rgb(0, 0, 128);font-family:Menlo;">throws</span><span>&nbsp;</spa=
n><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-family=
:Menlo;">IOException {</span></p><p><span style=3D"font-size:0.75=
rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</span><sp=
an>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0,=20=
128);font-family:Menlo;">if</span><span>&nbsp;</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(!(buff=
erPool</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;=
color:rgb(0, 0, 128);font-family:Menlo;">instanceof</span><span>&=
nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);f=
ont-family:Menlo;">LocalBufferPool)) {</span></p><p><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;</span><span style=3D"f=
ont-size:0.75rem;color:rgb(0, 0, 128);font-family:Menlo;">throw n=
ew</span><span>&nbsp;</span><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 0);font-family:Menlo;">IllegalArgumentException(</spa=
n><span style=3D"font-size:0.75rem;color:rgb(0, 128, 0);font-fami=
ly:Menlo;">"bufferPool is no LocalBufferPool"</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">);</spa=
n></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font=
-family:Menlo;">&nbsp;&nbsp; }</span></p><p><span style=3D"font-s=
ize:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;</=
span><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rg=
b(0, 0, 128);font-family:Menlo;">synchronized</span><span>&nbsp;<=
/span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fa=
mily:Menlo;">(</span><span style=3D"font-size:0.75rem;color:rgb(1=
02, 14, 122);font-family:Menlo;">factoryLock</span><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">) {</sp=
an></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);fon=
t-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp=
;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0, 128);fon=
t-family:Menlo;">if</span><span>&nbsp;</span><span style=3D"font-=
size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">(</span><span=
 style=3D"font-size:0.75rem;color:rgb(102, 14, 122);font-family:M=
enlo;">allBufferPools</span><span style=3D"font-size:0.75rem;colo=
r:rgb(0, 0, 0);font-family:Menlo;">.remove(bufferPool)) {</span><=
/p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font-fa=
mily:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</sp=
an><span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(=
102, 14, 122);font-family:Menlo;">numTotalRequiredBuffers</span><=
span>&nbsp;</span><span style=3D"font-size:0.75rem;color:rgb(0, 0=
, 0);font-family:Menlo;">-=3D bufferPool.getNumberOfRequiredMemor=
ySegments();</span></p><p><span style=3D"font-size:0.75rem;color:=
rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; redistributeBuffers();</span></p><p><span style=3D=
"font-size:0.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp; }</span></p><p><span style=3D"font-size:0=
.75rem;color:rgb(0, 0, 0);font-family:Menlo;">&nbsp;&nbsp; }</spa=
n></p><p><span style=3D"font-size:0.75rem;color:rgb(0, 0, 0);font=
-family:Menlo;">}</span></p><p><br></p></blockquote><p><span styl=
e=3D"color: rgb(36, 41, 46);">=BC=F2=B5=A5=D7=DC=BD=E1=A3=BA</spa=
n></p><ul class=3D"list-paddingleft-2"><li><p><span style=3D"colo=
r: rgb(36, 41, 46);">=CF=FB=B3=FD=D7=B4=CC=AC=BC=C7=C2=BC</span><=
/p></li><li><p><span style=3D"font-size: 1rem; color: rgb(36, 41,=
 46);">=B6=D4=D3=DA=BF=C9=B6=AF=CC=AC=B5=F7=D5=FB=B5=C4 BufferPoo=
l=A3=AC=D6=D8=D0=C2=B5=F7=D5=FB=BF=C9=D3=C3=C4=DA=B4=E6=A3=AC=B5=F7=
=D5=FB=B7=BD=CA=BD=CE=AA round-robin</span><span style=3D"font-si=
ze: 1rem; color: rgb(36, 41, 46);">=C2=D6=D1=AF=B5=F7=B6=C8=CB=E3=
=B7=A8</span></p></li></ul></div><div class=3D"weui-flex" style=3D=
"font-size:0.938rem;color:rgb(51, 51, 51)"><br class=3D"Apple-int=
erchange-newline"></div><div class=3D"rich_media_tool" id=3D"js_t=
oobar3" style=3D"font-size: 0.938rem; color: rgb(51, 51, 51);"><b=
r></div><div style=3D"font-size:0.938rem;color:gray"><small>=C0=B4=
=D4=B4=A3=BA&nbsp;<a href=3D"https://mp.weixin.qq.com/s?__biz=3DM=
zU3MzgwNTU2Mg=3D=3D&amp;mid=3D2247483759&amp;idx=3D4&amp;sn=3D9ac=
e489fed8edbf71b05f6ebfd5ed68f&amp;chksm=3Dfd3d47faca4aceec3983968=
e39a7507ff6b03eaa2bb7325642a2649a06eb644963e209bfcaa0&amp;scene=3D=
21#wechat_redirect">https://mp.weixin.qq.com/s?__biz=3DMzU3MzgwNT=
U2Mg=3D=3D&amp;mid=3D2247483759&amp;idx=3D4&amp;sn=3D9ace489fed8e=
dbf71b05f6ebfd5ed68f&amp;chksm=3Dfd3d47faca4aceec3983968e39a7507f=
f6b03eaa2bb7325642a2649a06eb644963e209bfcaa0&amp;scene=3D21#wecha=
t_redirect</a></small></div></body></html>=0A=0A=0A=0A=0A=0A=0A=0A=


------=_Next_Part_0000480421.002--

------=_Next_Part_0001441263.642
Content-Type: image/jpeg;
	name="640_49.jpg"
Content-Transfer-Encoding: base64
Content-ID: <640_49.jpg>
Content-Location: 640_49.jpg

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

------=_Next_Part_0001441263.642
Content-Type: image/jpeg;
	name="640_50.jpg"
Content-Transfer-Encoding: base64
Content-ID: <640_50.jpg>
Content-Location: 640_50.jpg

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

------=_Next_Part_0001441263.642
Content-Type: image/jpeg;
	name="640_51.jpg"
Content-Transfer-Encoding: base64
Content-ID: <640_51.jpg>
Content-Location: 640_51.jpg

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

------=_Next_Part_0001441263.642--

