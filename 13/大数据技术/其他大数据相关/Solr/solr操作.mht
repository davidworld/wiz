From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?c29scrLZ1/c=?=
Date: Date: Fri, 23 Jul 2021 05:51:18 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0000675468.381"

This is a multi-part message in MIME format.

------=_Next_Part_0000675468.381
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0000225156.590"


------=_Next_Part_0000225156.590
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0000225156.590
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!doctype html><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A=0A<title>solr=B2=D9=D7=F7</title>=0A    =0A=0A=
=0A=0A=0A<style id=3D"wiz_custom_css">html, body {font-size: 12pt=
;}body {font-family: Helvetica, 'Hiragino Sans GB', '=CE=A2=C8=ED=
=D1=C5=BA=DA', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-=
serif;line-height: 1.6;margin: 0 auto;padding: 20px 16px;padding:=
 1.25rem 1rem;}h1, h2, h3, h4, h5, h6 {margin:20px 0 10px;margin:=
1.25rem 0 0.625rem;padding: 0;font-weight: bold;}h1 {font-size:20=
pt;font-size:1.67rem;}h2 {font-size:18pt;font-size:1.5rem;}h3 {fo=
nt-size:15pt;font-size:1.25rem;}h4 {font-size:14pt;font-size:1.17=
rem;}h5 {font-size:12pt;font-size:1rem;}h6 {font-size:12pt;font-s=
ize:1rem;color: #777777;margin: 1rem 0;}div, p, ul, ol, dl, li {m=
argin:0;}blockquote, table, pre, code {margin:8px 0;}ul, ol {padd=
ing-left:32px;padding-left:2rem;}ol.wiz-list-level1 > li {list-st=
yle-type:decimal;}ol.wiz-list-level2 > li {list-style-type:lower-=
latin;}ol.wiz-list-level3 > li {list-style-type:lower-roman;}bloc=
kquote {padding:0 12px;padding:0 0.75rem;}blockquote > :first-chi=
ld {margin-top:0;}blockquote > :last-child {margin-bottom:0;}img=20=
{border:0;max-width:100%;height:auto !important;margin:2px 0;}tab=
le {border-collapse:collapse;border:1px solid #bbbbbb;}td, th {pa=
dding:4px 8px;border-collapse:collapse;border:1px solid #bbbbbb;m=
in-height:28px;word-break:break-all;box-sizing: border-box;}.wiz-=
hide {display:none !important;}</style></head>=0A=0A<body style c=
lass spellcheck=3D"false"><p class=3D"MsoNormal"><span style=3D"c=
olor:red">solr=B2=D9=D7=F7</span></p><p class=3D"MsoNormal"><span=
 style=3D"color:red">numShards*replicationFactor&lt; maxShardsPer=
Node*</span><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-fon=
t-family:Calibri;mso-hansi-font-family:Calibri;=0Acolor:red">=C8=DD=
=C6=F7=CA=FD</span><span style=3D"color:red"><o:p></o:p></span></=
p><h4><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-fami=
ly:Cambria;mso-hansi-font-family:=0ACambria">=B4=B4=BD=A8=BF=D5=BC=
=E4=A3=BA</span></h4><p class=3D"MsoNormal"><span>http://192.168.=
14.80:8084/solr/admin/collections?action=3DCREATE&amp;name=3Dmyco=
llection1&amp;numShards=3D2&amp;replicationFactor=3D1&amp;maxShar=
dsPerNode=3D3</span></p><h4><span style=3D"font-family:=CB=CE=CC=E5=
;mso-ascii-font-family:Cambria;mso-hansi-font-family:=0ACambria">=
=C9=BE=B3=FD=BF=D5=BC=E4</span> <span style=3D"font-family:=CB=CE=
=CC=E5;mso-ascii-font-family:Cambria;=0Amso-hansi-font-family:Cam=
bria">=A3=BA</span></h4><p class=3D"MsoNormal"><span>http://192.1=
68.14.77:8084/solr/admin/collections?action=3DDELETE&amp;name=3Dm=
ycollection5</span></p><h4><span style=3D"font-family:=CB=CE=CC=E5=
;mso-ascii-font-family:Cambria;mso-hansi-font-family:=0ACambria">=
=B4=B4=BD=A8</span><span>core</span></h4><p class=3D"MsoNormal"><=
span><a href=3D"http://192.168.14.77:8084/solr/admin/cores?action=
=3DCREATE&amp;name=3Dcorename&amp;collection=3Dmycollection1&amp;=
shard=3Dshard2">http://192.168.14.77:8084/solr/admin/cores?action=
=3DCREATE&amp;name=3Dcorename&amp;collection=3Dmycollection1&amp;=
shard=3Dshard2</a></span></p><p class=3D"MsoNormal"><span><o:p>&n=
bsp;</o:p></span></p><p class=3D"MsoNormal"><span style=3D"font-f=
amily:=0A=CB=CE=CC=E5;mso-ascii-font-family:Calibri;mso-hansi-fon=
t-family:Calibri">=D6=D8=D4=D8</span><span> core</span></p><p cla=
ss=3D"MsoNormal"><span>http://192.168.14.81:8097/solr/admin/cores=
?action=3DRELOAD&amp;core=3Dcolhdfs_shard1_replica2</span></p><h4=
><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-family:Ca=
mbria;mso-hansi-font-family:=0ACambria">=B2=D9=D7=F7=CA=FD=BE=DD<=
/span> <span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-fam=
ily:Cambria;=0Amso-hansi-font-family:Cambria">=A3=BA</span></h4><=
p class=3D"MsoNormal"><span style=3D"font-family:=0A=CB=CE=CC=E5;=
mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri">=D1=A1=
=D4=F1=D2=BB=B8=F6</span><span>core</span><span style=3D"font-fam=
ily:=CB=CE=CC=E5;mso-ascii-font-family:Calibri;=0Amso-hansi-font-=
family:Calibri">=A3=AC=B2=A2=D1=A1=D4=F1</span><span>Documents</s=
pan><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-family=
:Calibri;mso-hansi-font-family:Calibri">=A3=AC</span><span>Docume=
nt Type</span><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-f=
ont-family:=0ACalibri;mso-hansi-font-family:Calibri">=D1=A1=D4=F1=
</span><span>xml</span></p><p class=3D"MsoNormal"><span>&lt;delet=
e&gt;&lt;query&gt;start_date:20150*&lt;/query&gt;&lt;/delete&gt;<=
/span></p><p class=3D"MsoNormal"><span>&lt;commit/&gt;</span></p>=
<h4><span>solr </span><span style=3D"font-family:=CB=CE=CC=E5;mso=
-ascii-font-family:=0ACambria;mso-hansi-font-family:Cambria">=CB=F7=
=D2=FD=BB=D6=B8=B4</span></h4><p class=3D"MsoNormal"><span style=3D=
"font-family:=0A=CB=CE=CC=E5;mso-ascii-font-family:Calibri;mso-ha=
nsi-font-family:Calibri">=C3=BB=D3=D0=CF=E0=B9=D8=B5=C4=C3=FC=C1=EE=
=A3=AC=CA=D6=B9=A4=BB=D6=B8=B4=A1=A3</span><span>solr </span><spa=
n style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-family:Calibri=
;=0Amso-hansi-font-family:Calibri">=CB=F7=D2=FD=BB=D6=B8=B4=B2=BD=
=D6=E8=C8=E7=CF=C2=A3=BA</span> </p><p class=3D"MsoNormal"><span>=
1</span><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-fa=
mily:Calibri;mso-hansi-font-family:Calibri">=A1=A2=CD=A3=D6=B9</s=
pan><span>solr </span><span style=3D"font-family:=CB=CE=CC=E5;mso=
-ascii-font-family:Calibri;=0Amso-hansi-font-family:Calibri">=B7=FE=
=CE=F1=C6=F7</span> <span style=3D"font-family:=CB=CE=CC=E5;=0Ams=
o-ascii-font-family:Calibri;mso-hansi-font-family:Calibri">=A3=A8=
=BF=C9=D1=A1=A3=A9</span> </p><p class=3D"MsoNormal"><span>2</spa=
n><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-family:C=
alibri;mso-hansi-font-family:Calibri">=A1=A2=B8=B4=D6=C6=B1=B8=B7=
=DD=B5=C4=CB=F7=D2=FD=B5=BD=B6=D4=D3=A6=B5=C4</span><span>core</s=
pan><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-family=
:Calibri;=0Amso-hansi-font-family:Calibri">=B4=F2</span><span>dat=
a</span><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-fa=
mily:Calibri;mso-hansi-font-family:Calibri">=C4=BF=C2=BC=CF=C2=A3=
=AC=C3=FB=B3=C6=CE=AA</span><span>index </span></p><p class=3D"Ms=
oNormal"><span>3</span><span style=3D"font-family:=CB=CE=CC=E5;ms=
o-ascii-font-family:Calibri;mso-hansi-font-family:Calibri">=A1=A2=
=D6=D8=C6=F4</span><span>solr</span><span style=3D"font-family:=CB=
=CE=CC=E5;mso-ascii-font-family:Calibri;=0Amso-hansi-font-family:=
Calibri">=B7=FE=CE=F1=C6=F7=A1=A3</span></p><h3><span>java</span>=
<span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-family:Cal=
ibri;mso-hansi-font-family:Calibri">=B2=D9=D7=F7</span></h3><p cl=
ass=3D"MsoNormal"><span>String=0AzkHost =3D "dn79:2185,nn80:2185,=
dn81:2185";&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p cla=
ss=3D"MsoNormal"><span>String&nbsp; defaultCollection =3D=0A"myco=
llection1";&nbsp; </span></p><p class=3D"MsoNormal"><span>int&nbs=
p; zkClientTimeout =3D 20000;&nbsp; </span></p><p class=3D"MsoNor=
mal"><span>int=0AzkConnectTimeout =3D 1000;&nbsp; </span></p><p c=
lass=3D"MsoNormal"><span>CloudSolrServer=0AcloudSolrServer =3D ne=
w CloudSolrServer(zkHost); </span></p><p class=3D"MsoNormal"><spa=
n style=3D"font-family:=0A=CB=CE=CC=E5;mso-ascii-font-family:Cali=
bri;mso-hansi-font-family:Calibri">=D4=F6=BC=D3=CB=F7=D2=FD=A3=BA=
</span><span>SolrInputDocument doc1 =3D new SolrInputDocument();&=
nbsp; </span></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doc1.addField("id=
",=0A"421245251215121452521251");&nbsp; </span></p><p class=3D"Ms=
oNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; doc1.addField("place_s",=0A"</span><span style=3D=
"font-family:=CB=CE=CC=E5;mso-ascii-font-family:Calibri;=0Amso-ha=
nsi-font-family:Calibri">=B1=B1=BE=A9</span><span>");&nbsp; </spa=
n></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Collection&lt;SolrInputDocum=
ent&gt;=0Adocs =3D new ArrayList&lt;SolrInputDocument&gt;();&nbsp=
; </span></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docs.add(doc1);&nbsp;=
&nbsp;&nbsp; </span></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cloudSolrS=
erver.add(docs);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class=3D"MsoNormal"><span>&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 cloudSolrServer.commit();&nbsp; &nbsp;</span></p><p class=3D"Mso=
Normal"><span style=3D"font-family:=0A=CB=CE=CC=E5;mso-ascii-font=
-family:Calibri;mso-hansi-font-family:Calibri">=B2=E9=D1=AF=CB=F7=
=D2=FD=A3=BA</span><span>SolrQuery query =3D new SolrQuery();</sp=
an></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; qu=
ery.setQuery("place_s:*</span><span style=3D"font-family:=CB=CE=CC=
=E5;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri">=
=BE=A9</span><span>*");&nbsp; </span></p><p class=3D"MsoNormal" s=
tyle=3D"margin-left: 42pt; text-indent: 21pt;"><span>QueryRespons=
e response =3D=0AsolrServer.query(query);&nbsp; </span></p><p cla=
ss=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; SolrDocumentList docs =3D=0Aresponse.get=
Results();</span></p><p class=3D"MsoNormal" style=3D"margin-left:=
 42pt; text-indent: 21pt;"><span>for (SolrDocument doc : docs) {&=
nbsp; </span></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; String place_s =3D (String)=0Adoc.getFieldValue("place_s")=
;&nbsp; </span></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp; String id =3D (String) doc.getFieldValue("id");</span></=
p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }=
</span></p><p class=3D"MsoNormal"><span style=3D"font-family:=0A=CB=
=CE=CC=E5;mso-ascii-font-family:Calibri;mso-hansi-font-family:Cal=
ibri">=C1=ED=CD=E2=D2=BB=D6=D6=B2=E9=D1=AF=B7=BD=B7=A8=A3=BA</spa=
n></p><p class=3D"MsoNormal"><span>ModifiableSolrParams=0Aparams=20=
=3D new ModifiableSolrParams();</span></p><p class=3D"MsoNormal">=
<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params.add("q",=
=0A"billing_nbr:18985101458");</span></p><p class=3D"MsoNormal"><=
span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params.add("stat=
s","true");</span></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params.add("stats.field","fee");</s=
pan></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; params.add("stats.field","duration");</span></p><=
p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; params.add("stats.facet","acc_item_type");</span></p><p cl=
ass=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p; params.add("rows","2");</span></p><p class=3D"MsoNormal"><span=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QueryResponse respon=
se =3D &nbsp;cloudSolrServer.query(params);</span></p><p class=3D=
"MsoNormal"><span><o:p>&nbsp;</o:p></span></p><p class=3D"MsoNorm=
al"><span style=3D"font-family:=0A=CB=CE=CC=E5;mso-ascii-font-fam=
ily:Calibri;mso-hansi-font-family:Calibri">=C9=BE=B3=FD=CB=F7=D2=FD=
=A3=BA</span><span>cloudSolrServer.deleteByQuery("*:*");// </span=
><span style=3D"font-family:=CB=CE=CC=E5;mso-ascii-font-family:Ca=
libri;mso-hansi-font-family:Calibri">=C9=BE=B3=FD=CB=F9=D3=D0</sp=
an></p><p class=3D"MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cloudSolrServer.commit();&n=
bsp;&nbsp;</span></p></body></html>=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=
=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A

------=_Next_Part_0000225156.590--

------=_Next_Part_0000675468.381--

