From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?ZHViYm+1xMb0tq+5/bPMo6i2/qOpLS23/s7xt73K9NDUxeTWww==?=
Date: Date: Fri, 23 Jul 2021 05:55:47 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0001483029.943"

This is a multi-part message in MIME format.

------=_Next_Part_0001483029.943
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0000494343.877"


------=_Next_Part_0000494343.877
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0000494343.877
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A=0A=0A=0A=0A<titl=
e>dubbo=B5=C4=C6=F4=B6=AF=B9=FD=B3=CC=A3=A8=B6=FE=A3=A9--=B7=FE=CE=
=F1=B7=BD=CA=F4=D0=D4=C5=E4=D6=C3</title>=0A    =0A<style id=3D"w=
iz_custom_css">html, .wiz-editor-body {font-size: 12pt;}.wiz-edit=
or-body {font-family: Helvetica, 'Hiragino Sans GB', '=E5=BE=AE=E8=
=BD=AF=E9=9B=85=E9=BB=91', 'Microsoft YaHei UI', SimSun, SimHei,=20=
arial, sans-serif;line-height: 1.7;margin: 0 auto;padding: 20px 1=
6px;padding: 1.25rem 1rem;}.wiz-editor-body h1,.wiz-editor-body h=
2,.wiz-editor-body h3,.wiz-editor-body h4,.wiz-editor-body h5,.wi=
z-editor-body h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;pa=
dding: 0;font-weight: bold;}.wiz-editor-body h1 {font-size:20pt;f=
ont-size:1.67rem;}.wiz-editor-body h2 {font-size:18pt;font-size:1=
.5rem;}.wiz-editor-body h3 {font-size:15pt;font-size:1.25rem;}.wi=
z-editor-body h4 {font-size:14pt;font-size:1.17rem;}.wiz-editor-b=
ody h5 {font-size:12pt;font-size:1rem;}.wiz-editor-body h6 {font-=
size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}.wiz-edit=
or-body div,.wiz-editor-body p,.wiz-editor-body ul,.wiz-editor-bo=
dy ol,.wiz-editor-body dl,.wiz-editor-body li {margin:8px 0;}.wiz=
-editor-body blockquote,.wiz-editor-body table,.wiz-editor-body p=
re,.wiz-editor-body code {margin:8px 0;}.wiz-editor-body .CodeMir=
ror pre {margin:0;}.wiz-editor-body ul,.wiz-editor-body ol {paddi=
ng-left:32px;padding-left:2rem;}.wiz-editor-body ol.wiz-list-leve=
l1 > li {list-style-type:decimal;}.wiz-editor-body ol.wiz-list-le=
vel2 > li {list-style-type:lower-latin;}.wiz-editor-body ol.wiz-l=
ist-level3 > li {list-style-type:lower-roman;}.wiz-editor-body bl=
ockquote {padding: 0 12px;}.wiz-editor-body blockquote > :first-c=
hild {margin-top:0;}.wiz-editor-body blockquote > :last-child {ma=
rgin-bottom:0;}.wiz-editor-body img {border:0;max-width:100%;heig=
ht:auto !important;margin:2px 0;}.wiz-editor-body table {border-c=
ollapse:collapse;border:1px solid #bbbbbb;}.wiz-editor-body td,.w=
iz-editor-body th {padding:4px 8px;border-collapse:collapse;borde=
r:1px solid #bbbbbb;min-height:28px;word-break:break-word;box-siz=
ing: border-box;}.wiz-hide {display:none !important;}</style></he=
ad>=0A=0A<body class=3D"wiz-editor-body"  spellcheck=3D"false"><d=
iv></div><h1 class=3D"h2 mb-3" id=3D"sf-article_title"><a class=3D=
"text-body" href=3D"https://segmentfault.com/a/1190000021430403">=
dubbo=B5=C4=C6=F4=B6=AF=B9=FD=B3=CC=A3=A8=B6=FE=A3=A9--=B7=FE=CE=F1=
=B7=BD=CA=F4=D0=D4=C5=E4=D6=C3</a></h1><div class=3D"m-n1"><a cla=
ss=3D"m-1 badge-tag" href=3D"https://segmentfault.com/t/dubbo" da=
ta-toggle=3D"popover" data-placement=3D"top" data-original-title=3D=
"dubbo" data-id=3D"1040000000257318">dubbo</a><a class=3D"m-1 bad=
ge-tag" href=3D"https://segmentfault.com/t/java" data-toggle=3D"p=
opover" data-img=3D"https://avatar-static.segmentfault.com/512/34=
2/51234253-1040000000089449_big64" data-placement=3D"top" data-or=
iginal-title=3D"java" data-id=3D"1040000000089449"><img src=3D"0.=
6483538315358757.png"><span>&nbsp;</span>java</a><a class=3D"m-1=20=
badge-tag" href=3D"https://segmentfault.com/t/%E6%BA%90%E7%A0%81%=
E5%88%86%E6%9E%90" data-toggle=3D"popover" data-placement=3D"top"=
 data-original-title=3D"=D4=B4=C2=EB=B7=D6=CE=F6" data-id=3D"1040=
000002479741">=D4=B4=C2=EB=B7=D6=CE=F6</a></div><div class=3D"fon=
t-size-14"><span class=3D"text-secondary ml-2">&nbsp;=D4=C4=B6=C1=
=D4=BC 24 =B7=D6=D6=D3</span></div><p><font color=3D"#e83e8c"><sp=
an style=3D"font-size: 0.875rem;">BeanDefinition</span></font>=D3=
=D0=C1=CB=A3=AC=BE=CD=BB=E1=B4=B4=BD=A8bean=A3=AC<a href=3D"https=
://segmentfault.com/a/1190000020998160">bean=B5=C4=B4=B4=BD=A8</a=
>=D6=D0=A3=AC=CC=E1=B5=BD=C1=CB=C8=E7=B9=FB=CA=B5=CF=D6=C1=CB<fon=
t color=3D"#e83e8c"><span style=3D"font-size: 0.875rem;">Initiali=
zingBean</span></font>=BD=D3=BF=DA=A3=AC=BE=CD=B5=F7=D3=C3=CB=FB=B5=
=C4afterPropertiesSet=B7=BD=B7=A8=A3=AC=B8=D5=BA=C3=A3=AC=C9=CF=C3=
=E6=B5=C4bean=D3=D0=C1=BD=B8=F6=CA=C7=CA=B5=CF=D6=C1=CB<font colo=
r=3D"#e83e8c"><span style=3D"font-size: 0.875rem;">InitializingBe=
an</span></font>=BD=D3=BF=DA=A1=A3=B7=D6=B2=BC=CA=C7<font color=3D=
"#e83e8c"><span style=3D"font-size: 0.875rem;">ServiceBean</span>=
</font>=BA=CD<font color=3D"#e83e8c"><span style=3D"font-size: 0.=
875rem;">ReferenceBean</span></font>=A3=AC=D5=E2=B1=DF=CF=C8=BF=B4=
=BF=B4<font color=3D"#e83e8c"><span style=3D"font-size: 0.875rem;=
">ServiceBean</span></font>=A1=A3afterPropertiesSet=B7=BD=B7=A8=D6=
=F7=D2=AA=CA=C7=B8=F7=D6=D6=CA=F4=D0=D4=C9=E8=D6=C3=A3=AC=B0=FC=C0=
=A8ProviderConfig=A1=A2ProtocolConfig=A1=A2ApplicationConfig=A1=A2=
ModuleConfig=A1=A2registryIds=A1=A2RegistryConfig=A1=A2MetadataRe=
portConfig=A1=A2ConfigCenterConfig=A1=A2MonitorConfig=A1=A2Metric=
sConfig=A1=A2ProtocolIds=A1=A2ProtocolConfig=A1=A2path=A1=A3</p><=
article class=3D"article fmt article-content" data-id=3D"11900000=
21430403"><h1 id=3D"item-1">ProviderConfig</h1><p>=C8=E7=B9=FB=C3=
=BB=D3=D0=B6=A8=D2=E5ProviderConfig=A3=AC=D4=F2=C9=E8=D6=C3Provid=
erConfig=BA=CDProtocolConfig</p><pre class=3D"hljs dart" style=3D=
"background-image: initial; background-attachment: initial; backg=
round-size: initial; background-origin: initial; background-clip:=
 initial; background-position: initial; background-repeat: initia=
l;"><span class=3D"hljs-keyword">if</span> (getProvider() =3D=3D=20=
<span class=3D"hljs-keyword">null</span>) {=0A    <span class=3D"=
hljs-comment">// =BB=F1=C8=A1ProviderConfig=C0=E0=D0=CD=B5=C4bean=
</span>=0A    <span class=3D"hljs-built_in">Map</span>&lt;<span c=
lass=3D"hljs-built_in">String</span>, ProviderConfig&gt; provider=
ConfigMap =3D applicationContext =3D=3D <span class=3D"hljs-keywo=
rd">null</span> ? <span class=3D"hljs-keyword">null</span> : Bean=
FactoryUtils.beansOfTypeIncludingAncestors(applicationContext, Pr=
oviderConfig.<span class=3D"hljs-keyword">class</span>, <span cla=
ss=3D"hljs-keyword">false</span>, <span class=3D"hljs-keyword">fa=
lse</span>);=0A    <span class=3D"hljs-keyword">if</span> (provid=
erConfigMap !=3D <span class=3D"hljs-keyword">null</span> &amp;&a=
mp; providerConfigMap.size() &gt; <span class=3D"hljs-number">0</=
span>) {=0A        <span class=3D"hljs-comment">// =C8=E7=B9=FBPr=
oviderConfig=B4=E6=D4=DA=A3=AC=BB=F1=C8=A1ProtocolConfig=C0=E0=D0=
=CD=B5=C4bean</span>=0A        <span class=3D"hljs-built_in">Map<=
/span>&lt;<span class=3D"hljs-built_in">String</span>, ProtocolCo=
nfig&gt; protocolConfigMap =3D applicationContext =3D=3D <span cl=
ass=3D"hljs-keyword">null</span> ? <span class=3D"hljs-keyword">n=
ull</span> : BeanFactoryUtils.beansOfTypeIncludingAncestors(appli=
cationContext, ProtocolConfig.<span class=3D"hljs-keyword">class<=
/span>, <span class=3D"hljs-keyword">false</span>, <span class=3D=
"hljs-keyword">false</span>);=0A        <span class=3D"hljs-keywo=
rd">if</span> (CollectionUtils.isEmptyMap(protocolConfigMap)=0A =20=
              &amp;&amp; providerConfigMap.size() &gt; <span clas=
s=3D"hljs-number">1</span>) { <span class=3D"hljs-comment">// bac=
kward compatibility</span>=0A            <span class=3D"hljs-comm=
ent">// protocolConfigMap=CE=AA=BF=D5=A3=AC=C7=D2=D3=D0=B6=E0=B8=F6=
ProviderConfig=B5=C4=CA=B1=BA=F2=A3=AC=C8=A1=C4=AC=C8=CF</span>=0A=
            <span class=3D"hljs-built_in">List</span>&lt;Provider=
Config&gt; providerConfigs =3D <span class=3D"hljs-keyword">new</=
span> ArrayList&lt;ProviderConfig&gt;();=0A            <span clas=
s=3D"hljs-keyword">for</span> (ProviderConfig config : providerCo=
nfigMap.values()) {=0A                <span class=3D"hljs-keyword=
">if</span> (config.isDefault() !=3D <span class=3D"hljs-keyword"=
>null</span> &amp;&amp; config.isDefault()) {=0A                =20=
   providerConfigs.add(config);=0A                }=0A          =20=
 }=0A            <span class=3D"hljs-comment">//=B0=D1=B6=E0=B8=F6=
providerConfigs=B5=C4=D6=B5=A3=AC=B8=B3=D6=B5=B8=F8ProtocolConfig=
</span>=0A            <span class=3D"hljs-keyword">if</span> (!pr=
oviderConfigs.isEmpty()) {=0A                setProviders(provide=
rConfigs);=0A            }=0A        } <span class=3D"hljs-keywor=
d">else</span> {=0A            <span class=3D"hljs-comment">// =D5=
=E2=B1=DF=D6=BB=D3=D0=C1=BD=B8=F6=C7=E9=BF=F6=A3=BAprotocolConfig=
Map=CE=AA=BF=D5=A3=ACproviderConfigMap=D6=BB=D3=D0=D2=BB=B8=F6=A3=
=AC=BB=F2protocolConfigMap=B2=BB=CE=AA=BF=D5=A3=ACproviderConfigM=
ap=D3=D0=B6=E0=B8=F6</span>=0A            <span class=3D"hljs-com=
ment">// =D6=BB=C4=DC=D3=D0=D2=BB=B8=F6=C4=AC=C8=CF=B5=C4provider=
Config</span>=0A            ProviderConfig providerConfig =3D <sp=
an class=3D"hljs-keyword">null</span>;=0A            <span class=3D=
"hljs-keyword">for</span> (ProviderConfig config : providerConfig=
Map.values()) {=0A                <span class=3D"hljs-keyword">if=
</span> (config.isDefault() =3D=3D <span class=3D"hljs-keyword">n=
ull</span> || config.isDefault()) {=0A                    <span c=
lass=3D"hljs-keyword">if</span> (providerConfig !=3D <span class=3D=
"hljs-keyword">null</span>) {=0A                        <span cla=
ss=3D"hljs-keyword">throw</span> <span class=3D"hljs-keyword">new=
</span> IllegalStateException(<span class=3D"hljs-string">"Duplic=
ate provider configs: "</span> + providerConfig + <span class=3D"=
hljs-string">" and "</span> + config);=0A                    }=0A=
                    providerConfig =3D config;=0A               =20=
}=0A            }=0A            <span class=3D"hljs-keyword">if</=
span> (providerConfig !=3D <span class=3D"hljs-keyword">null</spa=
n>) {=0A                setProvider(providerConfig);=0A         =20=
  }=0A        }=0A    }=0A}</pre><h1 id=3D"item-2">ApplicationCon=
fig</h1><p>ApplicationConfig=C3=BB=D3=D0=C9=E8=D6=C3=B9=FD=A3=AC=B2=
=A2=C7=D2ProviderConfig=B5=C4ApplicationConfig=D2=B2=C3=BB=C9=E8=D6=
=C3=B9=FD=B5=C4=CA=B1=BA=F2=A3=AC=C9=E8=D6=C3ApplicationConfig=A3=
=AC=D3=D0=C7=D2=D6=BB=D3=D0=D2=BB=B8=F6ApplicationConfig</p><pre=20=
class=3D"hljs dart" style=3D"background-image: initial; backgroun=
d-attachment: initial; background-size: initial; background-origi=
n: initial; background-clip: initial; background-position: initia=
l; background-repeat: initial;"><span class=3D"hljs-keyword">if</=
span> (getApplication() =3D=3D <span class=3D"hljs-keyword">null<=
/span>=0A            &amp;&amp; (getProvider() =3D=3D <span class=
=3D"hljs-keyword">null</span> || getProvider().getApplication() =3D=
=3D <span class=3D"hljs-keyword">null</span>)) {=0A    <span clas=
s=3D"hljs-comment">// =BB=F1=C8=A1ApplicationConfig=C0=E0=D0=CD=B5=
=C4bean</span>=0A    <span class=3D"hljs-built_in">Map</span>&lt;=
<span class=3D"hljs-built_in">String</span>, ApplicationConfig&gt=
; applicationConfigMap =3D applicationContext =3D=3D <span class=3D=
"hljs-keyword">null</span> ? <span class=3D"hljs-keyword">null</s=
pan> : BeanFactoryUtils.beansOfTypeIncludingAncestors(application=
Context, ApplicationConfig.<span class=3D"hljs-keyword">class</sp=
an>, <span class=3D"hljs-keyword">false</span>, <span class=3D"hl=
js-keyword">false</span>);=0A    <span class=3D"hljs-keyword">if<=
/span> (applicationConfigMap !=3D <span class=3D"hljs-keyword">nu=
ll</span> &amp;&amp; applicationConfigMap.size() &gt; <span class=
=3D"hljs-number">0</span>) {=0A        ApplicationConfig applicat=
ionConfig =3D <span class=3D"hljs-keyword">null</span>;=0A      =20=
 <span class=3D"hljs-keyword">for</span> (ApplicationConfig confi=
g : applicationConfigMap.values()) {=0A            <span class=3D=
"hljs-comment">// =D6=BB=C4=DC=C9=E8=D6=C3=D2=BB=B8=F6Application=
Config</span>=0A            <span class=3D"hljs-keyword">if</span=
> (applicationConfig !=3D <span class=3D"hljs-keyword">null</span=
>) {=0A                <span class=3D"hljs-keyword">throw</span>=20=
<span class=3D"hljs-keyword">new</span> IllegalStateException(<sp=
an class=3D"hljs-string">"Duplicate application configs: "</span>=
 + applicationConfig + <span class=3D"hljs-string">" and "</span>=
 + config);=0A            }=0A            applicationConfig =3D c=
onfig;=0A        }=0A        <span class=3D"hljs-keyword">if</spa=
n> (applicationConfig !=3D <span class=3D"hljs-keyword">null</spa=
n>) {=0A            setApplication(applicationConfig);=0A       =20=
}=0A    }=0A}</pre><h1 id=3D"item-3">ModuleConfig</h1><p>=C3=BB=D3=
=D0=C9=E8=D6=C3=B9=FD=A3=AC=B2=A2=C7=D2ProviderConfig=B5=C4Module=
Config=D2=B2=C3=BB=C9=E8=D6=C3=B9=FD=B5=C4=CA=B1=BA=F2=A3=AC=C9=E8=
=D6=C3ModuleConfig=A3=AC=D3=D0=C7=D2=D6=BB=D3=D0=D2=BB=B8=F6Modul=
eConfig</p><pre class=3D"hljs dart" style=3D"background-image: in=
itial; background-attachment: initial; background-size: initial;=20=
background-origin: initial; background-clip: initial; background-=
position: initial; background-repeat: initial;"><span class=3D"hl=
js-keyword">if</span> (getModule() =3D=3D <span class=3D"hljs-key=
word">null</span>=0A            &amp;&amp; (getProvider() =3D=3D=20=
<span class=3D"hljs-keyword">null</span> || getProvider().getModu=
le() =3D=3D <span class=3D"hljs-keyword">null</span>)) {=0A    <s=
pan class=3D"hljs-comment">// =BB=F1=C8=A1ModuleConfig=C0=E0=D0=CD=
=B5=C4bean</span>=0A    <span class=3D"hljs-built_in">Map</span>&=
lt;<span class=3D"hljs-built_in">String</span>, ModuleConfig&gt;=20=
moduleConfigMap =3D applicationContext =3D=3D <span class=3D"hljs=
-keyword">null</span> ? <span class=3D"hljs-keyword">null</span>=20=
: BeanFactoryUtils.beansOfTypeIncludingAncestors(applicationConte=
xt, ModuleConfig.<span class=3D"hljs-keyword">class</span>, <span=
 class=3D"hljs-keyword">false</span>, <span class=3D"hljs-keyword=
">false</span>);=0A    <span class=3D"hljs-keyword">if</span> (mo=
duleConfigMap !=3D <span class=3D"hljs-keyword">null</span> &amp;=
&amp; moduleConfigMap.size() &gt; <span class=3D"hljs-number">0</=
span>) {=0A        ModuleConfig moduleConfig =3D <span class=3D"h=
ljs-keyword">null</span>;=0A        <span class=3D"hljs-keyword">=
for</span> (ModuleConfig config : moduleConfigMap.values()) {=0A=20=
           <span class=3D"hljs-comment">// // =D6=BB=C4=DC=C9=E8=D6=
=C3=D2=BB=B8=F6=C4=AC=C8=CF=B5=C4ModuleConfig</span>=0A         =20=
  <span class=3D"hljs-keyword">if</span> (config.isDefault() =3D=3D=
 <span class=3D"hljs-keyword">null</span> || config.isDefault())=20=
{=0A                <span class=3D"hljs-keyword">if</span> (modul=
eConfig !=3D <span class=3D"hljs-keyword">null</span>) {=0A     =20=
              <span class=3D"hljs-keyword">throw</span> <span cla=
ss=3D"hljs-keyword">new</span> IllegalStateException(<span class=3D=
"hljs-string">"Duplicate module configs: "</span> + moduleConfig=20=
+ <span class=3D"hljs-string">" and "</span> + config);=0A      =20=
         }=0A                moduleConfig =3D config;=0A        =20=
   }=0A        }=0A        <span class=3D"hljs-keyword">if</span>=
 (moduleConfig !=3D <span class=3D"hljs-keyword">null</span>) {=0A=
            setModule(moduleConfig);=0A        }=0A    }=0A}</pre=
><h1 id=3D"item-4">registryIds</h1><p>=C9=E8=D6=C3registryIds=A3=AC=
=C8=E7=B9=FB=B6=BC=D3=D0=D6=B5=A3=ACProviderConfig=BB=E1=B8=B2=B8=
=C7ApplicationConfig=B5=C4registryIds</p><pre class=3D"hljs vbscr=
ipt" style=3D"background-image: initial; background-attachment: i=
nitial; background-size: initial; background-origin: initial; bac=
kground-clip: initial; background-position: initial; background-r=
epeat: initial;"><span class=3D"hljs-keyword">if</span> (StringUt=
ils.<span class=3D"hljs-built_in">isEmpty</span>(getRegistryIds()=
)) {=0A    <span class=3D"hljs-keyword">if</span> (getApplication=
() !=3D <span class=3D"hljs-literal">null</span> &amp;&amp; Strin=
gUtils.isNotEmpty(getApplication().getRegistryIds())) {=0A      =20=
 setRegistryIds(getApplication().getRegistryIds());=0A    }=0A  =20=
 <span class=3D"hljs-keyword">if</span> (getProvider() !=3D <span=
 class=3D"hljs-literal">null</span> &amp;&amp; StringUtils.isNotE=
mpty(getProvider().getRegistryIds())) {=0A        setRegistryIds(=
getProvider().getRegistryIds());=0A    }=0A}</pre><h1 id=3D"item-=
5">RegistryConfig</h1><p>=C8=E7=B9=FBServiceBean=A1=A2ProviderCon=
fig=A1=A2ApplicationConfig=B6=BC=C3=BB=D3=D0RegistryConfig=D0=C5=CF=
=A2=A3=AC=D4=F2=CD=A8=B9=FDid=B4=D3spring=C8=DD=C6=F7=CC=ED=BC=D3=
=A3=AC=C8=E7=B9=FBspring=C8=DD=C6=F7=D2=B2=C3=BB=D3=D0=B6=D4=D3=A6=
=B5=C4id=A3=AC=D4=F2=BC=D3=B8=F6=C4=AC=C8=CF=B5=C4</p><pre class=3D=
"hljs dart" style=3D"background-image: initial; background-attach=
ment: initial; background-size: initial; background-origin: initi=
al; background-clip: initial; background-position: initial; backg=
round-repeat: initial;"><span class=3D"hljs-keyword">if</span> ((=
CollectionUtils.isEmpty(getRegistries()))=0A            &amp;&amp=
; (getProvider() =3D=3D <span class=3D"hljs-keyword">null</span>=20=
|| CollectionUtils.isEmpty(getProvider().getRegistries()))=0A   =20=
        &amp;&amp; (getApplication() =3D=3D <span class=3D"hljs-k=
eyword">null</span> || CollectionUtils.isEmpty(getApplication().g=
etRegistries()))) {=0A    <span class=3D"hljs-comment">// =BB=F1=C8=
=A1RegistryConfig=C0=E0=D0=CD=B5=C4bean</span>=0A    <span class=3D=
"hljs-built_in">Map</span>&lt;<span class=3D"hljs-built_in">Strin=
g</span>, RegistryConfig&gt; registryConfigMap =3D applicationCon=
text =3D=3D <span class=3D"hljs-keyword">null</span> ? <span clas=
s=3D"hljs-keyword">null</span> : BeanFactoryUtils.beansOfTypeIncl=
udingAncestors(applicationContext, RegistryConfig.<span class=3D"=
hljs-keyword">class</span>, <span class=3D"hljs-keyword">false</s=
pan>, <span class=3D"hljs-keyword">false</span>);=0A    <span cla=
ss=3D"hljs-keyword">if</span> (CollectionUtils.isNotEmptyMap(regi=
stryConfigMap)) {=0A        <span class=3D"hljs-comment">// =B1=E9=
=C0=FA=C5=D0=B6=CFid=A3=AC=B0=D1spring=C8=DD=C6=F7=B5=C4RegistryC=
onfig=CC=ED=BC=D3=B5=BDregistryConfigs</span>=0A        <span cla=
ss=3D"hljs-built_in">List</span>&lt;RegistryConfig&gt; registryCo=
nfigs =3D <span class=3D"hljs-keyword">new</span> ArrayList&lt;&g=
t;();=0A        <span class=3D"hljs-keyword">if</span> (StringUti=
ls.isNotEmpty(registryIds)) {=0A            Arrays.stream(COMMA_S=
PLIT_PATTERN.split(registryIds)).forEach(id -&gt; {=0A          =20=
     <span class=3D"hljs-keyword">if</span> (registryConfigMap.co=
ntainsKey(id)) {=0A                    registryConfigs.add(regist=
ryConfigMap.<span class=3D"hljs-keyword">get</span>(id));=0A    =20=
           }=0A            });=0A        }=0A        <span class=3D=
"hljs-comment">// =C8=E7=B9=FB=BB=B9=CA=C7=BF=D5=A3=AC=B0=D1=C4=AC=
=C8=CF=B5=C4=BC=D3=C8=EB=B5=BDregistryConfigs</span>=0A        <s=
pan class=3D"hljs-keyword">if</span> (registryConfigs.isEmpty())=20=
{=0A            <span class=3D"hljs-keyword">for</span> (Registry=
Config config : registryConfigMap.values()) {=0A                <=
span class=3D"hljs-keyword">if</span> (StringUtils.isEmpty(regist=
ryIds) &amp;&amp; (config.isDefault() =3D=3D <span class=3D"hljs-=
keyword">null</span> || config.isDefault().booleanValue())) {=0A=20=
                   registryConfigs.add(config);=0A              =20=
 }=0A            }=0A        }=0A        <span class=3D"hljs-comm=
ent">// =C9=E8=D6=C3=B5=BDRegistries</span>=0A        <span class=
=3D"hljs-keyword">if</span> (!registryConfigs.isEmpty()) {=0A   =20=
        <span class=3D"hljs-keyword">super</span>.setRegistries(r=
egistryConfigs);=0A        }=0A    }=0A}</pre><h1 id=3D"item-6">M=
etadataReportConfig</h1><pre class=3D"hljs gradle" style=3D"backg=
round-image: initial; background-attachment: initial; background-=
size: initial; background-origin: initial; background-clip: initi=
al; background-position: initial; background-repeat: initial;"><s=
pan class=3D"hljs-keyword">if</span> (getMetadataReportConfig() =3D=
=3D <span class=3D"hljs-keyword">null</span>) {=0A    <span class=
=3D"hljs-comment">// =BB=F1=C8=A1MetadataReportConfig=C0=E0=D0=CD=
=B5=C4bean=A3=AC=D6=BB=C4=DC=C9=E8=D6=C3=D2=BB=B8=F6</span>=0A  =20=
 Map&lt;String, MetadataReportConfig&gt; metadataReportConfigMap=20=
=3D applicationContext =3D=3D <span class=3D"hljs-keyword">null</=
span> ? <span class=3D"hljs-keyword">null</span> : BeanFactoryUti=
ls.beansOfTypeIncludingAncestors(applicationContext, MetadataRepo=
rtConfig.<span class=3D"hljs-keyword">class</span>, <span class=3D=
"hljs-keyword">false</span>, <span class=3D"hljs-keyword">false</=
span>);=0A    <span class=3D"hljs-keyword">if</span> (metadataRep=
ortConfigMap !=3D <span class=3D"hljs-keyword">null</span> &amp;&=
amp; metadataReportConfigMap.<span class=3D"hljs-keyword">size</s=
pan>() =3D=3D <span class=3D"hljs-number">1</span>) {=0A        <=
span class=3D"hljs-keyword">super</span>.setMetadataReportConfig(=
metadataReportConfigMap.values().iterator().<span class=3D"hljs-k=
eyword">next</span>());=0A    } <span class=3D"hljs-keyword">else=
</span> <span class=3D"hljs-keyword">if</span> (metadataReportCon=
figMap !=3D <span class=3D"hljs-keyword">null</span> &amp;&amp; m=
etadataReportConfigMap.<span class=3D"hljs-keyword">size</span>()=
 &gt; <span class=3D"hljs-number">1</span>) {=0A        <span cla=
ss=3D"hljs-keyword">throw</span> <span class=3D"hljs-keyword">new=
</span> IllegalStateException(<span class=3D"hljs-string">"Multip=
le MetadataReport configs: "</span> + metadataReportConfigMap);=0A=
    }=0A}</pre><h1 id=3D"item-7">ConfigCenterConfig</h1><pre clas=
s=3D"hljs gradle" style=3D"background-image: initial; background-=
attachment: initial; background-size: initial; background-origin:=
 initial; background-clip: initial; background-position: initial;=
 background-repeat: initial;"><span class=3D"hljs-keyword">if</sp=
an> (getConfigCenter() =3D=3D <span class=3D"hljs-keyword">null</=
span>) {=0A    <span class=3D"hljs-comment">// =BB=F1=C8=A1Config=
CenterConfig=C0=E0=D0=CD=B5=C4bean=A3=AC=D6=BB=C4=DC=C9=E8=D6=C3=D2=
=BB=B8=F6</span>=0A    Map&lt;String, ConfigCenterConfig&gt; conf=
igenterMap =3D applicationContext =3D=3D <span class=3D"hljs-keyw=
ord">null</span> ? <span class=3D"hljs-keyword">null</span> : Bea=
nFactoryUtils.beansOfTypeIncludingAncestors(applicationContext, C=
onfigCenterConfig.<span class=3D"hljs-keyword">class</span>, <spa=
n class=3D"hljs-keyword">false</span>, <span class=3D"hljs-keywor=
d">false</span>);=0A    <span class=3D"hljs-keyword">if</span> (c=
onfigenterMap !=3D <span class=3D"hljs-keyword">null</span> &amp;=
&amp; configenterMap.<span class=3D"hljs-keyword">size</span>() =3D=
=3D <span class=3D"hljs-number">1</span>) {=0A        <span class=
=3D"hljs-keyword">super</span>.setConfigCenter(configenterMap.val=
ues().iterator().<span class=3D"hljs-keyword">next</span>());=0A=20=
   } <span class=3D"hljs-keyword">else</span> <span class=3D"hljs=
-keyword">if</span> (configenterMap !=3D <span class=3D"hljs-keyw=
ord">null</span> &amp;&amp; configenterMap.<span class=3D"hljs-ke=
yword">size</span>() &gt; <span class=3D"hljs-number">1</span>) {=
=0A        <span class=3D"hljs-keyword">throw</span> <span class=3D=
"hljs-keyword">new</span> IllegalStateException(<span class=3D"hl=
js-string">"Multiple ConfigCenter found:"</span> + configenterMap=
);=0A    }=0A}</pre><h1 id=3D"item-8">MonitorConfig</h1><pre clas=
s=3D"hljs dart" style=3D"background-image: initial; background-at=
tachment: initial; background-size: initial; background-origin: i=
nitial; background-clip: initial; background-position: initial; b=
ackground-repeat: initial;"><span class=3D"hljs-keyword">if</span=
> (getMonitor() =3D=3D <span class=3D"hljs-keyword">null</span>=0A=
            &amp;&amp; (getProvider() =3D=3D <span class=3D"hljs-=
keyword">null</span> || getProvider().getMonitor() =3D=3D <span c=
lass=3D"hljs-keyword">null</span>)=0A            &amp;&amp; (getA=
pplication() =3D=3D <span class=3D"hljs-keyword">null</span> || g=
etApplication().getMonitor() =3D=3D <span class=3D"hljs-keyword">=
null</span>)) {=0A    <span class=3D"hljs-comment">// =BB=F1=C8=A1=
MonitorConfig=C0=E0=D0=CD=B5=C4bean=A3=AC=D6=BB=C4=DC=C9=E8=D6=C3=
=D2=BB=B8=F6=C4=AC=C8=CF</span>=0A    <span class=3D"hljs-built_i=
n">Map</span>&lt;<span class=3D"hljs-built_in">String</span>, Mon=
itorConfig&gt; monitorConfigMap =3D applicationContext =3D=3D <sp=
an class=3D"hljs-keyword">null</span> ? <span class=3D"hljs-keywo=
rd">null</span> : BeanFactoryUtils.beansOfTypeIncludingAncestors(=
applicationContext, MonitorConfig.<span class=3D"hljs-keyword">cl=
ass</span>, <span class=3D"hljs-keyword">false</span>, <span clas=
s=3D"hljs-keyword">false</span>);=0A    <span class=3D"hljs-keywo=
rd">if</span> (monitorConfigMap !=3D <span class=3D"hljs-keyword"=
>null</span> &amp;&amp; monitorConfigMap.size() &gt; <span class=3D=
"hljs-number">0</span>) {=0A        MonitorConfig monitorConfig =3D=
 <span class=3D"hljs-keyword">null</span>;=0A        <span class=3D=
"hljs-keyword">for</span> (MonitorConfig config : monitorConfigMa=
p.values()) {=0A            <span class=3D"hljs-keyword">if</span=
> (config.isDefault() =3D=3D <span class=3D"hljs-keyword">null</s=
pan> || config.isDefault()) {=0A                <span class=3D"hl=
js-keyword">if</span> (monitorConfig !=3D <span class=3D"hljs-key=
word">null</span>) {=0A                    <span class=3D"hljs-ke=
yword">throw</span> <span class=3D"hljs-keyword">new</span> Illeg=
alStateException(<span class=3D"hljs-string">"Duplicate monitor c=
onfigs: "</span> + monitorConfig + <span class=3D"hljs-string">"=20=
and "</span> + config);=0A                }=0A                mon=
itorConfig =3D config;=0A            }=0A        }=0A        <spa=
n class=3D"hljs-keyword">if</span> (monitorConfig !=3D <span clas=
s=3D"hljs-keyword">null</span>) {=0A            setMonitor(monito=
rConfig);=0A        }=0A    }=0A}</pre><h1 id=3D"item-9">MetricsC=
onfig</h1><pre class=3D"hljs dart" style=3D"background-image: ini=
tial; background-attachment: initial; background-size: initial; b=
ackground-origin: initial; background-clip: initial; background-p=
osition: initial; background-repeat: initial;"><span class=3D"hlj=
s-keyword">if</span> (getMetrics() =3D=3D <span class=3D"hljs-key=
word">null</span>) {=0A    <span class=3D"hljs-comment">// =BB=F1=
=C8=A1MetricsConfig=C0=E0=D0=CD=B5=C4bean=A3=AC=D6=BB=C4=DC=C9=E8=
=D6=C3=D2=BB=B8=F6</span>=0A    <span class=3D"hljs-built_in">Map=
</span>&lt;<span class=3D"hljs-built_in">String</span>, MetricsCo=
nfig&gt; metricsConfigMap =3D applicationContext =3D=3D <span cla=
ss=3D"hljs-keyword">null</span> ? <span class=3D"hljs-keyword">nu=
ll</span> : BeanFactoryUtils.beansOfTypeIncludingAncestors(applic=
ationContext, MetricsConfig.<span class=3D"hljs-keyword">class</s=
pan>, <span class=3D"hljs-keyword">false</span>, <span class=3D"h=
ljs-keyword">false</span>);=0A    <span class=3D"hljs-keyword">if=
</span> (metricsConfigMap !=3D <span class=3D"hljs-keyword">null<=
/span> &amp;&amp; metricsConfigMap.size() &gt; <span class=3D"hlj=
s-number">0</span>) {=0A        MetricsConfig metricsConfig =3D <=
span class=3D"hljs-keyword">null</span>;=0A        <span class=3D=
"hljs-keyword">for</span> (MetricsConfig config : metricsConfigMa=
p.values()) {=0A            <span class=3D"hljs-keyword">if</span=
> (metricsConfig !=3D <span class=3D"hljs-keyword">null</span>) {=
=0A                <span class=3D"hljs-keyword">throw</span> <spa=
n class=3D"hljs-keyword">new</span> IllegalStateException(<span c=
lass=3D"hljs-string">"Duplicate metrics configs: "</span> + metri=
csConfig + <span class=3D"hljs-string">" and "</span> + config);=0A=
            }=0A            metricsConfig =3D config;=0A        }=
=0A        <span class=3D"hljs-keyword">if</span> (metricsConfig=20=
!=3D <span class=3D"hljs-keyword">null</span>) {=0A            se=
tMetrics(metricsConfig);=0A        }=0A    }=0A}</pre><h1 id=3D"i=
tem-10">ProtocolIds</h1><pre class=3D"hljs vbscript" style=3D"bac=
kground-image: initial; background-attachment: initial; backgroun=
d-size: initial; background-origin: initial; background-clip: ini=
tial; background-position: initial; background-repeat: initial;">=
<span class=3D"hljs-keyword">if</span> (StringUtils.<span class=3D=
"hljs-built_in">isEmpty</span>(getProtocolIds())) {=0A    <span c=
lass=3D"hljs-keyword">if</span> (getProvider() !=3D <span class=3D=
"hljs-literal">null</span> &amp;&amp; StringUtils.isNotEmpty(getP=
rovider().getProtocolIds())) {=0A        setProtocolIds(getProvid=
er().getProtocolIds());=0A    }=0A}</pre><h1 id=3D"item-11">Proto=
colConfig</h1><p>=C8=E7=B9=FBServiceBean=A1=A2ProviderConfig=B6=BC=
=C3=BB=D3=D0ProtocolConfig=D0=C5=CF=A2=A3=AC=D4=F2=CD=A8=B9=FDid=B4=
=D3spring=C8=DD=C6=F7=CC=ED=BC=D3=A3=AC=C8=E7=B9=FBspring=C8=DD=C6=
=F7=D2=B2=C3=BB=D3=D0=B6=D4=D3=A6=B5=C4id=A3=AC=D4=F2=BC=D3=B8=F6=
=C4=AC=C8=CF=B5=C4</p><pre class=3D"hljs processing" style=3D"bac=
kground-image: initial; background-attachment: initial; backgroun=
d-size: initial; background-origin: initial; background-clip: ini=
tial; background-position: initial; background-repeat: initial;">=
<span class=3D"hljs-keyword">if</span> (CollectionUtils.isEmpty(g=
etProtocols())=0A            &amp;&amp; (getProvider() =3D=3D <sp=
an class=3D"hljs-keyword">null</span> || CollectionUtils.isEmpty(=
getProvider().getProtocols()))) {=0A    Map&lt;<span class=3D"hlj=
s-keyword">String</span>, ProtocolConfig&gt; protocolConfigMap =3D=
 applicationContext =3D=3D <span class=3D"hljs-keyword">null</spa=
n> ? <span class=3D"hljs-keyword">null</span> : BeanFactoryUtils.=
beansOfTypeIncludingAncestors(applicationContext, ProtocolConfig.=
class, <span class=3D"hljs-keyword">false</span>, <span class=3D"=
hljs-keyword">false</span>);=0A    <span class=3D"hljs-keyword">i=
f</span> (protocolConfigMap !=3D <span class=3D"hljs-keyword">nul=
l</span> &amp;&amp; protocolConfigMap.<span class=3D"hljs-built_i=
n">size</span>() &gt; <span class=3D"hljs-number">0</span>) {=0A=20=
       List&lt;ProtocolConfig&gt; protocolConfigs =3D <span class=
=3D"hljs-keyword">new</span> ArrayList&lt;ProtocolConfig&gt;();=0A=
        <span class=3D"hljs-keyword">if</span> (StringUtils.isNot=
Empty(getProtocolIds())) {=0A            Arrays.stream(COMMA_SPLI=
T_PATTERN.<span class=3D"hljs-built_in">split</span>(getProtocolI=
ds()))=0A                    .forEach(id -&gt; {=0A             =20=
          <span class=3D"hljs-keyword">if</span> (protocolConfigM=
ap.containsKey(id)) {=0A                            protocolConfi=
gs.<span class=3D"hljs-built_in">add</span>(protocolConfigMap.<sp=
an class=3D"hljs-built_in">get</span>(id));=0A                  =20=
     }=0A                    });=0A        }=0A        <span clas=
s=3D"hljs-comment">// =C8=E7=B9=FB=BB=B9=CA=C7=BF=D5=A3=AC=B0=D1=C4=
=AC=C8=CF=B5=C4=BC=D3=C8=EB=B5=BDprotocolConfigs</span>=0A      =20=
 <span class=3D"hljs-keyword">if</span> (protocolConfigs.isEmpty(=
)) {=0A            <span class=3D"hljs-keyword">for</span> (Proto=
colConfig config : protocolConfigMap.values()) {=0A             =20=
  <span class=3D"hljs-keyword">if</span> (StringUtils.isEmpty(pro=
tocolIds)) {=0A                    protocolConfigs.<span class=3D=
"hljs-built_in">add</span>(config);=0A                }=0A      =20=
     }=0A        }=0A=0A        <span class=3D"hljs-keyword">if</=
span> (!protocolConfigs.isEmpty()) {=0A            <span class=3D=
"hljs-keyword">super</span>.setProtocols(protocolConfigs);=0A   =20=
    }=0A    }=0A}</pre><h1 id=3D"item-12">path</h1><p>=C9=E8=D6=C3=
path</p><pre class=3D"hljs armasm" style=3D"background-image: ini=
tial; background-attachment: initial; background-size: initial; b=
ackground-origin: initial; background-clip: initial; background-p=
osition: initial; background-repeat: initial;"><span class=3D"hlj=
s-symbol">if</span> (<span class=3D"hljs-keyword">StringUtils.isE=
mpty(getPath())) </span>{=0A    <span class=3D"hljs-meta">if</spa=
n> (<span class=3D"hljs-keyword">StringUtils.isNotEmpty(beanName)=
=0A</span>            &amp;&amp; <span class=3D"hljs-keyword">Str=
ingUtils.isNotEmpty(getInterface())=0A</span>            &amp;&am=
p; <span class=3D"hljs-keyword">beanName.startsWith(getInterface(=
))) </span>{=0A        setPath(<span class=3D"hljs-keyword">beanN=
ame);=0A</span>    }=0A}</pre><h1 id=3D"item-13">=B7=FE=CE=F1=B1=A9=
=C2=B6export</h1><p>supportedApplicationListener=D4=DAsetApplicat=
ionContext=B7=BD=B7=A8=C9=E8=D6=C3=B5=C4=A3=AC=D2=F2=CE=AA=D5=E2=B8=
=F6=C0=E0=BB=B9=CA=B5=CF=D6=C1=CBApplicationContextAware=BD=D3=BF=
=DA</p><pre class=3D"hljs gcode" style=3D"background-image: initi=
al; background-attachment: initial; background-size: initial; bac=
kground-origin: initial; background-clip: initial; background-pos=
ition: initial; background-repeat: initial;"><span class=3D"hljs-=
keyword">if</span> <span class=3D"hljs-comment">(!supportedApplic=
ationListener)</span> {=0A    export<span class=3D"hljs-comment">=
()</span>;=0A}</pre><p>=BA=F3=C3=E6=CE=D2=C3=C7=BF=B4=BF=B4=B7=FE=
=CE=F1=CA=C7=D4=F5=C3=B4=B1=A9=C2=B6=B5=C4</p><br></article><div>=
=C0=B4=D4=B4=A3=BA&nbsp;<a href=3D"https://segmentfault.com/a/119=
0000021430403?utm_source=3Dtag-newest">https://segmentfault.com/a=
/1190000021430403?utm_source=3Dtag-newest</a></div></body></html>=
=0A=0A=0A=0A=0A=0A=0A=0A

------=_Next_Part_0000494343.877--

------=_Next_Part_0001483029.943
Content-Type: image/png;
	name="0.6483538315358757.png"
Content-Transfer-Encoding: base64
Content-ID: <0.6483538315358757.png>
Content-Location: 0.6483538315358757.png

iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEsElEQVRYR8WWa0wUVxiGvzOX3dmZWVwWRFhgFdRiSyrSmpJW0tj2h7dWDWlsgwEDGC2tphfbpiZN1PSHNNE2MdFqRQSq1KRNlLY0xF4tbYJRY41oXUyKArLgshfZ2dndmTPnNLsJDbG2y65UJpk/853vfZ/znXcmg2CaLzRV/qfslvy1vvBAsnpTBtCRa1tkM6etWfJn/65kIKYMoNOZXSwKwp6ne2+smBaAHx6avQcQzXrO1V89LQBni5zU6/EVr/QpVx84wLnC2QFZDX7/8LDvxWTMY2vvKwO9Er9IkiznEcu5HG5fcUzQJfElJtG6tMDj2wcANBFQygC9M+WtmRbTPkWP/OZ0q+U9aTAvzZJxglD2jzm3b1clMh6vpwTgzrB+aJb4d5WwctTp0WpvZsk7BE7aqRD0/Nzh4Y7Jmqd0BN/l5VWWMvh4NKqczB1RKobsljdk2f6xxxtYODcUupyMeUoAv8yf350XCZUVDgzFp9eXmxEQooYrZzRQlqx5SgA/zys4LWNcvPjGQG5M4Px8J50VCATyPWPpDwSgMy/7iRzZcrbkWl98At2FjnMFOLpYDQWbCrxaXbIQKYXQ5Zix32sWc5/qc6+9kG5a6JCkS2ZgoFul+St9vsFkIFICiBn0OLLaJU39vGBUOTE0U/xAMovvXwBu6bODw2f+V4BHV72XfrmjwR8zGcywbs/zBneP2IQqxHHbs0aVRyaaZ2w49BqDSMjTXN/8b1CTm8Cmjo9YoHmIGhdxSPkS2tZfnyjYlr9gW+XAtb0Tnzle3l2qCNkcFm07hUiw1NdU7bgXREKAjM3H9KDk5AxVbTSI3gscCslYpY4xN5NJIoKGDbuJN1kpRk6VYex+yRKgNNQ40LLtq3FD0ysnqYzVzb7G9Z/eDZEQINYgbjy+ErO2Eg2hWQCGHXjWAlgLA8OowDABoMwtiOAr0Lj6x3vt0vpmJyV+d2moueb3lABiTZa646+HTTYPfLKqLZmQ8Vs6bgtRX0vwcNU7KR3BeFP6ppauMXlOuRHW+hEyRlmgKgYKDMdaCSFZgGgOQwEIRjvh4IpdUN9Zw+JwpVkP7lObq7++vxBO6Ga2/rSF6Fohw1GZUIMAZRVAqB+wdgYOvXApvnR1uxUywQFNa1yJpjWpDPwt8urpo6AEdkDruv5/CNe2F03GMOUMxBvrO/tF2ZofiapAdOwHDmmgU1EQBCvH8kB0OqL63U/CZ+v6Eu18vP7fE6jvbACgMiDmKhxYdiDetOmbZ8DELQeKnIB1EyA2CgA3AUMXNK749m7j9Noj5f6mul+TykB6dWu5bs3sCgHrovuXLZjsbiauE2uaHhNZdu0dZC3SD1e8lBSAWHEoJ81uaYggpkTl7HM0YAkAGgMEfgCkIAQhSgDHf/koMQGLZECGBQDxgGgQSOyGXtCiB+FIRQ+/8dQxSbuzN9C64WJqGahqlYC3LeFkUQdMeMogKxhgNigmZob1RanmhZA6HBefIZYBJo8jhl9Eo8Ys4HmPjL1vK4crr9zfd6D2SDkHUA6AbICQAJTwlBAzA1RgTJzJQAyiCIUJpSOGoV/X7gQ7wl+8dSvR8SX3GiZSS6E+7QB/AVIm2jC53pzAAAAAAElFTkSuQmCC

------=_Next_Part_0001483029.943--

